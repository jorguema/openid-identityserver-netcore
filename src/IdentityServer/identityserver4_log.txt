2019-05-27 16:10:24.900 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-27 16:10:25.231 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-27 16:10:25.232 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-27 16:10:25.232 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-27 16:10:25.232 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-27 16:10:25.232 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-27 16:10:25.232 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-27 16:10:25.468 +02:00 [DBG] Starting grant removal
2019-05-27 16:10:25.886 +02:00 [DBG] Login Url: /Account/Login
2019-05-27 16:10:25.887 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-27 16:10:25.887 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-27 16:10:25.887 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-27 16:10:25.887 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-27 16:10:25.887 +02:00 [DBG] Error Url: /home/error
2019-05-27 16:10:25.887 +02:00 [DBG] Error Id Parameter: errorId
2019-05-27 16:12:12.505 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-27 16:12:12.677 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-27 16:12:12.677 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-27 16:12:12.677 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-27 16:12:12.677 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-27 16:12:12.677 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-27 16:12:12.677 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-27 16:12:12.809 +02:00 [DBG] Starting grant removal
2019-05-27 16:12:13.137 +02:00 [DBG] Login Url: /Account/Login
2019-05-27 16:12:13.138 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-27 16:12:13.138 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-27 16:12:13.138 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-27 16:12:13.138 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-27 16:12:13.138 +02:00 [DBG] Error Url: /home/error
2019-05-27 16:12:13.138 +02:00 [DBG] Error Id Parameter: errorId
2019-05-27 17:12:23.899 +02:00 [ERR] An error occurred using the connection to database 'IdentityServer4.Combined-2.3.0' on server '(LocalDb)\MSSQLLocalDB'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:8b459a9d-6f50-4bbc-90dd-8852c66ef7ff
Error Number:4060,State:1,Class:11
2019-05-27 17:12:24.181 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:8b459a9d-6f50-4bbc-90dd-8852c66ef7ff
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:8b459a9d-6f50-4bbc-90dd-8852c66ef7ff
Error Number:4060,State:1,Class:11
2019-05-27 17:12:24.206 +02:00 [ERR] Exception removing expired grants: Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
2019-05-29 12:44:46.561 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-29 12:44:46.683 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 12:44:46.684 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 12:44:46.684 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 12:44:46.684 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 12:44:46.684 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 12:44:46.684 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 12:44:46.969 +02:00 [DBG] Starting grant removal
2019-05-29 12:44:47.286 +02:00 [DBG] Login Url: /Account/Login
2019-05-29 12:44:47.287 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 12:44:47.288 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-29 12:44:47.288 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-29 12:44:47.288 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 12:44:47.288 +02:00 [DBG] Error Url: /home/error
2019-05-29 12:44:47.288 +02:00 [DBG] Error Id Parameter: errorId
2019-05-29 12:51:12.596 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 12:51:12.674 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 12:51:12.675 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 12:51:12.680 +02:00 [DBG] Start token request.
2019-05-29 12:51:12.685 +02:00 [DBG] Start client validation
2019-05-29 12:51:12.689 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 12:51:12.692 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 12:51:12.891 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 12:51:12.891 +02:00 [DBG] Secret id found: ro.client
2019-05-29 12:51:14.178 +02:00 [DBG] ro.client found in database: true
2019-05-29 12:51:14.186 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 12:51:14.194 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 12:51:14.194 +02:00 [DBG] Client validation success
2019-05-29 12:51:14.229 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN44ALICPVP:00000003","TimeStamp":"2019-05-29T10:51:14.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 12:51:14.257 +02:00 [DBG] Start token request validation
2019-05-29 12:51:14.267 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 12:51:14.303 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 12:51:14.484 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 12:51:14.496 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 12:51:14.500 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 12:51:14.701 +02:00 [WRN] Invalid password for user 59e1ae52-78c3-4857-96f7-e17d16a94ad8.
2019-05-29 12:51:14.702 +02:00 [WRN] User 59e1ae52-78c3-4857-96f7-e17d16a94ad8 failed to provide the correct password.
2019-05-29 12:51:14.776 +02:00 [INF] Authentication failed for username: alice, reason: invalid credentials
2019-05-29 12:51:14.776 +02:00 [INF] {"Username":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN44ALICPVP:00000003","TimeStamp":"2019-05-29T10:51:14.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 12:51:14.848 +02:00 [ERR] Error logging Index was outside the bounds of the array., request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 12:51:14.850 +02:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":"ro.client","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN44ALICPVP:00000003","TimeStamp":"2019-05-29T10:51:14.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-05-29 12:51:14.853 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN44ALICPVP:00000003","TimeStamp":"2019-05-29T10:51:14.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 12:51:46.483 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 12:51:46.489 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 12:51:46.492 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 12:51:46.499 +02:00 [DBG] Start token request.
2019-05-29 12:51:46.500 +02:00 [DBG] Start client validation
2019-05-29 12:51:46.500 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 12:51:46.500 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 12:51:46.509 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 12:51:46.509 +02:00 [DBG] Secret id found: ro.client
2019-05-29 12:51:46.514 +02:00 [DBG] ro.client found in database: true
2019-05-29 12:51:46.514 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 12:51:46.514 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 12:51:46.514 +02:00 [DBG] Client validation success
2019-05-29 12:51:46.514 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN44ALICPVP:00000004","TimeStamp":"2019-05-29T10:51:46.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 12:51:46.514 +02:00 [DBG] Start token request validation
2019-05-29 12:51:46.514 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 12:51:46.515 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 12:51:46.520 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 12:51:46.520 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 12:51:46.523 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 12:51:46.563 +02:00 [INF] Credentials validated for username: alice
2019-05-29 12:51:46.566 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN44ALICPVP:00000004","TimeStamp":"2019-05-29T10:51:46.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 12:51:46.583 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN44ALICPVP:00000004","TimeStamp":"2019-05-29T10:51:46.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 12:51:46.583 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 12:51:46.584 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 12:51:46.603 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 12:51:46.603 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 12:51:46.902 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****Bzpw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN44ALICPVP:00000004","TimeStamp":"2019-05-29T10:51:46.0000000Z","ProcessId":19288,"LocalIpAddress":"127.0.0.1:44948","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 12:51:46.904 +02:00 [DBG] Token request success.
2019-05-29 13:44:33.898 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-29 13:44:36.424 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 13:44:36.424 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 13:44:36.424 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 13:44:36.424 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 13:44:36.424 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 13:44:36.424 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 13:44:36.729 +02:00 [DBG] Starting grant removal
2019-05-29 13:44:37.136 +02:00 [DBG] Login Url: /Account/Login
2019-05-29 13:44:37.138 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 13:44:37.138 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-29 13:44:37.138 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-29 13:44:37.138 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 13:44:37.138 +02:00 [DBG] Error Url: /home/error
2019-05-29 13:44:37.138 +02:00 [DBG] Error Id Parameter: errorId
2019-05-29 13:44:37.248 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 13:44:37.267 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 13:44:37.267 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 13:44:37.273 +02:00 [DBG] Start token request.
2019-05-29 13:44:37.278 +02:00 [DBG] Start client validation
2019-05-29 13:44:37.284 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 13:44:37.287 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 13:44:37.323 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 13:44:37.323 +02:00 [DBG] Secret id found: ro.client
2019-05-29 13:44:49.429 +02:00 [DBG] ro.client found in database: true
2019-05-29 13:44:49.440 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 13:44:49.550 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 13:44:49.550 +02:00 [DBG] Client validation success
2019-05-29 13:44:49.566 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN45C3DDJ7S:00000001","TimeStamp":"2019-05-29T11:44:49.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 13:44:49.577 +02:00 [DBG] Start token request validation
2019-05-29 13:44:49.585 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 13:44:49.620 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 13:44:49.774 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 13:44:49.783 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 13:44:49.787 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 13:44:50.750 +02:00 [INF] Credentials validated for username: alice
2019-05-29 13:44:50.751 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45C3DDJ7S:00000001","TimeStamp":"2019-05-29T11:44:50.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 13:44:50.757 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45C3DDJ7S:00000001","TimeStamp":"2019-05-29T11:44:50.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 13:44:50.757 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 13:44:50.763 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 13:44:50.788 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 13:44:50.788 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 13:44:50.976 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****nXcg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN45C3DDJ7S:00000001","TimeStamp":"2019-05-29T11:44:50.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 13:44:50.977 +02:00 [DBG] Token request success.
2019-05-29 13:51:29.378 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 13:51:29.389 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 13:51:29.390 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 13:51:29.391 +02:00 [DBG] Start token request.
2019-05-29 13:51:29.465 +02:00 [DBG] Start client validation
2019-05-29 13:51:29.467 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 13:51:29.467 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 13:51:29.473 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 13:51:29.473 +02:00 [DBG] Secret id found: ro.client
2019-05-29 13:51:29.500 +02:00 [DBG] ro.client found in database: true
2019-05-29 13:51:29.500 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 13:51:29.500 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 13:51:29.500 +02:00 [DBG] Client validation success
2019-05-29 13:51:29.500 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN45C3DDJ7T:00000001","TimeStamp":"2019-05-29T11:51:29.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 13:51:29.501 +02:00 [DBG] Start token request validation
2019-05-29 13:51:29.501 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 13:51:29.503 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 13:51:29.532 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 13:51:29.533 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 13:51:29.536 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 13:51:29.546 +02:00 [INF] Credentials validated for username: alice
2019-05-29 13:51:29.546 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45C3DDJ7T:00000001","TimeStamp":"2019-05-29T11:51:29.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 13:51:29.546 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45C3DDJ7T:00000001","TimeStamp":"2019-05-29T11:51:29.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 13:51:29.546 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 13:51:29.546 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 13:51:29.546 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 13:51:29.546 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 13:51:29.558 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****ibkg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN45C3DDJ7T:00000001","TimeStamp":"2019-05-29T11:51:29.0000000Z","ProcessId":20660,"LocalIpAddress":"127.0.0.1:12812","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 13:51:29.559 +02:00 [DBG] Token request success.
2019-05-29 14:09:34.155 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-29 14:09:34.254 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 14:09:34.254 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 14:09:34.254 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 14:09:34.254 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 14:09:34.254 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 14:09:34.254 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 14:09:34.328 +02:00 [DBG] Starting grant removal
2019-05-29 14:09:34.479 +02:00 [DBG] Login Url: /Account/Login
2019-05-29 14:09:34.480 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 14:09:34.480 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-29 14:09:34.480 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-29 14:09:34.480 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 14:09:34.480 +02:00 [DBG] Error Url: /home/error
2019-05-29 14:09:34.480 +02:00 [DBG] Error Id Parameter: errorId
2019-05-29 14:09:40.328 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 14:09:40.341 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 14:09:40.341 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 14:09:40.348 +02:00 [DBG] Start token request.
2019-05-29 14:09:40.353 +02:00 [DBG] Start client validation
2019-05-29 14:09:40.357 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 14:09:40.360 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 14:09:40.374 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 14:09:40.374 +02:00 [DBG] Secret id found: ro.client
2019-05-29 14:09:41.158 +02:00 [DBG] ro.client found in database: true
2019-05-29 14:09:41.166 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 14:09:41.172 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 14:09:41.172 +02:00 [DBG] Client validation success
2019-05-29 14:09:41.187 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN45Q1MN71K:00000003","TimeStamp":"2019-05-29T12:09:41.0000000Z","ProcessId":36144,"LocalIpAddress":"127.0.0.1:1279","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 14:09:41.196 +02:00 [DBG] Start token request validation
2019-05-29 14:09:41.204 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 14:09:41.237 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:09:41.366 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:09:41.376 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:09:41.379 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:09:41.507 +02:00 [INF] Credentials validated for username: alice
2019-05-29 14:09:41.508 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45Q1MN71K:00000003","TimeStamp":"2019-05-29T12:09:41.0000000Z","ProcessId":36144,"LocalIpAddress":"127.0.0.1:1279","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:09:41.515 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45Q1MN71K:00000003","TimeStamp":"2019-05-29T12:09:41.0000000Z","ProcessId":36144,"LocalIpAddress":"127.0.0.1:1279","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:09:41.515 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 14:09:41.526 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 14:09:41.547 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 14:09:41.547 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 14:09:41.694 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****sSGA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN45Q1MN71K:00000003","TimeStamp":"2019-05-29T12:09:41.0000000Z","ProcessId":36144,"LocalIpAddress":"127.0.0.1:1279","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 14:09:41.695 +02:00 [DBG] Token request success.
2019-05-29 14:10:50.010 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-29 14:10:50.050 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 14:10:50.050 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 14:10:50.050 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 14:10:50.050 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 14:10:50.050 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 14:10:50.050 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 14:10:50.147 +02:00 [DBG] Starting grant removal
2019-05-29 14:10:50.518 +02:00 [DBG] Login Url: /Account/Login
2019-05-29 14:10:50.520 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 14:10:50.520 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-29 14:10:50.520 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-29 14:10:50.520 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 14:10:50.520 +02:00 [DBG] Error Url: /home/error
2019-05-29 14:10:50.520 +02:00 [DBG] Error Id Parameter: errorId
2019-05-29 14:10:53.850 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 14:10:53.875 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 14:10:53.875 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 14:10:53.884 +02:00 [DBG] Start token request.
2019-05-29 14:10:53.891 +02:00 [DBG] Start client validation
2019-05-29 14:10:53.897 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 14:10:53.902 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 14:10:53.923 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 14:10:53.923 +02:00 [DBG] Secret id found: ro.client
2019-05-29 14:10:54.549 +02:00 [DBG] ro.client found in database: true
2019-05-29 14:10:54.557 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 14:10:54.563 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 14:10:54.563 +02:00 [DBG] Client validation success
2019-05-29 14:10:54.579 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN45QOBD7FT:00000002","TimeStamp":"2019-05-29T12:10:54.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 14:10:54.587 +02:00 [DBG] Start token request validation
2019-05-29 14:10:54.595 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 14:10:54.628 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:10:54.765 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:10:54.775 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:10:54.778 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:10:54.818 +02:00 [INF] Credentials validated for username: alice
2019-05-29 14:10:54.818 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45QOBD7FT:00000002","TimeStamp":"2019-05-29T12:10:54.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:10:54.825 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45QOBD7FT:00000002","TimeStamp":"2019-05-29T12:10:54.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:10:54.825 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 14:10:54.832 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 14:10:54.851 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 14:10:54.851 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 14:10:54.989 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****zFjA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN45QOBD7FT:00000002","TimeStamp":"2019-05-29T12:10:54.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 14:10:54.990 +02:00 [DBG] Token request success.
2019-05-29 14:17:19.948 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 14:17:19.949 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 14:17:19.949 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 14:17:19.949 +02:00 [DBG] Start token request.
2019-05-29 14:17:19.949 +02:00 [DBG] Start client validation
2019-05-29 14:17:19.949 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 14:17:19.949 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 14:17:19.950 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 14:17:19.950 +02:00 [DBG] Secret id found: ro.client
2019-05-29 14:17:19.976 +02:00 [DBG] ro.client found in database: true
2019-05-29 14:17:19.976 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 14:17:19.977 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 14:17:19.977 +02:00 [DBG] Client validation success
2019-05-29 14:17:19.977 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000001","TimeStamp":"2019-05-29T12:17:19.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 14:17:19.977 +02:00 [DBG] Start token request validation
2019-05-29 14:17:19.977 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 14:17:19.979 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:17:20.010 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:17:20.011 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:17:20.014 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:17:20.026 +02:00 [INF] Credentials validated for username: alice
2019-05-29 14:17:20.026 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000001","TimeStamp":"2019-05-29T12:17:20.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:17:20.026 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000001","TimeStamp":"2019-05-29T12:17:20.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:17:20.026 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 14:17:20.026 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***","AllowOfflineAccess":"true"},"$type":"TokenRequestValidationLog"}
2019-05-29 14:17:20.027 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 14:17:20.027 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 14:17:20.035 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****ykvw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000001","TimeStamp":"2019-05-29T12:17:20.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 14:17:20.035 +02:00 [DBG] Token request success.
2019-05-29 14:17:24.031 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 14:17:24.032 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 14:17:24.032 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 14:17:24.032 +02:00 [DBG] Start token request.
2019-05-29 14:17:24.032 +02:00 [DBG] Start client validation
2019-05-29 14:17:24.032 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 14:17:24.032 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 14:17:24.032 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 14:17:24.033 +02:00 [DBG] Secret id found: ro.client
2019-05-29 14:17:24.037 +02:00 [DBG] ro.client found in database: true
2019-05-29 14:17:24.037 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 14:17:24.037 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 14:17:24.037 +02:00 [DBG] Client validation success
2019-05-29 14:17:24.037 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000002","TimeStamp":"2019-05-29T12:17:24.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 14:17:24.037 +02:00 [DBG] Start token request validation
2019-05-29 14:17:24.037 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 14:17:24.038 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:17:24.041 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:17:24.042 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 14:17:24.045 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 14:17:24.058 +02:00 [INF] Credentials validated for username: alice
2019-05-29 14:17:24.058 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000002","TimeStamp":"2019-05-29T12:17:24.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:17:24.058 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000002","TimeStamp":"2019-05-29T12:17:24.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 14:17:24.058 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 14:17:24.059 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 14:17:24.059 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 14:17:24.059 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 14:17:24.070 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****U3cQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN45QOBD7FV:00000002","TimeStamp":"2019-05-29T12:17:24.0000000Z","ProcessId":22828,"LocalIpAddress":"127.0.0.1:23143","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 14:17:24.070 +02:00 [DBG] Token request success.
2019-05-29 15:09:16.239 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-29 15:09:16.277 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 15:09:16.277 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 15:09:16.277 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 15:09:16.277 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 15:09:16.277 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 15:09:16.277 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 15:09:16.378 +02:00 [DBG] Starting grant removal
2019-05-29 15:09:16.691 +02:00 [DBG] Login Url: /Account/Login
2019-05-29 15:09:16.693 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 15:09:16.693 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-29 15:09:16.693 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-29 15:09:16.693 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 15:09:16.693 +02:00 [DBG] Error Url: /home/error
2019-05-29 15:09:16.693 +02:00 [DBG] Error Id Parameter: errorId
2019-05-29 15:09:19.143 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:09:19.162 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:09:19.162 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:09:19.168 +02:00 [DBG] Start token request.
2019-05-29 15:09:19.174 +02:00 [DBG] Start client validation
2019-05-29 15:09:19.179 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:09:19.182 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:09:19.196 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:09:19.196 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:09:19.681 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:09:19.689 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:09:19.696 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:09:19.696 +02:00 [DBG] Client validation success
2019-05-29 15:09:19.711 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46RD8O26R:00000002","TimeStamp":"2019-05-29T13:09:19.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:09:19.721 +02:00 [DBG] Start token request validation
2019-05-29 15:09:19.730 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:09:19.767 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:09:19.906 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:09:19.917 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:09:19.942 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:09:19.989 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:09:19.990 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46RD8O26R:00000002","TimeStamp":"2019-05-29T13:09:19.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:09:19.997 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46RD8O26R:00000002","TimeStamp":"2019-05-29T13:09:19.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:09:19.997 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:09:20.007 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:09:20.026 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:09:20.026 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 15:09:20.164 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****JxcQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN46RD8O26R:00000002","TimeStamp":"2019-05-29T13:09:20.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:09:20.165 +02:00 [DBG] Token request success.
2019-05-29 15:10:31.990 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:10:31.991 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:10:31.991 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:10:31.991 +02:00 [DBG] Start token request.
2019-05-29 15:10:31.992 +02:00 [DBG] Start client validation
2019-05-29 15:10:31.992 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:10:31.992 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:10:31.999 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:10:32.001 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:10:32.024 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:10:32.024 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:10:32.024 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:10:32.024 +02:00 [DBG] Client validation success
2019-05-29 15:10:32.024 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46RD8O26S:00000001","TimeStamp":"2019-05-29T13:10:32.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:10:32.024 +02:00 [DBG] Start token request validation
2019-05-29 15:10:32.024 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:10:32.026 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:10:32.055 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:10:32.056 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:10:32.059 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:10:32.069 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:10:32.069 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46RD8O26S:00000001","TimeStamp":"2019-05-29T13:10:32.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:10:32.069 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46RD8O26S:00000001","TimeStamp":"2019-05-29T13:10:32.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:10:32.069 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:10:32.069 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:10:32.069 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:10:32.069 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 15:10:32.077 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****SDTQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN46RD8O26S:00000001","TimeStamp":"2019-05-29T13:10:32.0000000Z","ProcessId":35420,"LocalIpAddress":"127.0.0.1:45529","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:10:32.077 +02:00 [DBG] Token request success.
2019-05-29 15:10:43.436 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-29 15:10:43.565 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 15:10:43.565 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 15:10:43.565 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 15:10:43.565 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 15:10:43.565 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 15:10:43.565 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 15:10:43.695 +02:00 [DBG] Starting grant removal
2019-05-29 15:10:43.976 +02:00 [DBG] Login Url: /Account/Login
2019-05-29 15:10:43.978 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 15:10:43.978 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-29 15:10:43.978 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-29 15:10:43.978 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 15:10:43.978 +02:00 [DBG] Error Url: /home/error
2019-05-29 15:10:43.979 +02:00 [DBG] Error Id Parameter: errorId
2019-05-29 15:10:47.011 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:10:47.030 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:10:47.030 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:10:47.036 +02:00 [DBG] Start token request.
2019-05-29 15:10:47.041 +02:00 [DBG] Start client validation
2019-05-29 15:10:47.045 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:10:47.048 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:10:47.061 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:10:47.061 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:10:47.845 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:10:47.855 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:10:47.862 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:10:47.862 +02:00 [DBG] Client validation success
2019-05-29 15:10:47.879 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46S796H0Q:00000002","TimeStamp":"2019-05-29T13:10:47.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:10:47.890 +02:00 [DBG] Start token request validation
2019-05-29 15:10:47.898 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:10:47.942 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:10:48.060 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:10:48.072 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:10:48.076 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:10:48.206 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:10:48.206 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46S796H0Q:00000002","TimeStamp":"2019-05-29T13:10:48.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:10:48.213 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46S796H0Q:00000002","TimeStamp":"2019-05-29T13:10:48.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:10:48.213 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:10:48.219 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:10:48.238 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:10:48.238 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 15:10:48.379 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****2Rrw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN46S796H0Q:00000002","TimeStamp":"2019-05-29T13:10:48.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:10:48.380 +02:00 [DBG] Token request success.
2019-05-29 15:11:10.356 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:11:10.357 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:11:10.357 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:11:10.357 +02:00 [DBG] Start token request.
2019-05-29 15:11:10.357 +02:00 [DBG] Start client validation
2019-05-29 15:11:10.357 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:11:10.357 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:11:10.358 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:11:10.358 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:11:10.363 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:11:10.363 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:11:10.363 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:11:10.363 +02:00 [DBG] Client validation success
2019-05-29 15:11:10.364 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46S796H0R:00000002","TimeStamp":"2019-05-29T13:11:10.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:11:10.364 +02:00 [DBG] Start token request validation
2019-05-29 15:11:10.364 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:11:10.365 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:11:10.368 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:11:10.369 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:11:10.372 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:11:10.386 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:11:10.387 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46S796H0R:00000002","TimeStamp":"2019-05-29T13:11:10.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:11:10.387 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46S796H0R:00000002","TimeStamp":"2019-05-29T13:11:10.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:11:10.387 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:11:10.387 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***","AllowOfflineAccess":"true"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:11:10.387 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:11:10.387 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 15:11:10.393 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****GSiA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN46S796H0R:00000002","TimeStamp":"2019-05-29T13:11:10.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:11:10.394 +02:00 [DBG] Token request success.
2019-05-29 15:11:14.652 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:11:14.653 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:11:14.653 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:11:14.653 +02:00 [DBG] Start token request.
2019-05-29 15:11:14.653 +02:00 [DBG] Start client validation
2019-05-29 15:11:14.653 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:11:14.653 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:11:14.654 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:11:14.654 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:11:14.658 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:11:14.658 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:11:14.658 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:11:14.658 +02:00 [DBG] Client validation success
2019-05-29 15:11:14.658 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46S796H0Q:00000003","TimeStamp":"2019-05-29T13:11:14.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:11:14.658 +02:00 [DBG] Start token request validation
2019-05-29 15:11:14.659 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:11:14.659 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:11:14.662 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:11:14.663 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:11:14.666 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:11:14.676 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:11:14.677 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46S796H0Q:00000003","TimeStamp":"2019-05-29T13:11:14.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:11:14.677 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN46S796H0Q:00000003","TimeStamp":"2019-05-29T13:11:14.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:11:14.677 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:11:14.677 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:11:14.677 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:11:14.677 +02:00 [DBG] Getting claims for access token for subject: 59e1ae52-78c3-4857-96f7-e17d16a94ad8
2019-05-29 15:11:14.683 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"59e1ae52-78c3-4857-96f7-e17d16a94ad8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****rxeg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN46S796H0Q:00000003","TimeStamp":"2019-05-29T13:11:14.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:11:14.683 +02:00 [DBG] Token request success.
2019-05-29 15:13:27.705 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:13:27.705 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:13:27.705 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:13:27.705 +02:00 [DBG] Start token request.
2019-05-29 15:13:27.705 +02:00 [DBG] Start client validation
2019-05-29 15:13:27.705 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:13:27.705 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:13:27.706 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:13:27.706 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:13:27.724 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:13:27.724 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:13:27.724 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:13:27.724 +02:00 [DBG] Client validation success
2019-05-29 15:13:27.724 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46S796H0S:00000001","TimeStamp":"2019-05-29T13:13:27.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:13:27.724 +02:00 [DBG] Start token request validation
2019-05-29 15:13:27.729 +02:00 [DBG] Start validation of custom grant token request
2019-05-29 15:13:27.730 +02:00 [ERR] Client does not have the custom grant type in the allowed list, therefore requested grant is not allowed{"clientId":"ro.client"}, details: {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh ","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access ","grant_type":"refresh ","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:13:27.731 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh ","Error":"unsupported_grant_type","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN46S796H0S:00000001","TimeStamp":"2019-05-29T13:13:27.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 15:13:31.054 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:13:31.055 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:13:31.055 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:13:31.055 +02:00 [DBG] Start token request.
2019-05-29 15:13:31.055 +02:00 [DBG] Start client validation
2019-05-29 15:13:31.055 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:13:31.055 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:13:31.055 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:13:31.055 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:13:31.060 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:13:31.060 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:13:31.060 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:13:31.060 +02:00 [DBG] Client validation success
2019-05-29 15:13:31.060 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46S796H0S:00000002","TimeStamp":"2019-05-29T13:13:31.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:13:31.060 +02:00 [DBG] Start token request validation
2019-05-29 15:13:31.060 +02:00 [DBG] Start validation of custom grant token request
2019-05-29 15:13:31.060 +02:00 [ERR] Client does not have the custom grant type in the allowed list, therefore requested grant is not allowed{"clientId":"ro.client"}, details: {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh ","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"refresh ","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:13:31.060 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh ","Error":"unsupported_grant_type","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN46S796H0S:00000002","TimeStamp":"2019-05-29T13:13:31.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 15:13:38.354 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:13:38.354 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:13:38.354 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:13:38.354 +02:00 [DBG] Start token request.
2019-05-29 15:13:38.354 +02:00 [DBG] Start client validation
2019-05-29 15:13:38.354 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:13:38.354 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:13:38.354 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:13:38.354 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:13:38.358 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:13:38.358 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:13:38.358 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:13:38.358 +02:00 [DBG] Client validation success
2019-05-29 15:13:38.358 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN46S796H0S:00000003","TimeStamp":"2019-05-29T13:13:38.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:13:38.358 +02:00 [DBG] Start token request validation
2019-05-29 15:13:38.358 +02:00 [DBG] Start validation of custom grant token request
2019-05-29 15:13:38.358 +02:00 [ERR] Client does not have the custom grant type in the allowed list, therefore requested grant is not allowed{"clientId":"ro.client"}, details: {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"refresh","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:13:38.358 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh","Error":"unsupported_grant_type","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN46S796H0S:00000003","TimeStamp":"2019-05-29T13:13:38.0000000Z","ProcessId":35416,"LocalIpAddress":"127.0.0.1:14940","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 15:25:19.511 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-29 15:25:19.549 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-29 15:25:19.549 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-29 15:25:19.549 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-29 15:25:19.549 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-29 15:25:19.549 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-29 15:25:19.549 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-29 15:25:19.646 +02:00 [DBG] Starting grant removal
2019-05-29 15:25:19.848 +02:00 [DBG] Login Url: /Account/Login
2019-05-29 15:25:19.850 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-29 15:25:19.850 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-29 15:25:19.850 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-29 15:25:19.850 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-29 15:25:19.850 +02:00 [DBG] Error Url: /home/error
2019-05-29 15:25:19.850 +02:00 [DBG] Error Id Parameter: errorId
2019-05-29 15:25:33.405 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:25:33.419 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:25:33.419 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:25:33.425 +02:00 [DBG] Start token request.
2019-05-29 15:25:33.430 +02:00 [DBG] Start client validation
2019-05-29 15:25:33.434 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:25:33.436 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:25:33.449 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:25:33.449 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:25:33.616 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:25:33.624 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:25:33.630 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:25:33.630 +02:00 [DBG] Client validation success
2019-05-29 15:25:33.646 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4D:00000002","TimeStamp":"2019-05-29T13:25:33.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:25:33.656 +02:00 [DBG] Start token request validation
2019-05-29 15:25:33.666 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:25:33.701 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:25:33.848 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:25:33.858 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:25:33.861 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:25:33.894 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:25:33.895 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4D:00000002","TimeStamp":"2019-05-29T13:25:33.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:25:33.900 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4D:00000002","TimeStamp":"2019-05-29T13:25:33.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:25:33.901 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:25:33.907 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:25:33.926 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:25:33.926 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-29 15:25:34.052 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****PIKA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4D:00000002","TimeStamp":"2019-05-29T13:25:34.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:25:34.053 +02:00 [DBG] Token request success.
2019-05-29 15:25:37.144 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:25:37.145 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:25:37.145 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:25:37.145 +02:00 [DBG] Start token request.
2019-05-29 15:25:37.145 +02:00 [DBG] Start client validation
2019-05-29 15:25:37.145 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:25:37.145 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:25:37.146 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:25:37.146 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:25:37.151 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:25:37.151 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:25:37.151 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:25:37.151 +02:00 [DBG] Client validation success
2019-05-29 15:25:37.151 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4C:00000002","TimeStamp":"2019-05-29T13:25:37.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:25:37.151 +02:00 [DBG] Start token request validation
2019-05-29 15:25:37.151 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:25:37.152 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:25:37.155 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:25:37.156 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:25:37.159 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:25:37.169 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:25:37.169 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4C:00000002","TimeStamp":"2019-05-29T13:25:37.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:25:37.169 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4C:00000002","TimeStamp":"2019-05-29T13:25:37.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:25:37.169 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:25:37.169 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***","AllowOfflineAccess":"true"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:25:37.170 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:25:37.170 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-29 15:25:37.177 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****CV2g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4C:00000002","TimeStamp":"2019-05-29T13:25:37.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:25:37.177 +02:00 [DBG] Token request success.
2019-05-29 15:25:41.722 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:25:41.722 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:25:41.723 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:25:41.723 +02:00 [DBG] Start token request.
2019-05-29 15:25:41.723 +02:00 [DBG] Start client validation
2019-05-29 15:25:41.723 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:25:41.723 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:25:41.723 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:25:41.723 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:25:41.727 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:25:41.727 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:25:41.727 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:25:41.727 +02:00 [DBG] Client validation success
2019-05-29 15:25:41.727 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4D:00000003","TimeStamp":"2019-05-29T13:25:41.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:25:41.727 +02:00 [DBG] Start token request validation
2019-05-29 15:25:41.727 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:25:41.728 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:25:41.733 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:25:41.734 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:25:41.736 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-29 15:25:41.747 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:25:41.747 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4D:00000003","TimeStamp":"2019-05-29T13:25:41.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:25:41.747 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4D:00000003","TimeStamp":"2019-05-29T13:25:41.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:25:41.747 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:25:41.747 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:25:41.747 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:25:41.747 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-29 15:25:41.753 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****gmQQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4D:00000003","TimeStamp":"2019-05-29T13:25:41.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:25:41.753 +02:00 [DBG] Token request success.
2019-05-29 15:27:35.005 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-29 15:27:35.006 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-29 15:27:35.006 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-29 15:27:35.009 +02:00 [DBG] Start discovery request
2019-05-29 15:27:35.090 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-05-29 15:28:25.021 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:28:25.022 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:28:25.022 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:28:25.022 +02:00 [DBG] Start token request.
2019-05-29 15:28:25.022 +02:00 [DBG] Start client validation
2019-05-29 15:28:25.022 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:28:25.022 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:28:25.022 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:28:25.022 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:28:25.046 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:28:25.046 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:28:25.046 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:28:25.046 +02:00 [DBG] Client validation success
2019-05-29 15:28:25.046 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4E:00000002","TimeStamp":"2019-05-29T13:28:25.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:28:25.046 +02:00 [DBG] Start token request validation
2019-05-29 15:28:25.046 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 15:28:25.049 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:28:25.051 +02:00 [DBG] Found [] API scopes in database
2019-05-29 15:28:25.052 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:28:25.053 +02:00 [DBG] Found [] API scopes in database
2019-05-29 15:28:25.063 +02:00 [INF] Credentials validated for username: alice
2019-05-29 15:28:25.064 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4E:00000002","TimeStamp":"2019-05-29T13:28:25.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:28:25.064 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4E:00000002","TimeStamp":"2019-05-29T13:28:25.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 15:28:25.064 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 15:28:25.064 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:28:25.064 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 15:28:25.064 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-29 15:28:25.073 +02:00 [DBG] Creating refresh token
2019-05-29 15:28:25.073 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-29 15:28:25.101 +02:00 [DBG] byc+mqSRpit/hG9IdRafr/y2Q/XWq9u4rUwKk4PxvNo= not found in database
2019-05-29 15:28:25.116 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a44e","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ux8w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4E:00000002","TimeStamp":"2019-05-29T13:28:25.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:28:25.117 +02:00 [DBG] Token request success.
2019-05-29 15:34:47.759 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 15:34:47.759 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 15:34:47.759 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 15:34:47.759 +02:00 [DBG] Start token request.
2019-05-29 15:34:47.759 +02:00 [DBG] Start client validation
2019-05-29 15:34:47.759 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 15:34:47.759 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 15:34:47.760 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 15:34:47.760 +02:00 [DBG] Secret id found: ro.client
2019-05-29 15:34:47.976 +02:00 [DBG] ro.client found in database: true
2019-05-29 15:34:47.976 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 15:34:47.976 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 15:34:47.977 +02:00 [DBG] Client validation success
2019-05-29 15:34:47.977 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4F:00000001","TimeStamp":"2019-05-29T13:34:47.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 15:34:47.977 +02:00 [DBG] Start token request validation
2019-05-29 15:34:47.980 +02:00 [DBG] Start validation of refresh token request
2019-05-29 15:34:48.051 +02:00 [DBG] byc+mqSRpit/hG9IdRafr/y2Q/XWq9u4rUwKk4PxvNo= found in database: true
2019-05-29 15:34:48.088 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"4e46e3bb-4755-4220-a562-8b04cae11da8","client_id":"ro.client","scope":"offline_access","auth_time":1559136505,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-29 15:34:48.089 +02:00 [DBG] Validation of refresh token request success
2019-05-29 15:34:48.089 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"c1d73071190becc7437bbf3bbbb2fb6d16f5ff6b7d3243b803ace9bcf5fca44e","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 15:34:48.097 +02:00 [DBG] Updating refresh token
2019-05-29 15:34:48.097 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-05-29 15:34:48.104 +02:00 [DBG] removing byc+mqSRpit/hG9IdRafr/y2Q/XWq9u4rUwKk4PxvNo= persisted grant from database
2019-05-29 15:34:48.118 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-05-29 15:34:48.118 +02:00 [DBG] Current lifetime: 383
2019-05-29 15:34:48.118 +02:00 [DBG] New lifetime: 1296383
2019-05-29 15:34:48.120 +02:00 [DBG] wW8wMggv/kzAMAR9zgrl6/vUf52231yYbLNo9BEjutM= not found in database
2019-05-29 15:34:48.122 +02:00 [DBG] Created refresh token in store
2019-05-29 15:34:48.127 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 15:34:48.130 +02:00 [DBG] Found [] API scopes in database
2019-05-29 15:34:48.130 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****7b44","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fMVQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4F:00000001","TimeStamp":"2019-05-29T13:34:48.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 15:34:48.130 +02:00 [DBG] Token request success.
2019-05-29 16:14:29.038 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 16:14:29.038 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 16:14:29.039 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 16:14:29.039 +02:00 [DBG] Start token request.
2019-05-29 16:14:29.039 +02:00 [DBG] Start client validation
2019-05-29 16:14:29.039 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 16:14:29.039 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 16:14:29.039 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 16:14:29.039 +02:00 [DBG] Secret id found: ro.client
2019-05-29 16:14:29.250 +02:00 [DBG] ro.client found in database: true
2019-05-29 16:14:29.250 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 16:14:29.250 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 16:14:29.250 +02:00 [DBG] Client validation success
2019-05-29 16:14:29.250 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4G:00000001","TimeStamp":"2019-05-29T14:14:29.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 16:14:29.250 +02:00 [DBG] Start token request validation
2019-05-29 16:14:29.250 +02:00 [DBG] Start validation of refresh token request
2019-05-29 16:14:29.258 +02:00 [DBG] byc+mqSRpit/hG9IdRafr/y2Q/XWq9u4rUwKk4PxvNo= found in database: false
2019-05-29 16:14:29.258 +02:00 [DBG] refresh_token grant with value: c1d73071190becc7437bbf3bbbb2fb6d16f5ff6b7d3243b803ace9bcf5fca44e not found in store.
2019-05-29 16:14:29.258 +02:00 [WRN] Invalid refresh token
2019-05-29 16:14:29.258 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 16:14:29.259 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN474CA8P4G:00000001","TimeStamp":"2019-05-29T14:14:29.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 16:14:35.952 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 16:14:35.952 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 16:14:35.952 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 16:14:35.952 +02:00 [DBG] Start token request.
2019-05-29 16:14:35.952 +02:00 [DBG] Start client validation
2019-05-29 16:14:35.952 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 16:14:35.952 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 16:14:35.952 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 16:14:35.953 +02:00 [DBG] Secret id found: ro.client
2019-05-29 16:14:35.956 +02:00 [DBG] ro.client found in database: true
2019-05-29 16:14:35.957 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 16:14:35.957 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 16:14:35.957 +02:00 [DBG] Client validation success
2019-05-29 16:14:35.957 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4G:00000002","TimeStamp":"2019-05-29T14:14:35.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 16:14:35.957 +02:00 [DBG] Start token request validation
2019-05-29 16:14:35.957 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 16:14:35.959 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 16:14:35.961 +02:00 [DBG] Found [] API scopes in database
2019-05-29 16:14:35.962 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 16:14:35.963 +02:00 [DBG] Found [] API scopes in database
2019-05-29 16:14:36.059 +02:00 [INF] Credentials validated for username: alice
2019-05-29 16:14:36.059 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000002","TimeStamp":"2019-05-29T14:14:36.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 16:14:36.059 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000002","TimeStamp":"2019-05-29T14:14:36.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 16:14:36.059 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 16:14:36.059 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 16:14:36.060 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 16:14:36.060 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-29 16:14:36.080 +02:00 [DBG] Creating refresh token
2019-05-29 16:14:36.080 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-29 16:14:36.082 +02:00 [DBG] zUL8DopKiyJyB5rNVCN5St3M+zMgIWoGElaF2Q7FJfk= not found in database
2019-05-29 16:14:36.086 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****af20","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5cNw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000002","TimeStamp":"2019-05-29T14:14:36.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 16:14:36.086 +02:00 [DBG] Token request success.
2019-05-29 16:14:43.608 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 16:14:43.608 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 16:14:43.608 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 16:14:43.608 +02:00 [DBG] Start token request.
2019-05-29 16:14:43.608 +02:00 [DBG] Start client validation
2019-05-29 16:14:43.608 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 16:14:43.608 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 16:14:43.609 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 16:14:43.609 +02:00 [DBG] Secret id found: ro.client
2019-05-29 16:14:43.613 +02:00 [DBG] ro.client found in database: true
2019-05-29 16:14:43.613 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 16:14:43.613 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 16:14:43.613 +02:00 [DBG] Client validation success
2019-05-29 16:14:43.613 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4G:00000003","TimeStamp":"2019-05-29T14:14:43.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 16:14:43.613 +02:00 [DBG] Start token request validation
2019-05-29 16:14:43.613 +02:00 [DBG] Start validation of refresh token request
2019-05-29 16:14:43.614 +02:00 [DBG] zUL8DopKiyJyB5rNVCN5St3M+zMgIWoGElaF2Q7FJfk= found in database: true
2019-05-29 16:14:43.619 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"4e46e3bb-4755-4220-a562-8b04cae11da8","client_id":"ro.client","scope":"offline_access","auth_time":1559139276,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-29 16:14:43.619 +02:00 [DBG] Validation of refresh token request success
2019-05-29 16:14:43.619 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"6a3c815e477d1ece34581f2c0e0f6553e02fbded4d02a8f0d645ce50e26caf20","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 16:14:43.622 +02:00 [DBG] Updating refresh token
2019-05-29 16:14:43.622 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-05-29 16:14:43.623 +02:00 [DBG] removing zUL8DopKiyJyB5rNVCN5St3M+zMgIWoGElaF2Q7FJfk= persisted grant from database
2019-05-29 16:14:43.646 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-05-29 16:14:43.646 +02:00 [DBG] Current lifetime: 7
2019-05-29 16:14:43.646 +02:00 [DBG] New lifetime: 1296007
2019-05-29 16:14:43.647 +02:00 [DBG] WiLv2uq51se/GyE2xssC9/MBjfbBL3QnnWQf1BGyJHE= not found in database
2019-05-29 16:14:43.688 +02:00 [DBG] Created refresh token in store
2019-05-29 16:14:43.691 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 16:14:43.718 +02:00 [DBG] Found [] API scopes in database
2019-05-29 16:14:43.718 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****1dd4","$type":"Token"},{"TokenType":"access_token","TokenValue":"****AMUg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000003","TimeStamp":"2019-05-29T14:14:43.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 16:14:43.718 +02:00 [DBG] Token request success.
2019-05-29 16:14:46.706 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 16:14:46.706 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 16:14:46.706 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 16:14:46.706 +02:00 [DBG] Start token request.
2019-05-29 16:14:46.706 +02:00 [DBG] Start client validation
2019-05-29 16:14:46.706 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 16:14:46.706 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 16:14:46.707 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 16:14:46.707 +02:00 [DBG] Secret id found: ro.client
2019-05-29 16:14:46.711 +02:00 [DBG] ro.client found in database: true
2019-05-29 16:14:46.711 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 16:14:46.711 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 16:14:46.711 +02:00 [DBG] Client validation success
2019-05-29 16:14:46.711 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4G:00000004","TimeStamp":"2019-05-29T14:14:46.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 16:14:46.711 +02:00 [DBG] Start token request validation
2019-05-29 16:14:46.711 +02:00 [DBG] Start validation of refresh token request
2019-05-29 16:14:46.712 +02:00 [DBG] zUL8DopKiyJyB5rNVCN5St3M+zMgIWoGElaF2Q7FJfk= found in database: false
2019-05-29 16:14:46.712 +02:00 [DBG] refresh_token grant with value: 6a3c815e477d1ece34581f2c0e0f6553e02fbded4d02a8f0d645ce50e26caf20 not found in store.
2019-05-29 16:14:46.712 +02:00 [WRN] Invalid refresh token
2019-05-29 16:14:46.712 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 16:14:46.712 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN474CA8P4G:00000004","TimeStamp":"2019-05-29T14:14:46.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-29 16:14:55.100 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 16:14:55.100 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 16:14:55.100 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 16:14:55.100 +02:00 [DBG] Start token request.
2019-05-29 16:14:55.100 +02:00 [DBG] Start client validation
2019-05-29 16:14:55.100 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 16:14:55.100 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 16:14:55.101 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 16:14:55.101 +02:00 [DBG] Secret id found: ro.client
2019-05-29 16:14:55.107 +02:00 [DBG] ro.client found in database: true
2019-05-29 16:14:55.107 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 16:14:55.107 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 16:14:55.107 +02:00 [DBG] Client validation success
2019-05-29 16:14:55.107 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4G:00000005","TimeStamp":"2019-05-29T14:14:55.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 16:14:55.107 +02:00 [DBG] Start token request validation
2019-05-29 16:14:55.107 +02:00 [DBG] Start resource owner password token request validation
2019-05-29 16:14:55.108 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 16:14:55.109 +02:00 [DBG] Found [] API scopes in database
2019-05-29 16:14:55.110 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 16:14:55.112 +02:00 [DBG] Found [] API scopes in database
2019-05-29 16:14:55.122 +02:00 [INF] Credentials validated for username: alice
2019-05-29 16:14:55.122 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000005","TimeStamp":"2019-05-29T14:14:55.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 16:14:55.123 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000005","TimeStamp":"2019-05-29T14:14:55.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-29 16:14:55.123 +02:00 [DBG] Resource owner password token request validation success.
2019-05-29 16:14:55.123 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 16:14:55.123 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-29 16:14:55.123 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-29 16:14:55.132 +02:00 [DBG] Creating refresh token
2019-05-29 16:14:55.132 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-29 16:14:55.133 +02:00 [DBG] hQNNGajLfPGLwggb8ksBgHxyv2+3Qe6eojbUxj7tPzQ= not found in database
2019-05-29 16:14:55.148 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****f3e9","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0zKQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000005","TimeStamp":"2019-05-29T14:14:55.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 16:14:55.148 +02:00 [DBG] Token request success.
2019-05-29 16:15:04.232 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 16:15:04.233 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 16:15:04.233 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 16:15:04.233 +02:00 [DBG] Start token request.
2019-05-29 16:15:04.233 +02:00 [DBG] Start client validation
2019-05-29 16:15:04.233 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 16:15:04.233 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 16:15:04.234 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 16:15:04.234 +02:00 [DBG] Secret id found: ro.client
2019-05-29 16:15:04.258 +02:00 [DBG] ro.client found in database: true
2019-05-29 16:15:04.258 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 16:15:04.259 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 16:15:04.259 +02:00 [DBG] Client validation success
2019-05-29 16:15:04.259 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4G:00000006","TimeStamp":"2019-05-29T14:15:04.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 16:15:04.259 +02:00 [DBG] Start token request validation
2019-05-29 16:15:04.259 +02:00 [DBG] Start validation of refresh token request
2019-05-29 16:15:04.261 +02:00 [DBG] hQNNGajLfPGLwggb8ksBgHxyv2+3Qe6eojbUxj7tPzQ= found in database: true
2019-05-29 16:15:04.266 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"4e46e3bb-4755-4220-a562-8b04cae11da8","client_id":"ro.client","scope":"offline_access","auth_time":1559139295,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-29 16:15:04.266 +02:00 [DBG] Validation of refresh token request success
2019-05-29 16:15:04.266 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"5af8d4bee93a1287a8b3011895db41c6391e71b2f64a63349e10a3e02728f3e9","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 16:15:04.269 +02:00 [DBG] Updating refresh token
2019-05-29 16:15:04.269 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-05-29 16:15:04.270 +02:00 [DBG] removing hQNNGajLfPGLwggb8ksBgHxyv2+3Qe6eojbUxj7tPzQ= persisted grant from database
2019-05-29 16:15:04.301 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-05-29 16:15:04.301 +02:00 [DBG] Current lifetime: 9
2019-05-29 16:15:04.301 +02:00 [DBG] New lifetime: 1296009
2019-05-29 16:15:04.303 +02:00 [DBG] VeM0rN0aUNooCrVZ4a82JhbHOU9r1yk9E1R8l9lgu04= not found in database
2019-05-29 16:15:04.305 +02:00 [DBG] Created refresh token in store
2019-05-29 16:15:04.308 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 16:15:04.312 +02:00 [DBG] Found [] API scopes in database
2019-05-29 16:15:04.312 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****ea2e","$type":"Token"},{"TokenType":"access_token","TokenValue":"****yJXg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000006","TimeStamp":"2019-05-29T14:15:04.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 16:15:04.313 +02:00 [DBG] Token request success.
2019-05-29 16:15:16.733 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-29 16:15:16.734 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-29 16:15:16.734 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-29 16:15:16.734 +02:00 [DBG] Start token request.
2019-05-29 16:15:16.734 +02:00 [DBG] Start client validation
2019-05-29 16:15:16.734 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-29 16:15:16.734 +02:00 [DBG] Start parsing for secret in post body
2019-05-29 16:15:16.734 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-29 16:15:16.734 +02:00 [DBG] Secret id found: ro.client
2019-05-29 16:15:16.757 +02:00 [DBG] ro.client found in database: true
2019-05-29 16:15:16.757 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-29 16:15:16.757 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-29 16:15:16.757 +02:00 [DBG] Client validation success
2019-05-29 16:15:16.757 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN474CA8P4G:00000007","TimeStamp":"2019-05-29T14:15:16.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-29 16:15:16.757 +02:00 [DBG] Start token request validation
2019-05-29 16:15:16.757 +02:00 [DBG] Start validation of refresh token request
2019-05-29 16:15:16.759 +02:00 [DBG] VeM0rN0aUNooCrVZ4a82JhbHOU9r1yk9E1R8l9lgu04= found in database: true
2019-05-29 16:15:16.763 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"4e46e3bb-4755-4220-a562-8b04cae11da8","client_id":"ro.client","scope":"offline_access","auth_time":1559139295,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-29 16:15:16.763 +02:00 [DBG] Validation of refresh token request success
2019-05-29 16:15:16.763 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"9490a1bc691257fb688fa2dcc04ba39607f1341ede8fe6b1f5a4f51c7d7eea2e","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-29 16:15:16.766 +02:00 [DBG] Updating refresh token
2019-05-29 16:15:16.766 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-05-29 16:15:16.767 +02:00 [DBG] removing VeM0rN0aUNooCrVZ4a82JhbHOU9r1yk9E1R8l9lgu04= persisted grant from database
2019-05-29 16:15:16.775 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-05-29 16:15:16.775 +02:00 [DBG] Current lifetime: 21
2019-05-29 16:15:16.775 +02:00 [DBG] New lifetime: 1296021
2019-05-29 16:15:16.777 +02:00 [DBG] QVHciTNv7dGM7PQ0Dz4km1j3LHEdIl4aC3pWsE5L7wU= not found in database
2019-05-29 16:15:16.806 +02:00 [DBG] Created refresh token in store
2019-05-29 16:15:16.811 +02:00 [DBG] Found [] identity scopes in database
2019-05-29 16:15:16.819 +02:00 [DBG] Found [] API scopes in database
2019-05-29 16:15:16.819 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****728f","$type":"Token"},{"TokenType":"access_token","TokenValue":"****PGwQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN474CA8P4G:00000007","TimeStamp":"2019-05-29T14:15:16.0000000Z","ProcessId":21272,"LocalIpAddress":"127.0.0.1:16144","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-29 16:15:16.819 +02:00 [DBG] Token request success.
2019-05-29 16:25:19.896 +02:00 [DBG] Removing 0 grants
2019-05-29 17:25:20.164 +02:00 [DBG] Removing 0 grants
2019-05-29 18:25:20.464 +02:00 [DBG] Removing 0 grants
2019-05-29 19:25:20.662 +02:00 [DBG] Removing 0 grants
2019-05-29 20:25:20.895 +02:00 [DBG] Removing 0 grants
2019-05-29 21:25:21.152 +02:00 [DBG] Removing 0 grants
2019-05-29 22:25:21.385 +02:00 [DBG] Removing 0 grants
2019-05-29 23:25:21.588 +02:00 [DBG] Removing 0 grants
2019-05-30 00:25:21.973 +02:00 [DBG] Removing 0 grants
2019-05-30 01:25:22.157 +02:00 [DBG] Removing 0 grants
2019-05-30 02:25:22.364 +02:00 [DBG] Removing 0 grants
2019-05-30 03:25:22.567 +02:00 [DBG] Removing 0 grants
2019-05-30 04:25:22.806 +02:00 [DBG] Removing 0 grants
2019-05-30 05:25:23.072 +02:00 [DBG] Removing 0 grants
2019-05-30 06:25:23.311 +02:00 [DBG] Removing 0 grants
2019-05-30 07:25:23.649 +02:00 [DBG] Removing 0 grants
2019-05-30 08:25:24.339 +02:00 [DBG] Removing 0 grants
2019-05-30 09:25:24.525 +02:00 [DBG] Removing 0 grants
2019-05-30 10:25:24.732 +02:00 [DBG] Removing 0 grants
2019-05-30 10:41:19.505 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-30 10:41:19.623 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 10:41:19.623 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 10:41:19.623 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 10:41:19.624 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 10:41:19.624 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 10:41:19.624 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 10:41:19.751 +02:00 [DBG] Starting grant removal
2019-05-30 10:41:20.004 +02:00 [DBG] Login Url: /Account/Login
2019-05-30 10:41:20.005 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 10:41:20.005 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-30 10:41:20.005 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-30 10:41:20.005 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 10:41:20.005 +02:00 [DBG] Error Url: /home/error
2019-05-30 10:41:20.005 +02:00 [DBG] Error Id Parameter: errorId
2019-05-30 10:41:20.030 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:41:20.061 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:41:20.061 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:41:20.068 +02:00 [DBG] Start token request.
2019-05-30 10:41:20.077 +02:00 [DBG] Start client validation
2019-05-30 10:41:20.082 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:41:20.085 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 10:41:20.097 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:41:20.097 +02:00 [DBG] Secret id found: ro.client
2019-05-30 10:41:21.315 +02:00 [DBG] ro.client found in database: true
2019-05-30 10:41:21.324 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:41:21.332 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:41:21.332 +02:00 [DBG] Client validation success
2019-05-30 10:41:21.351 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4RAB7RQ1A:00000001","TimeStamp":"2019-05-30T08:41:21.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:41:21.362 +02:00 [DBG] Start token request validation
2019-05-30 10:41:21.376 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 10:41:21.428 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 10:41:21.506 +02:00 [DBG] Found [] API scopes in database
2019-05-30 10:41:21.515 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 10:41:21.516 +02:00 [DBG] Found [] API scopes in database
2019-05-30 10:41:21.658 +02:00 [INF] Credentials validated for username: alice
2019-05-30 10:41:21.659 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4RAB7RQ1A:00000001","TimeStamp":"2019-05-30T08:41:21.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:41:21.666 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4RAB7RQ1A:00000001","TimeStamp":"2019-05-30T08:41:21.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:41:21.666 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 10:41:21.672 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:41:21.693 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 10:41:21.693 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-30 10:41:21.838 +02:00 [DBG] Creating refresh token
2019-05-30 10:41:21.838 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 10:41:21.890 +02:00 [DBG] ixPZDUX2+d+J6CL8+WEXPj3UNh7KYhT71a7ehFKs9AE= not found in database
2019-05-30 10:41:21.934 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****61c1","$type":"Token"},{"TokenType":"access_token","TokenValue":"****T5kw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4RAB7RQ1A:00000001","TimeStamp":"2019-05-30T08:41:21.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:41:21.935 +02:00 [DBG] Token request success.
2019-05-30 10:41:31.819 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:41:31.820 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:41:31.820 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:41:31.820 +02:00 [DBG] Start token request.
2019-05-30 10:41:31.820 +02:00 [DBG] Start client validation
2019-05-30 10:41:31.821 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:41:31.821 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 10:41:31.821 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:41:31.821 +02:00 [DBG] Secret id found: ro.client
2019-05-30 10:41:31.849 +02:00 [DBG] ro.client found in database: true
2019-05-30 10:41:31.849 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:41:31.849 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:41:31.849 +02:00 [DBG] Client validation success
2019-05-30 10:41:31.849 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4RAB7RQ19:00000003","TimeStamp":"2019-05-30T08:41:31.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:41:31.850 +02:00 [DBG] Start token request validation
2019-05-30 10:41:31.854 +02:00 [DBG] Start validation of refresh token request
2019-05-30 10:41:31.875 +02:00 [DBG] ixPZDUX2+d+J6CL8+WEXPj3UNh7KYhT71a7ehFKs9AE= found in database: true
2019-05-30 10:41:31.902 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"4e46e3bb-4755-4220-a562-8b04cae11da8","client_id":"ro.client","scope":"offline_access","auth_time":1559205681,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-30 10:41:31.904 +02:00 [DBG] Validation of refresh token request success
2019-05-30 10:41:31.904 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"4b4f2863ff4d1976e7884b8e03cc0e868fc170586242e4f216aacb6e3b3061c1","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:41:31.918 +02:00 [DBG] Updating refresh token
2019-05-30 10:41:31.918 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-05-30 10:41:31.926 +02:00 [DBG] removing ixPZDUX2+d+J6CL8+WEXPj3UNh7KYhT71a7ehFKs9AE= persisted grant from database
2019-05-30 10:41:31.933 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-05-30 10:41:31.933 +02:00 [DBG] Current lifetime: 10
2019-05-30 10:41:31.933 +02:00 [DBG] New lifetime: 1296010
2019-05-30 10:41:31.935 +02:00 [DBG] j4PbafeLf4fomSM/XVBT4juv7c2Dvsxj0wIWqe1v9+o= not found in database
2019-05-30 10:41:32.002 +02:00 [DBG] Created refresh token in store
2019-05-30 10:41:32.011 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 10:41:32.016 +02:00 [DBG] Found [] API scopes in database
2019-05-30 10:41:32.016 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****ef97","$type":"Token"},{"TokenType":"access_token","TokenValue":"****orgw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4RAB7RQ19:00000003","TimeStamp":"2019-05-30T08:41:32.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:41:32.016 +02:00 [DBG] Token request success.
2019-05-30 10:41:36.102 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:41:36.102 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:41:36.103 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:41:36.103 +02:00 [DBG] Start token request.
2019-05-30 10:41:36.103 +02:00 [DBG] Start client validation
2019-05-30 10:41:36.103 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:41:36.103 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 10:41:36.103 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:41:36.103 +02:00 [DBG] Secret id found: ro.client
2019-05-30 10:41:36.107 +02:00 [DBG] ro.client found in database: true
2019-05-30 10:41:36.107 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:41:36.107 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:41:36.107 +02:00 [DBG] Client validation success
2019-05-30 10:41:36.107 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4RAB7RQ1F:00000002","TimeStamp":"2019-05-30T08:41:36.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:41:36.107 +02:00 [DBG] Start token request validation
2019-05-30 10:41:36.108 +02:00 [DBG] Start validation of refresh token request
2019-05-30 10:41:36.109 +02:00 [DBG] ixPZDUX2+d+J6CL8+WEXPj3UNh7KYhT71a7ehFKs9AE= found in database: false
2019-05-30 10:41:36.109 +02:00 [DBG] refresh_token grant with value: 4b4f2863ff4d1976e7884b8e03cc0e868fc170586242e4f216aacb6e3b3061c1 not found in store.
2019-05-30 10:41:36.109 +02:00 [WRN] Invalid refresh token
2019-05-30 10:41:36.109 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:41:36.110 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN4RAB7RQ1F:00000002","TimeStamp":"2019-05-30T08:41:36.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-05-30 10:41:38.521 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:41:38.522 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:41:38.522 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:41:38.522 +02:00 [DBG] Start token request.
2019-05-30 10:41:38.522 +02:00 [DBG] Start client validation
2019-05-30 10:41:38.522 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:41:38.522 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 10:41:38.522 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:41:38.522 +02:00 [DBG] Secret id found: ro.client
2019-05-30 10:41:38.526 +02:00 [DBG] ro.client found in database: true
2019-05-30 10:41:38.527 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:41:38.527 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:41:38.527 +02:00 [DBG] Client validation success
2019-05-30 10:41:38.527 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4RAB7RQ1B:00000003","TimeStamp":"2019-05-30T08:41:38.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:41:38.527 +02:00 [DBG] Start token request validation
2019-05-30 10:41:38.527 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 10:41:38.528 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 10:41:38.530 +02:00 [DBG] Found [] API scopes in database
2019-05-30 10:41:38.531 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 10:41:38.532 +02:00 [DBG] Found [] API scopes in database
2019-05-30 10:41:38.544 +02:00 [INF] Credentials validated for username: alice
2019-05-30 10:41:38.544 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4RAB7RQ1B:00000003","TimeStamp":"2019-05-30T08:41:38.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:41:38.544 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4RAB7RQ1B:00000003","TimeStamp":"2019-05-30T08:41:38.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 10:41:38.544 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 10:41:38.544 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:41:38.544 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 10:41:38.544 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-30 10:41:38.555 +02:00 [DBG] Creating refresh token
2019-05-30 10:41:38.555 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 10:41:38.556 +02:00 [DBG] S3QRdl9aRNoTzFDYkGm6YEhrB0M+6l50srPbrU2DKFI= not found in database
2019-05-30 10:41:38.573 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****508c","$type":"Token"},{"TokenType":"access_token","TokenValue":"****C1lQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4RAB7RQ1B:00000003","TimeStamp":"2019-05-30T08:41:38.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:41:38.573 +02:00 [DBG] Token request success.
2019-05-30 10:41:47.297 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 10:41:47.298 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 10:41:47.298 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 10:41:47.298 +02:00 [DBG] Start token request.
2019-05-30 10:41:47.299 +02:00 [DBG] Start client validation
2019-05-30 10:41:47.299 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 10:41:47.299 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 10:41:47.299 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 10:41:47.299 +02:00 [DBG] Secret id found: ro.client
2019-05-30 10:41:47.303 +02:00 [DBG] ro.client found in database: true
2019-05-30 10:41:47.303 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 10:41:47.303 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 10:41:47.303 +02:00 [DBG] Client validation success
2019-05-30 10:41:47.303 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4RAB7RQ1D:00000002","TimeStamp":"2019-05-30T08:41:47.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 10:41:47.303 +02:00 [DBG] Start token request validation
2019-05-30 10:41:47.303 +02:00 [DBG] Start validation of refresh token request
2019-05-30 10:41:47.304 +02:00 [DBG] S3QRdl9aRNoTzFDYkGm6YEhrB0M+6l50srPbrU2DKFI= found in database: true
2019-05-30 10:41:47.308 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"4e46e3bb-4755-4220-a562-8b04cae11da8","client_id":"ro.client","scope":"offline_access","auth_time":1559205698,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-05-30 10:41:47.308 +02:00 [DBG] Validation of refresh token request success
2019-05-30 10:41:47.308 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"17c97192d17a4c36d1b7342e2179d60481e5cdb9791d74bca72c387f095d508c","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 10:41:47.311 +02:00 [DBG] Updating refresh token
2019-05-30 10:41:47.312 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-05-30 10:41:47.312 +02:00 [DBG] removing S3QRdl9aRNoTzFDYkGm6YEhrB0M+6l50srPbrU2DKFI= persisted grant from database
2019-05-30 10:41:47.314 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-05-30 10:41:47.314 +02:00 [DBG] Current lifetime: 9
2019-05-30 10:41:47.314 +02:00 [DBG] New lifetime: 1296009
2019-05-30 10:41:47.315 +02:00 [DBG] ouHt8NojXytwIjkjgFO8rySoE/U3eSdN31Gw4NkTMfw= not found in database
2019-05-30 10:41:47.342 +02:00 [DBG] Created refresh token in store
2019-05-30 10:41:47.343 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 10:41:47.345 +02:00 [DBG] Found [] API scopes in database
2019-05-30 10:41:47.345 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****cf70","$type":"Token"},{"TokenType":"access_token","TokenValue":"****u22w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4RAB7RQ1D:00000002","TimeStamp":"2019-05-30T08:41:47.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 10:41:47.345 +02:00 [DBG] Token request success.
2019-05-30 11:41:20.046 +02:00 [DBG] Removing 0 grants
2019-05-30 12:08:22.938 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 12:08:22.940 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 12:08:22.940 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 12:08:22.940 +02:00 [DBG] Start token request.
2019-05-30 12:08:22.940 +02:00 [DBG] Start client validation
2019-05-30 12:08:22.940 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 12:08:22.940 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 12:08:22.941 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 12:08:22.941 +02:00 [DBG] Secret id found: ro.client
2019-05-30 12:08:23.032 +02:00 [DBG] ro.client found in database: true
2019-05-30 12:08:23.032 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 12:08:23.032 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 12:08:23.032 +02:00 [DBG] Client validation success
2019-05-30 12:08:23.033 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4RAB7RQ1G:00000001","TimeStamp":"2019-05-30T10:08:23.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 12:08:23.033 +02:00 [DBG] Start token request validation
2019-05-30 12:08:23.033 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 12:08:23.037 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 12:08:23.043 +02:00 [DBG] Found [] API scopes in database
2019-05-30 12:08:23.044 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 12:08:23.047 +02:00 [DBG] Found [] API scopes in database
2019-05-30 12:08:23.074 +02:00 [INF] Credentials validated for username: alice
2019-05-30 12:08:23.074 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4RAB7RQ1G:00000001","TimeStamp":"2019-05-30T10:08:23.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 12:08:23.075 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4RAB7RQ1G:00000001","TimeStamp":"2019-05-30T10:08:23.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 12:08:23.075 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 12:08:23.075 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 12:08:23.075 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 12:08:23.075 +02:00 [DBG] Getting claims for access token for subject: 4e46e3bb-4755-4220-a562-8b04cae11da8
2019-05-30 12:08:23.089 +02:00 [DBG] Creating refresh token
2019-05-30 12:08:23.089 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 12:08:23.092 +02:00 [DBG] FFBrah4NdtrTiu0G1tcNTBMy3tkF+JPILKjpl9+hRU8= not found in database
2019-05-30 12:08:23.098 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4e46e3bb-4755-4220-a562-8b04cae11da8","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****473a","$type":"Token"},{"TokenType":"access_token","TokenValue":"****li8Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4RAB7RQ1G:00000001","TimeStamp":"2019-05-30T10:08:23.0000000Z","ProcessId":32568,"LocalIpAddress":"127.0.0.1:11146","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 12:08:23.098 +02:00 [DBG] Token request success.
2019-05-30 13:06:19.756 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-30 13:06:20.831 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 13:06:20.831 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 13:06:20.831 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 13:06:20.831 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 13:06:20.831 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 13:06:20.831 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 13:06:21.676 +02:00 [DBG] Starting grant removal
2019-05-30 13:06:22.531 +02:00 [DBG] Login Url: /Account/Login
2019-05-30 13:06:22.533 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 13:06:22.533 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-30 13:06:22.533 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-30 13:06:22.533 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 13:06:22.533 +02:00 [DBG] Error Url: /home/error
2019-05-30 13:06:22.533 +02:00 [DBG] Error Id Parameter: errorId
2019-05-30 13:17:45.558 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-30 13:17:45.669 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 13:17:45.669 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 13:17:45.669 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 13:17:45.669 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 13:17:45.669 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 13:17:45.669 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 13:17:45.757 +02:00 [DBG] Starting grant removal
2019-05-30 13:17:46.013 +02:00 [DBG] Login Url: /Account/Login
2019-05-30 13:17:46.015 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 13:17:46.015 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-30 13:17:46.015 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-30 13:17:46.015 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 13:17:46.015 +02:00 [DBG] Error Url: /home/error
2019-05-30 13:17:46.015 +02:00 [DBG] Error Id Parameter: errorId
2019-05-30 13:18:03.875 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 13:18:03.935 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 13:18:03.935 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 13:18:03.941 +02:00 [DBG] Start token request.
2019-05-30 13:18:03.945 +02:00 [DBG] Start client validation
2019-05-30 13:18:03.951 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 13:18:03.955 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 13:18:04.045 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 13:18:04.045 +02:00 [DBG] Secret id found: client
2019-05-30 13:18:04.886 +02:00 [DBG] client found in database: true
2019-05-30 13:18:04.903 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 13:18:04.910 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 13:18:04.910 +02:00 [DBG] Client validation success
2019-05-30 13:18:04.930 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUN:00000002","TimeStamp":"2019-05-30T11:18:04.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 13:18:04.988 +02:00 [DBG] Start token request validation
2019-05-30 13:18:04.993 +02:00 [DBG] Start client credentials token request validation
2019-05-30 13:18:05.029 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 13:18:05.176 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 13:18:05.186 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 13:18:05.189 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 13:18:05.191 +02:00 [DBG] client credentials token request validation success
2019-05-30 13:18:05.198 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 13:18:05.219 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 13:18:05.364 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****YFqw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUN:00000002","TimeStamp":"2019-05-30T11:18:05.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:18:05.365 +02:00 [DBG] Token request success.
2019-05-30 13:35:52.473 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 13:35:52.476 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 13:35:52.476 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 13:35:52.476 +02:00 [DBG] Start token request.
2019-05-30 13:35:52.476 +02:00 [DBG] Start client validation
2019-05-30 13:35:52.476 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 13:35:52.476 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 13:35:52.477 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 13:35:52.477 +02:00 [DBG] Secret id found: client
2019-05-30 13:35:52.506 +02:00 [DBG] client found in database: true
2019-05-30 13:35:52.506 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 13:35:52.506 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 13:35:52.506 +02:00 [DBG] Client validation success
2019-05-30 13:35:52.507 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUO:00000001","TimeStamp":"2019-05-30T11:35:52.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 13:35:52.507 +02:00 [DBG] Start token request validation
2019-05-30 13:35:52.507 +02:00 [DBG] Start client credentials token request validation
2019-05-30 13:35:52.509 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 13:35:52.541 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 13:35:52.542 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 13:35:52.544 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 13:35:52.545 +02:00 [DBG] client credentials token request validation success
2019-05-30 13:35:52.545 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 13:35:52.545 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 13:35:52.548 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****xVGw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUO:00000001","TimeStamp":"2019-05-30T11:35:52.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:35:52.549 +02:00 [DBG] Token request success.
2019-05-30 13:35:53.270 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 13:35:53.270 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 13:35:53.271 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 13:35:53.271 +02:00 [DBG] Start token request.
2019-05-30 13:35:53.271 +02:00 [DBG] Start client validation
2019-05-30 13:35:53.271 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 13:35:53.271 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 13:35:53.271 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 13:35:53.271 +02:00 [DBG] Secret id found: client
2019-05-30 13:35:53.275 +02:00 [DBG] client found in database: true
2019-05-30 13:35:53.275 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 13:35:53.275 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 13:35:53.275 +02:00 [DBG] Client validation success
2019-05-30 13:35:53.275 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUO:00000002","TimeStamp":"2019-05-30T11:35:53.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 13:35:53.275 +02:00 [DBG] Start token request validation
2019-05-30 13:35:53.275 +02:00 [DBG] Start client credentials token request validation
2019-05-30 13:35:53.276 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 13:35:53.280 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 13:35:53.281 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 13:35:53.283 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 13:35:53.284 +02:00 [DBG] client credentials token request validation success
2019-05-30 13:35:53.284 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 13:35:53.284 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 13:35:53.287 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****J0Iw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUO:00000002","TimeStamp":"2019-05-30T11:35:53.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 13:35:53.287 +02:00 [DBG] Token request success.
2019-05-30 14:17:45.838 +02:00 [DBG] Removing 0 grants
2019-05-30 15:01:26.225 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:26.225 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:26.225 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:26.225 +02:00 [DBG] Start token request.
2019-05-30 15:01:26.225 +02:00 [DBG] Start client validation
2019-05-30 15:01:26.225 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:26.225 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:26.225 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:26.225 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:26.249 +02:00 [DBG] client found in database: true
2019-05-30 15:01:26.249 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:26.249 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:26.249 +02:00 [DBG] Client validation success
2019-05-30 15:01:26.250 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000001","TimeStamp":"2019-05-30T13:01:26.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:26.250 +02:00 [DBG] Start token request validation
2019-05-30 15:01:26.250 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:26.252 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:26.278 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:26.278 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:26.281 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:26.281 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:26.282 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:26.282 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:26.284 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****muPQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000001","TimeStamp":"2019-05-30T13:01:26.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:26.285 +02:00 [DBG] Token request success.
2019-05-30 15:01:27.069 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:27.069 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:27.069 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:27.069 +02:00 [DBG] Start token request.
2019-05-30 15:01:27.069 +02:00 [DBG] Start client validation
2019-05-30 15:01:27.069 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:27.070 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:27.070 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:27.070 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:27.074 +02:00 [DBG] client found in database: true
2019-05-30 15:01:27.074 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:27.074 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:27.074 +02:00 [DBG] Client validation success
2019-05-30 15:01:27.074 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000002","TimeStamp":"2019-05-30T13:01:27.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:27.074 +02:00 [DBG] Start token request validation
2019-05-30 15:01:27.074 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:27.075 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:27.077 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:27.078 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:27.080 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:27.080 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:27.080 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:27.081 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:27.083 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****2usA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000002","TimeStamp":"2019-05-30T13:01:27.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:27.083 +02:00 [DBG] Token request success.
2019-05-30 15:01:27.731 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:27.731 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:27.731 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:27.732 +02:00 [DBG] Start token request.
2019-05-30 15:01:27.732 +02:00 [DBG] Start client validation
2019-05-30 15:01:27.732 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:27.732 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:27.733 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:27.733 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:27.738 +02:00 [DBG] client found in database: true
2019-05-30 15:01:27.738 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:27.738 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:27.738 +02:00 [DBG] Client validation success
2019-05-30 15:01:27.738 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000003","TimeStamp":"2019-05-30T13:01:27.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:27.738 +02:00 [DBG] Start token request validation
2019-05-30 15:01:27.738 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:27.739 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:27.742 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:27.743 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:27.746 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:27.746 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:27.746 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:27.746 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:27.750 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****2usA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000003","TimeStamp":"2019-05-30T13:01:27.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:27.750 +02:00 [DBG] Token request success.
2019-05-30 15:01:28.207 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:28.207 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:28.207 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:28.207 +02:00 [DBG] Start token request.
2019-05-30 15:01:28.207 +02:00 [DBG] Start client validation
2019-05-30 15:01:28.207 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:28.207 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:28.208 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:28.208 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:28.212 +02:00 [DBG] client found in database: true
2019-05-30 15:01:28.212 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:28.212 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:28.212 +02:00 [DBG] Client validation success
2019-05-30 15:01:28.212 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000004","TimeStamp":"2019-05-30T13:01:28.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:28.212 +02:00 [DBG] Start token request validation
2019-05-30 15:01:28.212 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:28.213 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:28.216 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:28.217 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:28.220 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:28.220 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:28.220 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:28.220 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:28.223 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****t1vA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000004","TimeStamp":"2019-05-30T13:01:28.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:28.223 +02:00 [DBG] Token request success.
2019-05-30 15:01:28.820 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:28.820 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:28.820 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:28.820 +02:00 [DBG] Start token request.
2019-05-30 15:01:28.820 +02:00 [DBG] Start client validation
2019-05-30 15:01:28.820 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:28.820 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:28.820 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:28.820 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:28.825 +02:00 [DBG] client found in database: true
2019-05-30 15:01:28.825 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:28.825 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:28.825 +02:00 [DBG] Client validation success
2019-05-30 15:01:28.825 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000005","TimeStamp":"2019-05-30T13:01:28.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:28.825 +02:00 [DBG] Start token request validation
2019-05-30 15:01:28.825 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:28.826 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:28.829 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:28.830 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:28.833 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:28.833 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:28.834 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:28.834 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:28.837 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****t1vA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000005","TimeStamp":"2019-05-30T13:01:28.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:28.837 +02:00 [DBG] Token request success.
2019-05-30 15:01:29.443 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:29.443 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:29.443 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:29.443 +02:00 [DBG] Start token request.
2019-05-30 15:01:29.444 +02:00 [DBG] Start client validation
2019-05-30 15:01:29.444 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:29.444 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:29.444 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:29.444 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:29.448 +02:00 [DBG] client found in database: true
2019-05-30 15:01:29.448 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:29.448 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:29.448 +02:00 [DBG] Client validation success
2019-05-30 15:01:29.449 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000006","TimeStamp":"2019-05-30T13:01:29.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:29.449 +02:00 [DBG] Start token request validation
2019-05-30 15:01:29.449 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:29.450 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:29.453 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:29.454 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:29.458 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:29.458 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:29.458 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:29.458 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:29.462 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****MWbg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000006","TimeStamp":"2019-05-30T13:01:29.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:29.462 +02:00 [DBG] Token request success.
2019-05-30 15:01:30.192 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:30.192 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:30.192 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:30.192 +02:00 [DBG] Start token request.
2019-05-30 15:01:30.192 +02:00 [DBG] Start client validation
2019-05-30 15:01:30.192 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:30.193 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:30.193 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:30.193 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:30.197 +02:00 [DBG] client found in database: true
2019-05-30 15:01:30.197 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:30.197 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:30.197 +02:00 [DBG] Client validation success
2019-05-30 15:01:30.197 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000007","TimeStamp":"2019-05-30T13:01:30.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:30.197 +02:00 [DBG] Start token request validation
2019-05-30 15:01:30.197 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:30.198 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:30.202 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:30.203 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:30.206 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:30.206 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:30.206 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:30.206 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:30.209 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****_uoA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000007","TimeStamp":"2019-05-30T13:01:30.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:30.209 +02:00 [DBG] Token request success.
2019-05-30 15:01:30.804 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:01:30.805 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:01:30.805 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:01:30.805 +02:00 [DBG] Start token request.
2019-05-30 15:01:30.805 +02:00 [DBG] Start client validation
2019-05-30 15:01:30.805 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:01:30.805 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:01:30.805 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:01:30.805 +02:00 [DBG] Secret id found: client
2019-05-30 15:01:30.809 +02:00 [DBG] client found in database: true
2019-05-30 15:01:30.809 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:01:30.810 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:01:30.810 +02:00 [DBG] Client validation success
2019-05-30 15:01:30.810 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000008","TimeStamp":"2019-05-30T13:01:30.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:01:30.810 +02:00 [DBG] Start token request validation
2019-05-30 15:01:30.810 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:01:30.811 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:30.815 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:30.816 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:01:30.818 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:01:30.818 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:01:30.819 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:01:30.819 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:01:30.822 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****_uoA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4U1OGDPUP:00000008","TimeStamp":"2019-05-30T13:01:30.0000000Z","ProcessId":16492,"LocalIpAddress":"127.0.0.1:42698","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:01:30.822 +02:00 [DBG] Token request success.
2019-05-30 15:04:58.892 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-05-30 15:04:58.938 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-05-30 15:04:58.938 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-05-30 15:04:58.938 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-05-30 15:04:58.938 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-05-30 15:04:58.938 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-05-30 15:04:58.938 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-05-30 15:04:59.084 +02:00 [DBG] Starting grant removal
2019-05-30 15:04:59.337 +02:00 [DBG] Login Url: /Account/Login
2019-05-30 15:04:59.339 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-05-30 15:04:59.339 +02:00 [DBG] Logout Url: /Account/Logout
2019-05-30 15:04:59.339 +02:00 [DBG] ConsentUrl Url: /consent
2019-05-30 15:04:59.339 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-05-30 15:04:59.339 +02:00 [DBG] Error Url: /home/error
2019-05-30 15:04:59.339 +02:00 [DBG] Error Id Parameter: errorId
2019-05-30 15:05:31.934 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:05:31.954 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:05:31.954 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:05:31.960 +02:00 [DBG] Start token request.
2019-05-30 15:05:31.967 +02:00 [DBG] Start client validation
2019-05-30 15:05:31.972 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:05:31.975 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:05:31.988 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:05:31.988 +02:00 [DBG] Secret id found: client
2019-05-30 15:05:32.185 +02:00 [DBG] client found in database: true
2019-05-30 15:05:32.195 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:05:32.202 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:05:32.202 +02:00 [DBG] Client validation success
2019-05-30 15:05:32.235 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000002","TimeStamp":"2019-05-30T13:05:32.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:05:32.246 +02:00 [DBG] Start token request validation
2019-05-30 15:05:32.252 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:05:32.288 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:32.411 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:32.423 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:32.426 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:32.429 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:05:32.436 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:05:32.453 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:05:32.530 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****s3Pg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000002","TimeStamp":"2019-05-30T13:05:32.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:05:32.532 +02:00 [DBG] Token request success.
2019-05-30 15:05:33.410 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:05:33.411 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:05:33.411 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:05:33.411 +02:00 [DBG] Start token request.
2019-05-30 15:05:33.411 +02:00 [DBG] Start client validation
2019-05-30 15:05:33.411 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:05:33.411 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:05:33.412 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:05:33.412 +02:00 [DBG] Secret id found: client
2019-05-30 15:05:33.416 +02:00 [DBG] client found in database: true
2019-05-30 15:05:33.417 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:05:33.417 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:05:33.417 +02:00 [DBG] Client validation success
2019-05-30 15:05:33.417 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000002","TimeStamp":"2019-05-30T13:05:33.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:05:33.417 +02:00 [DBG] Start token request validation
2019-05-30 15:05:33.417 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:05:33.418 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:33.422 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:33.423 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:33.428 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:33.429 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:05:33.429 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:05:33.429 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:05:33.433 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****8iNA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000002","TimeStamp":"2019-05-30T13:05:33.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:05:33.433 +02:00 [DBG] Token request success.
2019-05-30 15:05:34.112 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:05:34.112 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:05:34.112 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:05:34.112 +02:00 [DBG] Start token request.
2019-05-30 15:05:34.112 +02:00 [DBG] Start client validation
2019-05-30 15:05:34.112 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:05:34.112 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:05:34.113 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:05:34.113 +02:00 [DBG] Secret id found: client
2019-05-30 15:05:34.117 +02:00 [DBG] client found in database: true
2019-05-30 15:05:34.117 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:05:34.117 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:05:34.117 +02:00 [DBG] Client validation success
2019-05-30 15:05:34.117 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000003","TimeStamp":"2019-05-30T13:05:34.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:05:34.117 +02:00 [DBG] Start token request validation
2019-05-30 15:05:34.117 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:05:34.118 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:34.121 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:34.122 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:34.126 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:34.126 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:05:34.126 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:05:34.126 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:05:34.129 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****P0mw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000003","TimeStamp":"2019-05-30T13:05:34.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:05:34.129 +02:00 [DBG] Token request success.
2019-05-30 15:05:34.723 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:05:34.724 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:05:34.724 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:05:34.724 +02:00 [DBG] Start token request.
2019-05-30 15:05:34.724 +02:00 [DBG] Start client validation
2019-05-30 15:05:34.724 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:05:34.724 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:05:34.725 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:05:34.725 +02:00 [DBG] Secret id found: client
2019-05-30 15:05:34.729 +02:00 [DBG] client found in database: true
2019-05-30 15:05:34.729 +02:00 [DBG] client configuration validation for client client succeeded.
2019-05-30 15:05:34.729 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:05:34.729 +02:00 [DBG] Client validation success
2019-05-30 15:05:34.730 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000003","TimeStamp":"2019-05-30T13:05:34.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:05:34.730 +02:00 [DBG] Start token request validation
2019-05-30 15:05:34.730 +02:00 [DBG] Start client credentials token request validation
2019-05-30 15:05:34.731 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:34.735 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:34.735 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:05:34.739 +02:00 [DBG] Found ["api1"] API scopes in database
2019-05-30 15:05:34.739 +02:00 [DBG] client credentials token request validation success
2019-05-30 15:05:34.740 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:05:34.740 +02:00 [DBG] Getting claims for access token for client: client
2019-05-30 15:05:34.743 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****P0mw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000003","TimeStamp":"2019-05-30T13:05:34.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:05:34.743 +02:00 [DBG] Token request success.
2019-05-30 15:06:23.472 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:06:23.472 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:06:23.473 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:06:23.473 +02:00 [DBG] Start token request.
2019-05-30 15:06:23.473 +02:00 [DBG] Start client validation
2019-05-30 15:06:23.473 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:06:23.473 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:06:23.494 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:06:23.494 +02:00 [DBG] Secret id found: ro.client
2019-05-30 15:06:23.510 +02:00 [DBG] ro.client found in database: true
2019-05-30 15:06:23.510 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 15:06:23.510 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:06:23.510 +02:00 [DBG] Client validation success
2019-05-30 15:06:23.510 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000004","TimeStamp":"2019-05-30T13:06:23.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:06:23.510 +02:00 [DBG] Start token request validation
2019-05-30 15:06:23.518 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 15:06:23.520 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:23.522 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:23.523 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:23.524 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:23.591 +02:00 [INF] Credentials validated for username: alice
2019-05-30 15:06:23.593 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000004","TimeStamp":"2019-05-30T13:06:23.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:23.608 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000004","TimeStamp":"2019-05-30T13:06:23.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:23.608 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 15:06:23.610 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:06:23.613 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 15:06:23.613 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-05-30 15:06:23.751 +02:00 [DBG] Creating refresh token
2019-05-30 15:06:23.751 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 15:06:23.869 +02:00 [DBG] 9tLf7Wm/zPoLUnQSyYwZnJaQRyurZ2p9uK0MvjmEpi8= not found in database
2019-05-30 15:06:23.913 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****179f","$type":"Token"},{"TokenType":"access_token","TokenValue":"****IW0g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000004","TimeStamp":"2019-05-30T13:06:23.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:06:23.913 +02:00 [DBG] Token request success.
2019-05-30 15:06:24.779 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:06:24.780 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:06:24.780 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:06:24.780 +02:00 [DBG] Start token request.
2019-05-30 15:06:24.780 +02:00 [DBG] Start client validation
2019-05-30 15:06:24.780 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:06:24.780 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:06:24.780 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:06:24.780 +02:00 [DBG] Secret id found: ro.client
2019-05-30 15:06:24.785 +02:00 [DBG] ro.client found in database: true
2019-05-30 15:06:24.785 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 15:06:24.785 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:06:24.785 +02:00 [DBG] Client validation success
2019-05-30 15:06:24.785 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000004","TimeStamp":"2019-05-30T13:06:24.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:06:24.785 +02:00 [DBG] Start token request validation
2019-05-30 15:06:24.785 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 15:06:24.786 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:24.788 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:24.789 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:24.790 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:24.803 +02:00 [INF] Credentials validated for username: alice
2019-05-30 15:06:24.803 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000004","TimeStamp":"2019-05-30T13:06:24.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:24.803 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000004","TimeStamp":"2019-05-30T13:06:24.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:24.803 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 15:06:24.803 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:06:24.804 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 15:06:24.804 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-05-30 15:06:24.811 +02:00 [DBG] Creating refresh token
2019-05-30 15:06:24.811 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 15:06:24.812 +02:00 [DBG] sWdllfSKNNIOEbMXTI/zChnT9YcMjLxQS7sEl9zAP44= not found in database
2019-05-30 15:06:24.814 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****614b","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Q4lw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000004","TimeStamp":"2019-05-30T13:06:24.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:06:24.815 +02:00 [DBG] Token request success.
2019-05-30 15:06:25.417 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:06:25.417 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:06:25.417 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:06:25.417 +02:00 [DBG] Start token request.
2019-05-30 15:06:25.417 +02:00 [DBG] Start client validation
2019-05-30 15:06:25.417 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:06:25.417 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:06:25.418 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:06:25.418 +02:00 [DBG] Secret id found: ro.client
2019-05-30 15:06:25.422 +02:00 [DBG] ro.client found in database: true
2019-05-30 15:06:25.422 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 15:06:25.422 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:06:25.423 +02:00 [DBG] Client validation success
2019-05-30 15:06:25.423 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:06:25.423 +02:00 [DBG] Start token request validation
2019-05-30 15:06:25.423 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 15:06:25.424 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:25.425 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:25.426 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:25.427 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:25.438 +02:00 [INF] Credentials validated for username: alice
2019-05-30 15:06:25.438 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:25.439 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:25.439 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 15:06:25.439 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:06:25.439 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 15:06:25.439 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-05-30 15:06:25.446 +02:00 [DBG] Creating refresh token
2019-05-30 15:06:25.446 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 15:06:25.447 +02:00 [DBG] +/csb83ik2HVJVgHGKiDpTyq6X7+3+iZwybeyhFHIMc= not found in database
2019-05-30 15:06:25.462 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3db8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****NL-A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:06:25.462 +02:00 [DBG] Token request success.
2019-05-30 15:06:25.950 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:06:25.951 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:06:25.951 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:06:25.951 +02:00 [DBG] Start token request.
2019-05-30 15:06:25.951 +02:00 [DBG] Start client validation
2019-05-30 15:06:25.951 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:06:25.951 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:06:25.951 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:06:25.951 +02:00 [DBG] Secret id found: ro.client
2019-05-30 15:06:25.956 +02:00 [DBG] ro.client found in database: true
2019-05-30 15:06:25.956 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 15:06:25.956 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:06:25.956 +02:00 [DBG] Client validation success
2019-05-30 15:06:25.956 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:06:25.956 +02:00 [DBG] Start token request validation
2019-05-30 15:06:25.956 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 15:06:25.957 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:25.959 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:25.960 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:25.961 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:25.972 +02:00 [INF] Credentials validated for username: alice
2019-05-30 15:06:25.972 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:25.972 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:25.973 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 15:06:25.973 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:06:25.973 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 15:06:25.973 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-05-30 15:06:25.980 +02:00 [DBG] Creating refresh token
2019-05-30 15:06:25.980 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 15:06:25.981 +02:00 [DBG] Zp3RtGxYAj0eyDVDGtrF+RMpffK/CQg4CrohL31Luxg= not found in database
2019-05-30 15:06:25.984 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****954f","$type":"Token"},{"TokenType":"access_token","TokenValue":"****NL-A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6Q:00000005","TimeStamp":"2019-05-30T13:06:25.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:06:25.984 +02:00 [DBG] Token request success.
2019-05-30 15:06:26.304 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-05-30 15:06:26.304 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-05-30 15:06:26.304 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-05-30 15:06:26.305 +02:00 [DBG] Start token request.
2019-05-30 15:06:26.305 +02:00 [DBG] Start client validation
2019-05-30 15:06:26.305 +02:00 [DBG] Start parsing Basic Authentication secret
2019-05-30 15:06:26.305 +02:00 [DBG] Start parsing for secret in post body
2019-05-30 15:06:26.305 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-05-30 15:06:26.305 +02:00 [DBG] Secret id found: ro.client
2019-05-30 15:06:26.309 +02:00 [DBG] ro.client found in database: true
2019-05-30 15:06:26.310 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-05-30 15:06:26.310 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-05-30 15:06:26.310 +02:00 [DBG] Client validation success
2019-05-30 15:06:26.310 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000006","TimeStamp":"2019-05-30T13:06:26.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-05-30 15:06:26.310 +02:00 [DBG] Start token request validation
2019-05-30 15:06:26.310 +02:00 [DBG] Start resource owner password token request validation
2019-05-30 15:06:26.311 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:26.312 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:26.313 +02:00 [DBG] Found [] identity scopes in database
2019-05-30 15:06:26.314 +02:00 [DBG] Found [] API scopes in database
2019-05-30 15:06:26.324 +02:00 [INF] Credentials validated for username: alice
2019-05-30 15:06:26.324 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000006","TimeStamp":"2019-05-30T13:06:26.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:26.324 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000006","TimeStamp":"2019-05-30T13:06:26.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-05-30 15:06:26.324 +02:00 [DBG] Resource owner password token request validation success.
2019-05-30 15:06:26.325 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-05-30 15:06:26.325 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-05-30 15:06:26.325 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-05-30 15:06:26.331 +02:00 [DBG] Creating refresh token
2019-05-30 15:06:26.332 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-05-30 15:06:26.333 +02:00 [DBG] qSH3/ZkxPf6Onz2+0jFYKKODfBB5L1rzm+XtSHkpKb0= not found in database
2019-05-30 15:06:26.346 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****f0bf","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6l3w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN4VTLP0S6R:00000006","TimeStamp":"2019-05-30T13:06:26.0000000Z","ProcessId":14112,"LocalIpAddress":"127.0.0.1:42252","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-05-30 15:06:26.346 +02:00 [DBG] Token request success.
2019-05-30 15:14:37.088 +02:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: https://jwt.io
2019-05-30 15:14:37.145 +02:00 [DBG] Origin https://jwt.io is allowed: false
2019-05-30 15:14:37.145 +02:00 [WRN] CorsPolicyService did not allow origin: https://jwt.io
2019-05-30 15:14:37.145 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-05-30 15:14:37.153 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-05-30 15:14:37.153 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-05-30 15:14:37.186 +02:00 [DBG] Start discovery request
2019-05-30 15:14:37.357 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-03 09:07:46.526 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 09:07:47.216 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 09:07:47.216 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 09:07:47.216 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 09:07:47.216 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 09:07:47.216 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 09:07:47.216 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 09:07:47.733 +02:00 [DBG] Starting grant removal
2019-06-03 09:07:48.528 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 09:07:48.538 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 09:07:48.538 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 09:07:48.538 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 09:07:48.538 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 09:07:48.538 +02:00 [DBG] Error Url: /home/error
2019-06-03 09:07:48.538 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 09:07:51.072 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:07:51.158 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:07:51.159 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:07:51.166 +02:00 [DBG] Start token request.
2019-06-03 09:07:51.171 +02:00 [DBG] Start client validation
2019-06-03 09:07:51.176 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:07:51.179 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:07:51.238 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:07:51.238 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:07:55.796 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:07:55.817 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:07:55.826 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:07:55.826 +02:00 [DBG] Client validation success
2019-06-03 09:07:55.882 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH7:00000002","TimeStamp":"2019-06-03T07:07:55.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:07:55.922 +02:00 [DBG] Start token request validation
2019-06-03 09:07:55.932 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:07:56.038 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:07:56.128 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:07:56.137 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:07:56.138 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:07:56.627 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:07:56.628 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH7:00000002","TimeStamp":"2019-06-03T07:07:56.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:07:56.636 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH7:00000002","TimeStamp":"2019-06-03T07:07:56.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:07:56.636 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:07:56.642 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:07:56.665 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:07:56.665 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-06-03 09:07:57.042 +02:00 [DBG] Creating refresh token
2019-06-03 09:07:57.042 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:07:57.108 +02:00 [DBG] FvMPLojv+rFzszwZXOPyiKKZXmVtsRHjfee94+luUYQ= not found in database
2019-06-03 09:07:57.336 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****70fa","$type":"Token"},{"TokenType":"access_token","TokenValue":"****viNw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH7:00000002","TimeStamp":"2019-06-03T07:07:57.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:07:57.337 +02:00 [DBG] Token request success.
2019-06-03 09:09:28.004 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:09:28.005 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:09:28.005 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:09:28.013 +02:00 [DBG] Start revocation request.
2019-06-03 09:09:28.013 +02:00 [DBG] Start client validation
2019-06-03 09:09:28.013 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:09:28.013 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:09:28.014 +02:00 [DBG] No secret in post body found
2019-06-03 09:09:28.014 +02:00 [DBG] Parser found no secret
2019-06-03 09:09:28.014 +02:00 [INF] {"ClientId":"unknown","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"No client id found","ActivityId":"0HLN7U8NIFDH8:00000001","TimeStamp":"2019-06-03T07:09:28.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-06-03 09:09:28.014 +02:00 [ERR] No client identifier found
2019-06-03 09:09:39.051 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:09:39.052 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:09:39.052 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:09:39.052 +02:00 [DBG] Start revocation request.
2019-06-03 09:09:39.052 +02:00 [DBG] Start client validation
2019-06-03 09:09:39.052 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:09:39.052 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:09:39.052 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:09:39.052 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:09:39.100 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:09:39.100 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:09:39.100 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:09:39.100 +02:00 [DBG] Client validation success
2019-06-03 09:09:39.100 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000002","TimeStamp":"2019-06-03T07:09:39.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:09:39.102 +02:00 [DBG] Token type hint found in request: refresh_token
2019-06-03 09:09:39.102 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:09:39.144 +02:00 [DBG] FvMPLojv+rFzszwZXOPyiKKZXmVtsRHjfee94+luUYQ= found in database: true
2019-06-03 09:09:39.172 +02:00 [DBG] Refresh token revoked
2019-06-03 09:09:39.187 +02:00 [DBG] removing FvMPLojv+rFzszwZXOPyiKKZXmVtsRHjfee94+luUYQ= persisted grant from database
2019-06-03 09:09:39.774 +02:00 [DBG] removing 0 persisted grants from database for subject 224bd791-2ec0-4dc7-932d-c22a5f560810, clientId ro.client, grantType reference_token
2019-06-03 09:09:39.775 +02:00 [INF] Token successfully revoked
2019-06-03 09:09:39.777 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"TokenType":"refresh_token","Token":"****70fa","Category":"Token","Name":"Token Revoked Success","EventType":"Success","Id":2010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000002","TimeStamp":"2019-06-03T07:09:39.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenRevokedSuccessEvent"}
2019-06-03 09:09:51.779 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:09:51.780 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:09:51.780 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:09:51.780 +02:00 [DBG] Start token request.
2019-06-03 09:09:51.780 +02:00 [DBG] Start client validation
2019-06-03 09:09:51.780 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:09:51.780 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:09:51.780 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:09:51.780 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:09:51.785 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:09:51.785 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:09:51.785 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:09:51.785 +02:00 [DBG] Client validation success
2019-06-03 09:09:51.785 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000003","TimeStamp":"2019-06-03T07:09:51.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:09:51.785 +02:00 [DBG] Start token request validation
2019-06-03 09:09:51.789 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:09:51.795 +02:00 [DBG] FvMPLojv+rFzszwZXOPyiKKZXmVtsRHjfee94+luUYQ= found in database: false
2019-06-03 09:09:51.795 +02:00 [DBG] refresh_token grant with value: 564caa5fabb756c2a7b15256d2089d21690ce27c80d954855ec81660c0eb70fa not found in store.
2019-06-03 09:09:51.795 +02:00 [WRN] Invalid refresh token
2019-06-03 09:09:51.795 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:09:51.797 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000003","TimeStamp":"2019-06-03T07:09:51.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 09:09:58.596 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:09:58.597 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:09:58.597 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:09:58.597 +02:00 [DBG] Start token request.
2019-06-03 09:09:58.597 +02:00 [DBG] Start client validation
2019-06-03 09:09:58.597 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:09:58.597 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:09:58.597 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:09:58.597 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:09:58.602 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:09:58.602 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:09:58.602 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:09:58.602 +02:00 [DBG] Client validation success
2019-06-03 09:09:58.602 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000004","TimeStamp":"2019-06-03T07:09:58.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:09:58.602 +02:00 [DBG] Start token request validation
2019-06-03 09:09:58.602 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:09:58.605 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:09:58.607 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:09:58.608 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:09:58.608 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:09:58.620 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:09:58.620 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000004","TimeStamp":"2019-06-03T07:09:58.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:09:58.620 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000004","TimeStamp":"2019-06-03T07:09:58.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:09:58.621 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:09:58.621 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:09:58.621 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:09:58.621 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-06-03 09:09:58.630 +02:00 [DBG] Creating refresh token
2019-06-03 09:09:58.630 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:09:58.649 +02:00 [DBG] wPl2n8r2Ho5D6xkUnYD67K/xvLaYdJaYiO3o0xBALfA= not found in database
2019-06-03 09:09:58.652 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****391d","$type":"Token"},{"TokenType":"access_token","TokenValue":"****eZIw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000004","TimeStamp":"2019-06-03T07:09:58.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:09:58.652 +02:00 [DBG] Token request success.
2019-06-03 09:10:05.126 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:10:05.126 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:10:05.126 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:10:05.126 +02:00 [DBG] Start token request.
2019-06-03 09:10:05.126 +02:00 [DBG] Start client validation
2019-06-03 09:10:05.127 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:05.127 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:05.127 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:05.127 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:05.131 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:05.132 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:05.132 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:05.132 +02:00 [DBG] Client validation success
2019-06-03 09:10:05.132 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000005","TimeStamp":"2019-06-03T07:10:05.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:05.132 +02:00 [DBG] Start token request validation
2019-06-03 09:10:05.132 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:10:05.133 +02:00 [DBG] wPl2n8r2Ho5D6xkUnYD67K/xvLaYdJaYiO3o0xBALfA= found in database: true
2019-06-03 09:10:05.218 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"224bd791-2ec0-4dc7-932d-c22a5f560810","client_id":"ro.client","scope":"offline_access","auth_time":1559545798,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:10:05.220 +02:00 [DBG] Validation of refresh token request success
2019-06-03 09:10:05.221 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"9efa6b71ecd878dc0cbf0b484d084c65433e0684d49c87a752489e3f5a68391d","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:10:05.235 +02:00 [DBG] Updating refresh token
2019-06-03 09:10:05.235 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-06-03 09:10:05.236 +02:00 [DBG] removing wPl2n8r2Ho5D6xkUnYD67K/xvLaYdJaYiO3o0xBALfA= persisted grant from database
2019-06-03 09:10:05.238 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-06-03 09:10:05.238 +02:00 [DBG] Current lifetime: 7
2019-06-03 09:10:05.238 +02:00 [DBG] New lifetime: 1296007
2019-06-03 09:10:05.239 +02:00 [DBG] tf+ysgBZdvGy93wOAnr2ji9dezUgggAycSKCqc5yPus= not found in database
2019-06-03 09:10:05.241 +02:00 [DBG] Created refresh token in store
2019-06-03 09:10:05.338 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:10:05.352 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:10:05.352 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****9096","$type":"Token"},{"TokenType":"access_token","TokenValue":"****XzaQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000005","TimeStamp":"2019-06-03T07:10:05.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:10:05.352 +02:00 [DBG] Token request success.
2019-06-03 09:10:07.393 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:10:07.393 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:10:07.393 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:10:07.394 +02:00 [DBG] Start token request.
2019-06-03 09:10:07.394 +02:00 [DBG] Start client validation
2019-06-03 09:10:07.394 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:07.394 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:07.394 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:07.394 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:07.398 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:07.398 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:07.398 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:07.398 +02:00 [DBG] Client validation success
2019-06-03 09:10:07.398 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000006","TimeStamp":"2019-06-03T07:10:07.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:07.398 +02:00 [DBG] Start token request validation
2019-06-03 09:10:07.398 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:10:07.411 +02:00 [DBG] wPl2n8r2Ho5D6xkUnYD67K/xvLaYdJaYiO3o0xBALfA= found in database: false
2019-06-03 09:10:07.411 +02:00 [DBG] refresh_token grant with value: 9efa6b71ecd878dc0cbf0b484d084c65433e0684d49c87a752489e3f5a68391d not found in store.
2019-06-03 09:10:07.411 +02:00 [WRN] Invalid refresh token
2019-06-03 09:10:07.411 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:10:07.411 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000006","TimeStamp":"2019-06-03T07:10:07.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 09:10:15.577 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:10:15.578 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:10:15.578 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:10:15.578 +02:00 [DBG] Start token request.
2019-06-03 09:10:15.578 +02:00 [DBG] Start client validation
2019-06-03 09:10:15.578 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:15.578 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:15.578 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:15.578 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:15.582 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:15.582 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:15.583 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:15.583 +02:00 [DBG] Client validation success
2019-06-03 09:10:15.583 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000007","TimeStamp":"2019-06-03T07:10:15.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:15.583 +02:00 [DBG] Start token request validation
2019-06-03 09:10:15.583 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:10:15.584 +02:00 [DBG] wPl2n8r2Ho5D6xkUnYD67K/xvLaYdJaYiO3o0xBALfA= found in database: false
2019-06-03 09:10:15.584 +02:00 [DBG] refresh_token grant with value: 9efa6b71ecd878dc0cbf0b484d084c65433e0684d49c87a752489e3f5a68391d not found in store.
2019-06-03 09:10:15.584 +02:00 [WRN] Invalid refresh token
2019-06-03 09:10:15.584 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:10:15.584 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000007","TimeStamp":"2019-06-03T07:10:15.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 09:10:19.081 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:10:19.082 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:10:19.082 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:10:19.082 +02:00 [DBG] Start token request.
2019-06-03 09:10:19.082 +02:00 [DBG] Start client validation
2019-06-03 09:10:19.082 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:19.082 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:19.082 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:19.082 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:19.089 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:19.089 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:19.089 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:19.089 +02:00 [DBG] Client validation success
2019-06-03 09:10:19.089 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000008","TimeStamp":"2019-06-03T07:10:19.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:19.089 +02:00 [DBG] Start token request validation
2019-06-03 09:10:19.089 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:10:19.090 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:10:19.092 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:10:19.092 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:10:19.093 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:10:19.104 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:10:19.104 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000008","TimeStamp":"2019-06-03T07:10:19.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:10:19.105 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000008","TimeStamp":"2019-06-03T07:10:19.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:10:19.105 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:10:19.105 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:10:19.105 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:10:19.105 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-06-03 09:10:19.112 +02:00 [DBG] Creating refresh token
2019-06-03 09:10:19.112 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:10:19.113 +02:00 [DBG] TXzXPWRO+O/T4dcDhTJMxyoBGZyo3XsojpSGN5eMJ0w= not found in database
2019-06-03 09:10:19.130 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****9ae9","$type":"Token"},{"TokenType":"access_token","TokenValue":"****chBw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000008","TimeStamp":"2019-06-03T07:10:19.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:10:19.131 +02:00 [DBG] Token request success.
2019-06-03 09:10:24.140 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:10:24.141 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:10:24.141 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:10:24.141 +02:00 [DBG] Start token request.
2019-06-03 09:10:24.141 +02:00 [DBG] Start client validation
2019-06-03 09:10:24.141 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:24.141 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:24.141 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:24.141 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:24.146 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:24.146 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:24.146 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:24.146 +02:00 [DBG] Client validation success
2019-06-03 09:10:24.146 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000009","TimeStamp":"2019-06-03T07:10:24.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:24.146 +02:00 [DBG] Start token request validation
2019-06-03 09:10:24.146 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:10:24.147 +02:00 [DBG] TXzXPWRO+O/T4dcDhTJMxyoBGZyo3XsojpSGN5eMJ0w= found in database: true
2019-06-03 09:10:24.151 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"224bd791-2ec0-4dc7-932d-c22a5f560810","client_id":"ro.client","scope":"offline_access","auth_time":1559545819,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:10:24.152 +02:00 [DBG] Validation of refresh token request success
2019-06-03 09:10:24.152 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"220b0ffea488d8fc2d8b4be32a57fe3b2d9f885d8fd9998ee45d3e1ceca49ae9","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:10:24.155 +02:00 [DBG] Updating refresh token
2019-06-03 09:10:24.155 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-06-03 09:10:24.156 +02:00 [DBG] removing TXzXPWRO+O/T4dcDhTJMxyoBGZyo3XsojpSGN5eMJ0w= persisted grant from database
2019-06-03 09:10:24.158 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-06-03 09:10:24.158 +02:00 [DBG] Current lifetime: 5
2019-06-03 09:10:24.158 +02:00 [DBG] New lifetime: 1296005
2019-06-03 09:10:24.159 +02:00 [DBG] aCq7M9fSx1fV49VPGGYIhcK/pmb6Ieela0y8n5fdGdA= not found in database
2019-06-03 09:10:24.160 +02:00 [DBG] Created refresh token in store
2019-06-03 09:10:24.162 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:10:24.164 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:10:24.164 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"refresh_token","TokenValue":"****ecd8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****aaHg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:00000009","TimeStamp":"2019-06-03T07:10:24.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:10:24.164 +02:00 [DBG] Token request success.
2019-06-03 09:10:27.362 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:10:27.363 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:10:27.363 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:10:27.363 +02:00 [DBG] Start token request.
2019-06-03 09:10:27.363 +02:00 [DBG] Start client validation
2019-06-03 09:10:27.363 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:27.363 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:27.363 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:27.363 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:27.367 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:27.367 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:27.368 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:27.368 +02:00 [DBG] Client validation success
2019-06-03 09:10:27.368 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000A","TimeStamp":"2019-06-03T07:10:27.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:27.368 +02:00 [DBG] Start token request validation
2019-06-03 09:10:27.368 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:10:27.369 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:10:27.370 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:10:27.371 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:10:27.372 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:10:27.384 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:10:27.384 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000A","TimeStamp":"2019-06-03T07:10:27.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:10:27.385 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000A","TimeStamp":"2019-06-03T07:10:27.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:10:27.385 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:10:27.385 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:10:27.385 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:10:27.385 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-06-03 09:10:27.391 +02:00 [DBG] Creating refresh token
2019-06-03 09:10:27.391 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:10:27.392 +02:00 [DBG] tWcqYqnJ7Ta9DEy0AIMBebRkoKpScECuvT29ls1RFrE= not found in database
2019-06-03 09:10:27.419 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3cce","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4w5Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000A","TimeStamp":"2019-06-03T07:10:27.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:10:27.420 +02:00 [DBG] Token request success.
2019-06-03 09:10:36.707 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:10:36.707 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:10:36.707 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:10:36.707 +02:00 [DBG] Start revocation request.
2019-06-03 09:10:36.708 +02:00 [DBG] Start client validation
2019-06-03 09:10:36.708 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:36.708 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:36.708 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:36.708 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:36.775 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:36.776 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:36.776 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:36.776 +02:00 [DBG] Client validation success
2019-06-03 09:10:36.776 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000B","TimeStamp":"2019-06-03T07:10:36.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:36.776 +02:00 [DBG] Token type hint found in request: refresh_token
2019-06-03 09:10:36.776 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:10:36.778 +02:00 [DBG] tWcqYqnJ7Ta9DEy0AIMBebRkoKpScECuvT29ls1RFrE= found in database: true
2019-06-03 09:10:36.778 +02:00 [DBG] Refresh token revoked
2019-06-03 09:10:36.779 +02:00 [DBG] removing tWcqYqnJ7Ta9DEy0AIMBebRkoKpScECuvT29ls1RFrE= persisted grant from database
2019-06-03 09:10:36.807 +02:00 [DBG] removing 0 persisted grants from database for subject 224bd791-2ec0-4dc7-932d-c22a5f560810, clientId ro.client, grantType reference_token
2019-06-03 09:10:36.807 +02:00 [INF] Token successfully revoked
2019-06-03 09:10:36.807 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"TokenType":"refresh_token","Token":"****3cce","Category":"Token","Name":"Token Revoked Success","EventType":"Success","Id":2010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000B","TimeStamp":"2019-06-03T07:10:36.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenRevokedSuccessEvent"}
2019-06-03 09:10:48.726 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:10:48.727 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:10:48.727 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:10:48.727 +02:00 [DBG] Start token request.
2019-06-03 09:10:48.727 +02:00 [DBG] Start client validation
2019-06-03 09:10:48.727 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:10:48.727 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:10:48.727 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:10:48.727 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:10:48.750 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:10:48.750 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:10:48.750 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:10:48.750 +02:00 [DBG] Client validation success
2019-06-03 09:10:48.750 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000C","TimeStamp":"2019-06-03T07:10:48.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:10:48.750 +02:00 [DBG] Start token request validation
2019-06-03 09:10:48.750 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:10:48.752 +02:00 [DBG] tWcqYqnJ7Ta9DEy0AIMBebRkoKpScECuvT29ls1RFrE= found in database: false
2019-06-03 09:10:48.752 +02:00 [DBG] refresh_token grant with value: b8fd995f40f66d7e994b0cc046a2e7bb3859bf88eb0e128bc9304e43a3c73cce not found in store.
2019-06-03 09:10:48.752 +02:00 [WRN] Invalid refresh token
2019-06-03 09:10:48.752 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:10:48.752 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7U8NIFDH8:0000000C","TimeStamp":"2019-06-03T07:10:48.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 09:14:24.555 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:14:24.555 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:14:24.555 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:14:24.555 +02:00 [DBG] Start token request.
2019-06-03 09:14:24.555 +02:00 [DBG] Start client validation
2019-06-03 09:14:24.555 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:14:24.555 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:14:24.556 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:14:24.556 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:14:24.583 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:14:24.583 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:14:24.583 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:14:24.583 +02:00 [DBG] Client validation success
2019-06-03 09:14:24.583 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000001","TimeStamp":"2019-06-03T07:14:24.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:14:24.584 +02:00 [DBG] Start token request validation
2019-06-03 09:14:24.584 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:14:24.585 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:14:24.588 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:14:24.590 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:14:24.592 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:14:24.603 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:14:24.603 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000001","TimeStamp":"2019-06-03T07:14:24.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:14:24.603 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000001","TimeStamp":"2019-06-03T07:14:24.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:14:24.603 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:14:24.603 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:14:24.603 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:14:24.604 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-06-03 09:14:24.614 +02:00 [DBG] Creating refresh token
2019-06-03 09:14:24.615 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:14:24.617 +02:00 [DBG] bYZXX/Z1cnH4P49vduK69tcC27rhiHeU1A2njIwWZjw= not found in database
2019-06-03 09:14:24.640 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****9887","$type":"Token"},{"TokenType":"access_token","TokenValue":"****p9Bg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000001","TimeStamp":"2019-06-03T07:14:24.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:14:24.640 +02:00 [DBG] Token request success.
2019-06-03 09:14:51.851 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:14:51.852 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:14:51.852 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:14:51.859 +02:00 [DBG] Start userinfo request
2019-06-03 09:14:51.862 +02:00 [DBG] Bearer token found in header
2019-06-03 09:14:51.990 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:14:51.990 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:14:51.994 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:14:51.994 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:14:52.001 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546064,"exp":1559549664,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"224bd791-2ec0-4dc7-932d-c22a5f560810","auth_time":1559546064,"idp":"local","scope":"offline_access","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:15:12.048 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:15:12.049 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:15:12.049 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:15:12.049 +02:00 [DBG] Start token request.
2019-06-03 09:15:12.049 +02:00 [DBG] Start client validation
2019-06-03 09:15:12.049 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:15:12.049 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:15:12.049 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:15:12.050 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:15:12.077 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:15:12.077 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:15:12.077 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:15:12.077 +02:00 [DBG] Client validation success
2019-06-03 09:15:12.077 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000003","TimeStamp":"2019-06-03T07:15:12.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:15:12.077 +02:00 [DBG] Start token request validation
2019-06-03 09:15:12.077 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:15:12.080 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:15:12.082 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:15:12.082 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:15:12.083 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:15:12.097 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:15:12.097 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000003","TimeStamp":"2019-06-03T07:15:12.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:15:12.098 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000003","TimeStamp":"2019-06-03T07:15:12.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:15:12.098 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:15:12.098 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:15:12.098 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:15:12.098 +02:00 [DBG] Getting claims for access token for subject: 224bd791-2ec0-4dc7-932d-c22a5f560810
2019-06-03 09:15:12.109 +02:00 [DBG] Creating refresh token
2019-06-03 09:15:12.109 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:15:12.114 +02:00 [DBG] J0ZoDnrseBETcmGVomeFr8BNn8GDZZkGMb7ndkbYP/c= not found in database
2019-06-03 09:15:12.117 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"224bd791-2ec0-4dc7-932d-c22a5f560810","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****dd6f","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1iFQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7U8NIFDH9:00000003","TimeStamp":"2019-06-03T07:15:12.0000000Z","ProcessId":29840,"LocalIpAddress":"127.0.0.1:2213","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:15:12.117 +02:00 [DBG] Token request success.
2019-06-03 09:15:21.559 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:15:21.560 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:15:21.560 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:15:21.560 +02:00 [DBG] Start userinfo request
2019-06-03 09:15:21.560 +02:00 [DBG] Bearer token found in header
2019-06-03 09:15:21.567 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:15:21.567 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:15:21.571 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:15:21.571 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:15:21.575 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546112,"exp":1559549712,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"224bd791-2ec0-4dc7-932d-c22a5f560810","auth_time":1559546112,"idp":"local","scope":"offline_access","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:19:59.423 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 09:19:59.463 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 09:19:59.463 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 09:19:59.463 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 09:19:59.463 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 09:19:59.463 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 09:19:59.463 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 09:19:59.865 +02:00 [DBG] Starting grant removal
2019-06-03 09:20:00.128 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 09:20:00.130 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 09:20:00.130 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 09:20:00.131 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 09:20:00.131 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 09:20:00.131 +02:00 [DBG] Error Url: /home/error
2019-06-03 09:20:00.131 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 09:20:06.180 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:20:06.201 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:20:06.201 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:20:06.208 +02:00 [DBG] Start token request.
2019-06-03 09:20:06.214 +02:00 [DBG] Start client validation
2019-06-03 09:20:06.218 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:20:06.221 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:20:06.233 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:20:06.233 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:20:06.413 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:20:06.423 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:20:06.432 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:20:06.432 +02:00 [DBG] Client validation success
2019-06-03 09:20:06.449 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMN:00000002","TimeStamp":"2019-06-03T07:20:06.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:20:06.460 +02:00 [DBG] Start token request validation
2019-06-03 09:20:06.470 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:20:06.508 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:20:06.561 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:20:06.569 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 09:20:06.571 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:20:06.607 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:20:06.608 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMN:00000002","TimeStamp":"2019-06-03T07:20:06.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:20:06.616 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMN:00000002","TimeStamp":"2019-06-03T07:20:06.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:20:06.617 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:20:06.624 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:20:06.654 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:20:06.654 +02:00 [DBG] Getting claims for access token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b
2019-06-03 09:20:06.818 +02:00 [DBG] Creating refresh token
2019-06-03 09:20:06.818 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:20:06.848 +02:00 [DBG] 6P7DJUhQN11+GqzuBApPq8Awgz/ImtlywD1bPBJHADY= not found in database
2019-06-03 09:20:06.869 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****7d7d","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1EMA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMN:00000002","TimeStamp":"2019-06-03T07:20:06.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:20:06.870 +02:00 [DBG] Token request success.
2019-06-03 09:20:25.380 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:20:25.381 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:20:25.381 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:20:25.388 +02:00 [DBG] Start userinfo request
2019-06-03 09:20:25.391 +02:00 [DBG] Bearer token found in header
2019-06-03 09:20:25.641 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:20:25.641 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:20:25.664 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:20:25.664 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:20:25.720 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546406,"exp":1559550006,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546406,"idp":"local","scope":"offline_access","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:20:27.555 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:20:27.556 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:20:27.556 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:20:27.556 +02:00 [DBG] Start userinfo request
2019-06-03 09:20:27.556 +02:00 [DBG] Bearer token found in header
2019-06-03 09:20:27.584 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:20:27.584 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:20:27.607 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:20:27.607 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:20:27.611 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546406,"exp":1559550006,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546406,"idp":"local","scope":"offline_access","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:20:51.719 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:20:51.720 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:20:51.720 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:20:51.727 +02:00 [DBG] Start revocation request.
2019-06-03 09:20:51.727 +02:00 [DBG] Start client validation
2019-06-03 09:20:51.727 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:20:51.727 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:20:51.727 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:20:51.727 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:20:51.748 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:20:51.749 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:20:51.749 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:20:51.749 +02:00 [DBG] Client validation success
2019-06-03 09:20:51.749 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMO:00000003","TimeStamp":"2019-06-03T07:20:51.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:20:51.751 +02:00 [ERR] Invalid token type hint: token
2019-06-03 09:20:51.751 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:21:01.193 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:21:01.193 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:21:01.193 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:21:01.193 +02:00 [DBG] Start revocation request.
2019-06-03 09:21:01.193 +02:00 [DBG] Start client validation
2019-06-03 09:21:01.193 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:21:01.193 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:21:01.194 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:21:01.194 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:21:01.198 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:21:01.198 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:21:01.198 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:21:01.198 +02:00 [DBG] Client validation success
2019-06-03 09:21:01.198 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMN:00000004","TimeStamp":"2019-06-03T07:21:01.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:21:01.198 +02:00 [DBG] Token type hint found in request: refresh_token
2019-06-03 09:21:01.198 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:21:01.272 +02:00 [DBG] tWcqYqnJ7Ta9DEy0AIMBebRkoKpScECuvT29ls1RFrE= found in database: false
2019-06-03 09:21:01.273 +02:00 [DBG] refresh_token grant with value: b8fd995f40f66d7e994b0cc046a2e7bb3859bf88eb0e128bc9304e43a3c73cce not found in store.
2019-06-03 09:21:01.273 +02:00 [INF] No matching token found
2019-06-03 09:21:15.080 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:21:15.081 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:21:15.081 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:21:15.081 +02:00 [DBG] Start revocation request.
2019-06-03 09:21:15.081 +02:00 [DBG] Start client validation
2019-06-03 09:21:15.081 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:21:15.081 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:21:15.081 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:21:15.081 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:21:15.085 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:21:15.085 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:21:15.086 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:21:15.086 +02:00 [DBG] Client validation success
2019-06-03 09:21:15.086 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMO:00000004","TimeStamp":"2019-06-03T07:21:15.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:21:15.086 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:21:15.086 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:21:15.090 +02:00 [DBG] Tdgc8cSBru1F1H7sN8oVhkptufQG+pgQfISMrKBXMnw= found in database: false
2019-06-03 09:21:15.090 +02:00 [DBG] reference_token grant with value: eyJhbGciOiJSUzI1NiIsImtpZCI6IjkzMjFhZTI1ZWMxODNkMmMyMDQ3YzBhNjc0NDcyNDRhIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NTk1NDY0MDYsImV4cCI6MTU1OTU1MDAwNiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwL3Jlc291cmNlcyIsImNsaWVudF9pZCI6InJvLmNsaWVudCIsInN1YiI6ImU1Yjk5YTQ0LWFhNGQtNGNiOC04NTllLWZkYzg5NmQ5ZGY2YiIsImF1dGhfdGltZSI6MTU1OTU0NjQwNiwiaWRwIjoibG9jYWwiLCJzY29wZSI6WyJvZmZsaW5lX2FjY2VzcyJdLCJhbXIiOlsicHdkIl19.XJ5zQSO2St5EjFQpiDf-Z01ltaMNbqeFtRiY5nTclVTGpIOx2vXtllzIXrlnBgoTnAheKc_e1_ZwKcYmwmGy9FzcP46Qz4SsoowiBUWDPrR5NH-9oy7pkcYz8CSJvWg9Y1WcgBtAeCOrqva3RBt2fcHzMMH_ChpjpRwnr1ouF7s18jBF79ZP3aNfpTy9fGw9ej4wSEF8FLPm15xO6-_0K1Bd08VCm37jDhy9IBj4h6vAE6He3Brpo-xRA-xgniFBu_fkLOGn6HyCJI4Rs8zkrFbGuuy6VaMNn9mXXXbRYGffwIqTj8km2v6tv26sx_OMTeZimFUuOht3fYErI-1EMA not found in store.
2019-06-03 09:21:15.090 +02:00 [INF] No matching token found
2019-06-03 09:23:10.259 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:23:10.264 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:23:10.264 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:23:10.264 +02:00 [DBG] Start token request.
2019-06-03 09:23:10.266 +02:00 [DBG] Start client validation
2019-06-03 09:23:10.309 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:23:10.309 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:23:10.315 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:23:10.315 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:23:10.335 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:23:10.335 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:23:10.335 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:23:10.336 +02:00 [DBG] Client validation success
2019-06-03 09:23:10.336 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000001","TimeStamp":"2019-06-03T07:23:10.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:23:10.336 +02:00 [DBG] Start token request validation
2019-06-03 09:23:10.336 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:23:10.372 +02:00 [DBG] Found ["openid"] identity scopes in database
2019-06-03 09:23:10.385 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:23:10.387 +02:00 [DBG] Found ["openid"] identity scopes in database
2019-06-03 09:23:10.389 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:23:10.403 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:23:10.403 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000001","TimeStamp":"2019-06-03T07:23:10.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:23:10.404 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000001","TimeStamp":"2019-06-03T07:23:10.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:23:10.404 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:23:10.404 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:23:10.404 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:23:10.404 +02:00 [DBG] Getting claims for access token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b
2019-06-03 09:23:10.413 +02:00 [DBG] Creating refresh token
2019-06-03 09:23:10.413 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:23:10.448 +02:00 [DBG] CcdNgtD7/Vrrrb3J3n6ReGcnPkLY8qU3557xcFKhoR8= not found in database
2019-06-03 09:23:10.476 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"openid offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****ee05","$type":"Token"},{"TokenType":"access_token","TokenValue":"****g04g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000001","TimeStamp":"2019-06-03T07:23:10.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:23:10.476 +02:00 [DBG] Token request success.
2019-06-03 09:23:21.631 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:23:21.631 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:23:21.631 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:23:21.632 +02:00 [DBG] Start userinfo request
2019-06-03 09:23:21.632 +02:00 [DBG] Bearer token found in header
2019-06-03 09:23:21.640 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:23:21.641 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:23:21.645 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:23:21.645 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:23:21.649 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:23:21.650 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546590,"exp":1559550190,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546590,"idp":"local","scope":["openid","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:23:21.658 +02:00 [DBG] Creating userinfo response
2019-06-03 09:23:21.661 +02:00 [DBG] Scopes in access token: openid offline_access
2019-06-03 09:23:21.664 +02:00 [DBG] Scopes in access token: openid offline_access
2019-06-03 09:23:21.704 +02:00 [DBG] Found ["openid"] identity scopes in database
2019-06-03 09:23:21.704 +02:00 [DBG] Requested claim types: sub
2019-06-03 09:23:21.704 +02:00 [DBG] Scopes in access token: openid offline_access
2019-06-03 09:23:21.706 +02:00 [DBG] Found ["openid"] identity scopes in database
2019-06-03 09:23:21.711 +02:00 [INF] Profile service returned the following claim types: sub
2019-06-03 09:23:21.711 +02:00 [DBG] End userinfo request
2019-06-03 09:23:48.347 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:23:48.348 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:23:48.348 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:23:48.348 +02:00 [DBG] Start token request.
2019-06-03 09:23:48.348 +02:00 [DBG] Start client validation
2019-06-03 09:23:48.348 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:23:48.348 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:23:48.348 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:23:48.349 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:23:48.370 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:23:48.370 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:23:48.370 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:23:48.370 +02:00 [DBG] Client validation success
2019-06-03 09:23:48.370 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000003","TimeStamp":"2019-06-03T07:23:48.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:23:48.370 +02:00 [DBG] Start token request validation
2019-06-03 09:23:48.370 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:23:48.394 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:23:48.609 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:23:48.613 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:23:48.615 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:23:48.633 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:23:48.634 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000003","TimeStamp":"2019-06-03T07:23:48.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:23:48.634 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000003","TimeStamp":"2019-06-03T07:23:48.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:23:48.634 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:23:48.634 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:23:48.634 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:23:48.634 +02:00 [DBG] Getting claims for access token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b
2019-06-03 09:23:48.645 +02:00 [DBG] Creating refresh token
2019-06-03 09:23:48.645 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:23:48.648 +02:00 [DBG] F784p21pKi+VTXcLa/YMSR7WDiYo5Vlk2l6OX73uyAM= not found in database
2019-06-03 09:23:48.651 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****31f8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****eRkg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000003","TimeStamp":"2019-06-03T07:23:48.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:23:48.651 +02:00 [DBG] Token request success.
2019-06-03 09:24:02.878 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:24:02.878 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:24:02.878 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:24:02.878 +02:00 [DBG] Start userinfo request
2019-06-03 09:24:02.878 +02:00 [DBG] Bearer token found in header
2019-06-03 09:24:02.885 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:02.885 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:02.889 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:02.889 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:02.893 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:24:02.893 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546628,"exp":1559550228,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546628,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:24:02.894 +02:00 [DBG] Creating userinfo response
2019-06-03 09:24:02.894 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:02.894 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:02.912 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:02.912 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:24:02.912 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:02.914 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:02.917 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:24:02.918 +02:00 [DBG] End userinfo request
2019-06-03 09:24:22.781 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:24:22.782 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:24:22.782 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:24:22.782 +02:00 [DBG] Start userinfo request
2019-06-03 09:24:22.782 +02:00 [DBG] Bearer token found in header
2019-06-03 09:24:22.792 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:22.792 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:22.796 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:22.796 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:22.800 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:24:22.800 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546628,"exp":1559550228,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546628,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:24:22.800 +02:00 [DBG] Creating userinfo response
2019-06-03 09:24:22.800 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:22.800 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:22.802 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:22.802 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:24:22.802 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:22.803 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:22.807 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:24:22.807 +02:00 [DBG] End userinfo request
2019-06-03 09:24:23.482 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:24:23.482 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:24:23.482 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:24:23.482 +02:00 [DBG] Start userinfo request
2019-06-03 09:24:23.482 +02:00 [DBG] Bearer token found in header
2019-06-03 09:24:23.488 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:23.489 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:23.493 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:23.493 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:23.497 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:24:23.497 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546628,"exp":1559550228,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546628,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:24:23.497 +02:00 [DBG] Creating userinfo response
2019-06-03 09:24:23.497 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:23.497 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:23.499 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:23.499 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:24:23.499 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:23.502 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:23.505 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:24:23.506 +02:00 [DBG] End userinfo request
2019-06-03 09:24:23.983 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:24:23.984 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:24:23.984 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:24:23.984 +02:00 [DBG] Start userinfo request
2019-06-03 09:24:23.984 +02:00 [DBG] Bearer token found in header
2019-06-03 09:24:23.991 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:23.991 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:23.995 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:23.995 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:23.999 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:24:23.999 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546628,"exp":1559550228,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546628,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:24:23.999 +02:00 [DBG] Creating userinfo response
2019-06-03 09:24:24.000 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:24.000 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:24.002 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:24.002 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:24:24.002 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:24.004 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:24.008 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:24:24.008 +02:00 [DBG] End userinfo request
2019-06-03 09:24:41.764 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:24:41.764 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:24:41.764 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:24:41.764 +02:00 [DBG] Start revocation request.
2019-06-03 09:24:41.764 +02:00 [DBG] Start client validation
2019-06-03 09:24:41.765 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:24:41.765 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:24:41.765 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:24:41.765 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:24:41.769 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:41.769 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:41.769 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:24:41.769 +02:00 [DBG] Client validation success
2019-06-03 09:24:41.770 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMP:00000008","TimeStamp":"2019-06-03T07:24:41.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:24:41.770 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:24:41.770 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:24:41.771 +02:00 [DBG] eTT5wxirmUHIhMz7GG4795ax9PxmiLu5JVUan0x3YaE= found in database: false
2019-06-03 09:24:41.771 +02:00 [DBG] reference_token grant with value: eyJhbGciOiJSUzI1NiIsImtpZCI6IjkzMjFhZTI1ZWMxODNkMmMyMDQ3YzBhNjc0NDcyNDRhIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NTk1NDY2MjgsImV4cCI6MTU1OTU1MDIyOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwL3Jlc291cmNlcyIsImNsaWVudF9pZCI6InJvLmNsaWVudCIsInN1YiI6ImU1Yjk5YTQ0LWFhNGQtNGNiOC04NTllLWZkYzg5NmQ5ZGY2YiIsImF1dGhfdGltZSI6MTU1OTU0NjYyOCwiaWRwIjoibG9jYWwiLCJzY29wZSI6WyJvcGVuaWQiLCJwcm9maWxlIiwib2ZmbGluZV9hY2Nlc3MiXSwiYW1yIjpbInB3ZCJdfQ.fk2zf7-Lh1Swbt_QK-OZFIIMCn5WXKchp4Lc3ei2OwaJ0IL4k29Z2wwyvhUoRIOaIUbhuIpUFS370n-juSwQSSHQajKtqMXfiZ7r80dC_IYqZEwkp97ugK2XpLxfHIYBdU5LVRpTQ8mYSwZup1rlKP-tY67OWvRyUlLa-LR2WcswH3EW7SjWo7E3kMe-RujcJPGTBglYyYsDZeZXG4E2j_Tm8ffFafWqgxU8NYwzU4xcFbmE-Rv6x-zbDKkNveL9Blh5SV9-aAIqRdJNa22kvHQRLi0IQa8zR9oZ0wxpAy011XSkhln8aGPzm3MB3mNZOnY_JnRpBiraa5ZPmDeRkg not found in store.
2019-06-03 09:24:41.771 +02:00 [INF] No matching token found
2019-06-03 09:24:45.762 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:24:45.762 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:24:45.762 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:24:45.762 +02:00 [DBG] Start userinfo request
2019-06-03 09:24:45.762 +02:00 [DBG] Bearer token found in header
2019-06-03 09:24:45.788 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:45.788 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:45.809 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:45.809 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:45.813 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:24:45.813 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546628,"exp":1559550228,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546628,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:24:45.813 +02:00 [DBG] Creating userinfo response
2019-06-03 09:24:45.813 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:45.813 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:45.821 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:45.821 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:24:45.821 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:45.832 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:45.837 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:24:45.837 +02:00 [DBG] End userinfo request
2019-06-03 09:24:46.857 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:24:46.858 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:24:46.858 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:24:46.858 +02:00 [DBG] Start userinfo request
2019-06-03 09:24:46.858 +02:00 [DBG] Bearer token found in header
2019-06-03 09:24:46.883 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:46.883 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:46.902 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:46.903 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:46.906 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:24:46.906 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546628,"exp":1559550228,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546628,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:24:46.906 +02:00 [DBG] Creating userinfo response
2019-06-03 09:24:46.906 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:46.906 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:46.913 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:46.914 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:24:46.914 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:46.917 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:46.925 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:24:46.925 +02:00 [DBG] End userinfo request
2019-06-03 09:24:47.595 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:24:47.595 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:24:47.595 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:24:47.596 +02:00 [DBG] Start userinfo request
2019-06-03 09:24:47.596 +02:00 [DBG] Bearer token found in header
2019-06-03 09:24:47.614 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:47.614 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:47.619 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:24:47.619 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:24:47.622 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:24:47.622 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546628,"exp":1559550228,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546628,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:24:47.622 +02:00 [DBG] Creating userinfo response
2019-06-03 09:24:47.623 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:47.623 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:47.628 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:47.628 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:24:47.628 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:24:47.630 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:24:47.635 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:24:47.635 +02:00 [DBG] End userinfo request
2019-06-03 09:25:56.209 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:25:56.209 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:25:56.209 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:25:56.209 +02:00 [DBG] Start revocation request.
2019-06-03 09:25:56.209 +02:00 [DBG] Start client validation
2019-06-03 09:25:56.209 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:25:56.209 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:25:56.210 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:25:56.210 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:25:56.244 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:25:56.244 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:25:56.244 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:25:56.244 +02:00 [DBG] Client validation success
2019-06-03 09:25:56.245 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000001","TimeStamp":"2019-06-03T07:25:56.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:25:56.245 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:25:56.245 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:25:56.247 +02:00 [DBG] eTT5wxirmUHIhMz7GG4795ax9PxmiLu5JVUan0x3YaE= found in database: false
2019-06-03 09:25:56.247 +02:00 [DBG] reference_token grant with value: eyJhbGciOiJSUzI1NiIsImtpZCI6IjkzMjFhZTI1ZWMxODNkMmMyMDQ3YzBhNjc0NDcyNDRhIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NTk1NDY2MjgsImV4cCI6MTU1OTU1MDIyOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwL3Jlc291cmNlcyIsImNsaWVudF9pZCI6InJvLmNsaWVudCIsInN1YiI6ImU1Yjk5YTQ0LWFhNGQtNGNiOC04NTllLWZkYzg5NmQ5ZGY2YiIsImF1dGhfdGltZSI6MTU1OTU0NjYyOCwiaWRwIjoibG9jYWwiLCJzY29wZSI6WyJvcGVuaWQiLCJwcm9maWxlIiwib2ZmbGluZV9hY2Nlc3MiXSwiYW1yIjpbInB3ZCJdfQ.fk2zf7-Lh1Swbt_QK-OZFIIMCn5WXKchp4Lc3ei2OwaJ0IL4k29Z2wwyvhUoRIOaIUbhuIpUFS370n-juSwQSSHQajKtqMXfiZ7r80dC_IYqZEwkp97ugK2XpLxfHIYBdU5LVRpTQ8mYSwZup1rlKP-tY67OWvRyUlLa-LR2WcswH3EW7SjWo7E3kMe-RujcJPGTBglYyYsDZeZXG4E2j_Tm8ffFafWqgxU8NYwzU4xcFbmE-Rv6x-zbDKkNveL9Blh5SV9-aAIqRdJNa22kvHQRLi0IQa8zR9oZ0wxpAy011XSkhln8aGPzm3MB3mNZOnY_JnRpBiraa5ZPmDeRkg not found in store.
2019-06-03 09:25:56.247 +02:00 [INF] No matching token found
2019-06-03 09:25:57.265 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:25:57.265 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:25:57.265 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:25:57.265 +02:00 [DBG] Start revocation request.
2019-06-03 09:25:57.265 +02:00 [DBG] Start client validation
2019-06-03 09:25:57.265 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:25:57.265 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:25:57.266 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:25:57.266 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:25:57.284 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:25:57.284 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:25:57.284 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:25:57.284 +02:00 [DBG] Client validation success
2019-06-03 09:25:57.284 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000002","TimeStamp":"2019-06-03T07:25:57.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:25:57.284 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:25:57.284 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:25:57.286 +02:00 [DBG] eTT5wxirmUHIhMz7GG4795ax9PxmiLu5JVUan0x3YaE= found in database: false
2019-06-03 09:25:57.286 +02:00 [DBG] reference_token grant with value: eyJhbGciOiJSUzI1NiIsImtpZCI6IjkzMjFhZTI1ZWMxODNkMmMyMDQ3YzBhNjc0NDcyNDRhIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NTk1NDY2MjgsImV4cCI6MTU1OTU1MDIyOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwL3Jlc291cmNlcyIsImNsaWVudF9pZCI6InJvLmNsaWVudCIsInN1YiI6ImU1Yjk5YTQ0LWFhNGQtNGNiOC04NTllLWZkYzg5NmQ5ZGY2YiIsImF1dGhfdGltZSI6MTU1OTU0NjYyOCwiaWRwIjoibG9jYWwiLCJzY29wZSI6WyJvcGVuaWQiLCJwcm9maWxlIiwib2ZmbGluZV9hY2Nlc3MiXSwiYW1yIjpbInB3ZCJdfQ.fk2zf7-Lh1Swbt_QK-OZFIIMCn5WXKchp4Lc3ei2OwaJ0IL4k29Z2wwyvhUoRIOaIUbhuIpUFS370n-juSwQSSHQajKtqMXfiZ7r80dC_IYqZEwkp97ugK2XpLxfHIYBdU5LVRpTQ8mYSwZup1rlKP-tY67OWvRyUlLa-LR2WcswH3EW7SjWo7E3kMe-RujcJPGTBglYyYsDZeZXG4E2j_Tm8ffFafWqgxU8NYwzU4xcFbmE-Rv6x-zbDKkNveL9Blh5SV9-aAIqRdJNa22kvHQRLi0IQa8zR9oZ0wxpAy011XSkhln8aGPzm3MB3mNZOnY_JnRpBiraa5ZPmDeRkg not found in store.
2019-06-03 09:25:57.286 +02:00 [INF] No matching token found
2019-06-03 09:26:01.027 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:26:01.028 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:26:01.028 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:26:01.028 +02:00 [DBG] Start revocation request.
2019-06-03 09:26:01.028 +02:00 [DBG] Start client validation
2019-06-03 09:26:01.028 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:26:01.028 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:26:01.028 +02:00 [DBG] No secret in post body found
2019-06-03 09:26:01.029 +02:00 [DBG] Parser found no secret
2019-06-03 09:26:01.029 +02:00 [INF] {"ClientId":"unknown","Category":"Authentication","Name":"Client Authentication Failure","EventType":"Failure","Id":1011,"Message":"No client id found","ActivityId":"0HLN7UFHO3SMQ:00000003","TimeStamp":"2019-06-03T07:26:01.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationFailureEvent"}
2019-06-03 09:26:01.029 +02:00 [ERR] No client identifier found
2019-06-03 09:26:04.037 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:26:04.037 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:26:04.037 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:26:04.037 +02:00 [DBG] Start revocation request.
2019-06-03 09:26:04.037 +02:00 [DBG] Start client validation
2019-06-03 09:26:04.037 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:26:04.038 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:26:04.038 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:26:04.038 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:26:04.042 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:26:04.043 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:26:04.043 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:26:04.043 +02:00 [DBG] Client validation success
2019-06-03 09:26:04.043 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000004","TimeStamp":"2019-06-03T07:26:04.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:26:04.043 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:26:04.043 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:26:04.044 +02:00 [DBG] eTT5wxirmUHIhMz7GG4795ax9PxmiLu5JVUan0x3YaE= found in database: false
2019-06-03 09:26:04.044 +02:00 [DBG] reference_token grant with value: eyJhbGciOiJSUzI1NiIsImtpZCI6IjkzMjFhZTI1ZWMxODNkMmMyMDQ3YzBhNjc0NDcyNDRhIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NTk1NDY2MjgsImV4cCI6MTU1OTU1MDIyOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwL3Jlc291cmNlcyIsImNsaWVudF9pZCI6InJvLmNsaWVudCIsInN1YiI6ImU1Yjk5YTQ0LWFhNGQtNGNiOC04NTllLWZkYzg5NmQ5ZGY2YiIsImF1dGhfdGltZSI6MTU1OTU0NjYyOCwiaWRwIjoibG9jYWwiLCJzY29wZSI6WyJvcGVuaWQiLCJwcm9maWxlIiwib2ZmbGluZV9hY2Nlc3MiXSwiYW1yIjpbInB3ZCJdfQ.fk2zf7-Lh1Swbt_QK-OZFIIMCn5WXKchp4Lc3ei2OwaJ0IL4k29Z2wwyvhUoRIOaIUbhuIpUFS370n-juSwQSSHQajKtqMXfiZ7r80dC_IYqZEwkp97ugK2XpLxfHIYBdU5LVRpTQ8mYSwZup1rlKP-tY67OWvRyUlLa-LR2WcswH3EW7SjWo7E3kMe-RujcJPGTBglYyYsDZeZXG4E2j_Tm8ffFafWqgxU8NYwzU4xcFbmE-Rv6x-zbDKkNveL9Blh5SV9-aAIqRdJNa22kvHQRLi0IQa8zR9oZ0wxpAy011XSkhln8aGPzm3MB3mNZOnY_JnRpBiraa5ZPmDeRkg not found in store.
2019-06-03 09:26:04.044 +02:00 [INF] No matching token found
2019-06-03 09:26:08.237 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:26:08.237 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:26:08.237 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:26:08.237 +02:00 [DBG] Start token request.
2019-06-03 09:26:08.237 +02:00 [DBG] Start client validation
2019-06-03 09:26:08.237 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:26:08.237 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:26:08.238 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:26:08.238 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:26:08.242 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:26:08.242 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:26:08.242 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:26:08.242 +02:00 [DBG] Client validation success
2019-06-03 09:26:08.242 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000005","TimeStamp":"2019-06-03T07:26:08.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:26:08.242 +02:00 [DBG] Start token request validation
2019-06-03 09:26:08.242 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:26:08.252 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:26:08.256 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:26:08.258 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:26:08.259 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:26:08.270 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:26:08.270 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000005","TimeStamp":"2019-06-03T07:26:08.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:26:08.271 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000005","TimeStamp":"2019-06-03T07:26:08.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:26:08.271 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:26:08.271 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:26:08.271 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:26:08.271 +02:00 [DBG] Getting claims for access token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b
2019-06-03 09:26:08.280 +02:00 [DBG] Creating refresh token
2019-06-03 09:26:08.281 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:26:08.283 +02:00 [DBG] PAkgtZQgPF7LZXyBNXm41W0sW5+daRjW3X3AsyGaxKM= not found in database
2019-06-03 09:26:08.309 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****7dad","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zTbQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000005","TimeStamp":"2019-06-03T07:26:08.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:26:08.309 +02:00 [DBG] Token request success.
2019-06-03 09:26:28.625 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:26:28.626 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:26:28.626 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:26:28.626 +02:00 [DBG] Start revocation request.
2019-06-03 09:26:28.626 +02:00 [DBG] Start client validation
2019-06-03 09:26:28.626 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:26:28.626 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:26:28.626 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:26:28.626 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:26:28.631 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:26:28.631 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:26:28.631 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:26:28.631 +02:00 [DBG] Client validation success
2019-06-03 09:26:28.631 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000006","TimeStamp":"2019-06-03T07:26:28.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:26:28.631 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:26:28.632 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:26:28.633 +02:00 [DBG] vve0f1+BQn6MpmzGPBraQnN47zMLS5+RPEQpC+uYjlo= found in database: false
2019-06-03 09:26:28.633 +02:00 [DBG] reference_token grant with value: eyJhbGciOiJSUzI1NiIsImtpZCI6IjkzMjFhZTI1ZWMxODNkMmMyMDQ3YzBhNjc0NDcyNDRhIiwidHlwIjoiSldUIn0.eyJuYmYiOjE1NTk1NDY3NjgsImV4cCI6MTU1OTU1MDM2OCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwIiwiYXVkIjoiaHR0cDovL2xvY2FsaG9zdDo1MDAwL3Jlc291cmNlcyIsImNsaWVudF9pZCI6InJvLmNsaWVudCIsInN1YiI6ImU1Yjk5YTQ0LWFhNGQtNGNiOC04NTllLWZkYzg5NmQ5ZGY2YiIsImF1dGhfdGltZSI6MTU1OTU0Njc2OCwiaWRwIjoibG9jYWwiLCJzY29wZSI6WyJvcGVuaWQiLCJwcm9maWxlIiwib2ZmbGluZV9hY2Nlc3MiXSwiYW1yIjpbInB3ZCJdfQ.Z_Z3ikh-HpnQrIv7-kQCbzmrT9Cs2WhUxz1U0Bd0C86IOf_vAtseJ95RBHjZapl6FR7I8ryohuhvsH-YpvlhhQ7hjcIS5GGlosO2kQ7b-ySk2d6Zk-K8Kir8kTAGACYK6-SHrWUjwTjaMxEYhkSRVfg1A6Sws67LdioRyrhCl0IoV8XtCoj6c7lBRszUdTZRHNPO2xNWBCzwlSJnT4HvfyPh11ytTw0kQOkiXddAiDDZQR4LGuiEA_Tm5mH7WAbZ4SB9xq5Pgyq8AntEvdpisAF8EPmz1kba34U7HqLCAZzYRGU5Pu9RYnIOgLC7EmoX6WOEPfOQr7oQdiDgI3zTbQ not found in store.
2019-06-03 09:26:28.633 +02:00 [INF] No matching token found
2019-06-03 09:26:37.789 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:26:37.789 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:26:37.789 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:26:37.789 +02:00 [DBG] Start userinfo request
2019-06-03 09:26:37.789 +02:00 [DBG] Bearer token found in header
2019-06-03 09:26:37.796 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:26:37.796 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:26:37.799 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:26:37.799 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:26:37.803 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:26:37.803 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546768,"exp":1559550368,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546768,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:26:37.803 +02:00 [DBG] Creating userinfo response
2019-06-03 09:26:37.803 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:26:37.803 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:26:37.811 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:26:37.811 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:26:37.811 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:26:37.812 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:26:37.816 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:26:37.816 +02:00 [DBG] End userinfo request
2019-06-03 09:26:48.715 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:26:48.716 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:26:48.716 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:26:48.716 +02:00 [DBG] Start token request.
2019-06-03 09:26:48.716 +02:00 [DBG] Start client validation
2019-06-03 09:26:48.716 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:26:48.716 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:26:48.716 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:26:48.716 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:26:48.720 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:26:48.720 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:26:48.721 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:26:48.721 +02:00 [DBG] Client validation success
2019-06-03 09:26:48.721 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000008","TimeStamp":"2019-06-03T07:26:48.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:26:48.721 +02:00 [DBG] Start token request validation
2019-06-03 09:26:48.725 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:26:48.735 +02:00 [DBG] PAkgtZQgPF7LZXyBNXm41W0sW5+daRjW3X3AsyGaxKM= found in database: true
2019-06-03 09:26:48.749 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","client_id":"ro.client","scope":["openid","profile","offline_access"],"auth_time":1559546768,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:26:48.752 +02:00 [DBG] Validation of refresh token request success
2019-06-03 09:26:48.752 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"2d956632e579ee5084de3242fb8b2e53666f2c6fc8c630c8673cdc03deef7dad","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:26:48.763 +02:00 [DBG] Updating refresh token
2019-06-03 09:26:48.763 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-06-03 09:26:48.771 +02:00 [DBG] removing PAkgtZQgPF7LZXyBNXm41W0sW5+daRjW3X3AsyGaxKM= persisted grant from database
2019-06-03 09:26:48.775 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-06-03 09:26:48.775 +02:00 [DBG] Current lifetime: 40
2019-06-03 09:26:48.775 +02:00 [DBG] New lifetime: 1296040
2019-06-03 09:26:48.776 +02:00 [DBG] tGt4PMgxNvYr3z44iGcNwlDqQlkifmGW1RAcKK+vjWE= not found in database
2019-06-03 09:26:48.777 +02:00 [DBG] Created refresh token in store
2019-06-03 09:26:48.783 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:26:48.787 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:26:48.789 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:26:48.790 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:26:48.797 +02:00 [DBG] Getting claims for identity token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b and client: ro.client
2019-06-03 09:26:48.797 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-03 09:26:48.800 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"openid profile offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"id_token","TokenValue":"****JpDw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****e8c1","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2sCw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000008","TimeStamp":"2019-06-03T07:26:48.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:26:48.800 +02:00 [DBG] Token request success.
2019-06-03 09:27:14.226 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:27:14.226 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:27:14.227 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:27:14.227 +02:00 [DBG] Start token request.
2019-06-03 09:27:14.227 +02:00 [DBG] Start client validation
2019-06-03 09:27:14.227 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:27:14.227 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:27:14.227 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:27:14.227 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:27:14.250 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:27:14.251 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:27:14.251 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:27:14.251 +02:00 [DBG] Client validation success
2019-06-03 09:27:14.251 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000009","TimeStamp":"2019-06-03T07:27:14.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:27:14.251 +02:00 [DBG] Start token request validation
2019-06-03 09:27:14.251 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:27:14.260 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:27:14.266 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:27:14.268 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:27:14.268 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:27:14.278 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:27:14.278 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000009","TimeStamp":"2019-06-03T07:27:14.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:27:14.279 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000009","TimeStamp":"2019-06-03T07:27:14.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:27:14.279 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:27:14.279 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:27:14.279 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:27:14.279 +02:00 [DBG] Getting claims for access token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b
2019-06-03 09:27:14.286 +02:00 [DBG] Creating refresh token
2019-06-03 09:27:14.286 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:27:14.289 +02:00 [DBG] j4/ez17PZulRiypRfO28otYPvBmIs9kIDwkMcYH0c34= not found in database
2019-06-03 09:27:14.292 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3349","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YqRQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000009","TimeStamp":"2019-06-03T07:27:14.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:27:14.293 +02:00 [DBG] Token request success.
2019-06-03 09:27:19.476 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:27:19.476 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:27:19.477 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:27:19.477 +02:00 [DBG] Start token request.
2019-06-03 09:27:19.477 +02:00 [DBG] Start client validation
2019-06-03 09:27:19.477 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:27:19.477 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:27:19.477 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:27:19.477 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:27:19.481 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:27:19.481 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:27:19.481 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:27:19.482 +02:00 [DBG] Client validation success
2019-06-03 09:27:19.482 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000A","TimeStamp":"2019-06-03T07:27:19.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:27:19.482 +02:00 [DBG] Start token request validation
2019-06-03 09:27:19.482 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:27:19.523 +02:00 [DBG] Found ["profile"] identity scopes in database
2019-06-03 09:27:19.526 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:27:19.527 +02:00 [DBG] Found ["profile"] identity scopes in database
2019-06-03 09:27:19.528 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:27:19.537 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:27:19.538 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000A","TimeStamp":"2019-06-03T07:27:19.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:27:19.538 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000A","TimeStamp":"2019-06-03T07:27:19.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:27:19.538 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:27:19.538 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:27:19.538 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:27:19.538 +02:00 [DBG] Getting claims for access token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b
2019-06-03 09:27:19.544 +02:00 [DBG] Creating refresh token
2019-06-03 09:27:19.544 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:27:19.545 +02:00 [DBG] B8UImYN+zsz/BeWcTdn9N1u0/UeNQMUrCQCxNHdEYQg= not found in database
2019-06-03 09:27:19.547 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****9ee2","$type":"Token"},{"TokenType":"access_token","TokenValue":"****D_cQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000A","TimeStamp":"2019-06-03T07:27:19.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:27:19.547 +02:00 [DBG] Token request success.
2019-06-03 09:27:48.732 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:27:48.732 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:27:48.732 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:27:48.732 +02:00 [DBG] Start userinfo request
2019-06-03 09:27:48.732 +02:00 [DBG] Bearer token found in header
2019-06-03 09:27:48.739 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:27:48.739 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:27:48.742 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:27:48.743 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:27:48.747 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546839,"exp":1559550439,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546839,"idp":"local","scope":["profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:28:02.933 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:28:02.934 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:28:02.934 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:28:02.934 +02:00 [DBG] Start userinfo request
2019-06-03 09:28:02.934 +02:00 [DBG] Bearer token found in header
2019-06-03 09:28:02.955 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:02.955 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:02.959 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:02.959 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:02.962 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546839,"exp":1559550439,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546839,"idp":"local","scope":["profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:28:07.687 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:28:07.687 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:28:07.687 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:28:07.687 +02:00 [DBG] Start token request.
2019-06-03 09:28:07.687 +02:00 [DBG] Start client validation
2019-06-03 09:28:07.687 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:28:07.687 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:28:07.688 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:28:07.688 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:28:07.707 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:07.707 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:07.707 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:28:07.707 +02:00 [DBG] Client validation success
2019-06-03 09:28:07.707 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000D","TimeStamp":"2019-06-03T07:28:07.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:28:07.707 +02:00 [DBG] Start token request validation
2019-06-03 09:28:07.707 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:28:07.715 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:28:07.719 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:28:07.720 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:28:07.721 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:28:07.731 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:28:07.731 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000D","TimeStamp":"2019-06-03T07:28:07.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:28:07.731 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000D","TimeStamp":"2019-06-03T07:28:07.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:28:07.731 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:28:07.731 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:28:07.731 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:28:07.731 +02:00 [DBG] Getting claims for access token for subject: e5b99a44-aa4d-4cb8-859e-fdc896d9df6b
2019-06-03 09:28:07.739 +02:00 [DBG] Creating refresh token
2019-06-03 09:28:07.739 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:28:07.741 +02:00 [DBG] 8TMVVQTKqEl4h6MjvknPU9pwq+WHEG3ZOnt9MZUShkg= not found in database
2019-06-03 09:28:07.778 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****c9d0","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Fbww","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000D","TimeStamp":"2019-06-03T07:28:07.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:28:07.778 +02:00 [DBG] Token request success.
2019-06-03 09:28:22.992 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:28:22.992 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:28:22.992 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:28:22.992 +02:00 [DBG] Start userinfo request
2019-06-03 09:28:22.992 +02:00 [DBG] Bearer token found in header
2019-06-03 09:28:22.999 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:22.999 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:23.002 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:23.003 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:23.006 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:28:23.006 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546887,"exp":1559550487,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546887,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:28:23.007 +02:00 [DBG] Creating userinfo response
2019-06-03 09:28:23.007 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:28:23.007 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:28:23.014 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:28:23.014 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:28:23.014 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:28:23.015 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:28:23.019 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:28:23.019 +02:00 [DBG] End userinfo request
2019-06-03 09:28:43.760 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:28:43.761 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:28:43.761 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:28:43.761 +02:00 [DBG] Start revocation request.
2019-06-03 09:28:43.761 +02:00 [DBG] Start client validation
2019-06-03 09:28:43.761 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:28:43.761 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:28:43.761 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:28:43.762 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:28:43.766 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:43.766 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:43.766 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:28:43.766 +02:00 [DBG] Client validation success
2019-06-03 09:28:43.767 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000F","TimeStamp":"2019-06-03T07:28:43.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:28:43.767 +02:00 [DBG] Token type hint found in request: refresh_token
2019-06-03 09:28:43.767 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:28:43.768 +02:00 [DBG] 8TMVVQTKqEl4h6MjvknPU9pwq+WHEG3ZOnt9MZUShkg= found in database: true
2019-06-03 09:28:43.769 +02:00 [DBG] Refresh token revoked
2019-06-03 09:28:43.769 +02:00 [DBG] removing 8TMVVQTKqEl4h6MjvknPU9pwq+WHEG3ZOnt9MZUShkg= persisted grant from database
2019-06-03 09:28:43.875 +02:00 [DBG] removing 0 persisted grants from database for subject e5b99a44-aa4d-4cb8-859e-fdc896d9df6b, clientId ro.client, grantType reference_token
2019-06-03 09:28:43.876 +02:00 [INF] Token successfully revoked
2019-06-03 09:28:43.877 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"TokenType":"refresh_token","Token":"****c9d0","Category":"Token","Name":"Token Revoked Success","EventType":"Success","Id":2010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:0000000F","TimeStamp":"2019-06-03T07:28:43.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenRevokedSuccessEvent"}
2019-06-03 09:28:46.364 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:28:46.364 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:28:46.364 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:28:46.364 +02:00 [DBG] Start revocation request.
2019-06-03 09:28:46.364 +02:00 [DBG] Start client validation
2019-06-03 09:28:46.364 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:28:46.364 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:28:46.364 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:28:46.364 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:28:46.369 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:46.369 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:46.369 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:28:46.369 +02:00 [DBG] Client validation success
2019-06-03 09:28:46.369 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000010","TimeStamp":"2019-06-03T07:28:46.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:28:46.369 +02:00 [DBG] Token type hint found in request: refresh_token
2019-06-03 09:28:46.369 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:28:46.370 +02:00 [DBG] 8TMVVQTKqEl4h6MjvknPU9pwq+WHEG3ZOnt9MZUShkg= found in database: false
2019-06-03 09:28:46.370 +02:00 [DBG] refresh_token grant with value: b670f39bd78deab27b46b5befdaeec8ec7b729f98e25de53413b7da0fbb8c9d0 not found in store.
2019-06-03 09:28:46.370 +02:00 [INF] No matching token found
2019-06-03 09:28:48.064 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:28:48.064 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:28:48.064 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:28:48.064 +02:00 [DBG] Start revocation request.
2019-06-03 09:28:48.064 +02:00 [DBG] Start client validation
2019-06-03 09:28:48.064 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:28:48.064 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:28:48.065 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:28:48.065 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:28:48.069 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:48.069 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:48.069 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:28:48.069 +02:00 [DBG] Client validation success
2019-06-03 09:28:48.069 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000011","TimeStamp":"2019-06-03T07:28:48.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:28:48.070 +02:00 [DBG] Token type hint found in request: refresh_token
2019-06-03 09:28:48.070 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:28:48.071 +02:00 [DBG] 8TMVVQTKqEl4h6MjvknPU9pwq+WHEG3ZOnt9MZUShkg= found in database: false
2019-06-03 09:28:48.071 +02:00 [DBG] refresh_token grant with value: b670f39bd78deab27b46b5befdaeec8ec7b729f98e25de53413b7da0fbb8c9d0 not found in store.
2019-06-03 09:28:48.071 +02:00 [INF] No matching token found
2019-06-03 09:28:52.638 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:28:52.639 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:28:52.639 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:28:52.639 +02:00 [DBG] Start token request.
2019-06-03 09:28:52.639 +02:00 [DBG] Start client validation
2019-06-03 09:28:52.639 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:28:52.639 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:28:52.639 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:28:52.639 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:28:52.643 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:52.643 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:52.643 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:28:52.643 +02:00 [DBG] Client validation success
2019-06-03 09:28:52.643 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000012","TimeStamp":"2019-06-03T07:28:52.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:28:52.643 +02:00 [DBG] Start token request validation
2019-06-03 09:28:52.644 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:28:52.644 +02:00 [DBG] 8TMVVQTKqEl4h6MjvknPU9pwq+WHEG3ZOnt9MZUShkg= found in database: false
2019-06-03 09:28:52.644 +02:00 [DBG] refresh_token grant with value: b670f39bd78deab27b46b5befdaeec8ec7b729f98e25de53413b7da0fbb8c9d0 not found in store.
2019-06-03 09:28:52.645 +02:00 [WRN] Invalid refresh token
2019-06-03 09:28:52.645 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:28:52.646 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7UFHO3SMQ:00000012","TimeStamp":"2019-06-03T07:28:52.0000000Z","ProcessId":26380,"LocalIpAddress":"127.0.0.1:27029","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 09:28:56.343 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:28:56.343 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:28:56.344 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:28:56.344 +02:00 [DBG] Start userinfo request
2019-06-03 09:28:56.344 +02:00 [DBG] Bearer token found in header
2019-06-03 09:28:56.350 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:56.350 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:56.353 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:28:56.354 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:28:56.357 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:28:56.357 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559546887,"exp":1559550487,"iss":"http://localhost:5000","aud":"http://localhost:5000/resources","client_id":"ro.client","sub":"e5b99a44-aa4d-4cb8-859e-fdc896d9df6b","auth_time":1559546887,"idp":"local","scope":["openid","profile","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:28:56.357 +02:00 [DBG] Creating userinfo response
2019-06-03 09:28:56.357 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:28:56.357 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:28:56.360 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:28:56.360 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:28:56.360 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:28:56.362 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:28:56.366 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:28:56.366 +02:00 [DBG] End userinfo request
2019-06-03 09:42:37.068 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 09:42:37.107 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 09:42:37.107 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 09:42:37.107 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 09:42:37.107 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 09:42:37.107 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 09:42:37.107 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 09:42:37.207 +02:00 [DBG] Starting grant removal
2019-06-03 09:42:37.585 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 09:42:37.586 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 09:42:37.586 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 09:42:37.587 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 09:42:37.587 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 09:42:37.587 +02:00 [DBG] Error Url: /home/error
2019-06-03 09:42:37.587 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 09:42:44.115 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:42:44.125 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:42:44.126 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:42:44.133 +02:00 [DBG] Start token request.
2019-06-03 09:42:44.138 +02:00 [DBG] Start client validation
2019-06-03 09:42:44.142 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:42:44.145 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:42:44.158 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:42:44.158 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:42:44.345 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:42:44.354 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:42:44.361 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:42:44.361 +02:00 [DBG] Client validation success
2019-06-03 09:42:44.379 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000002","TimeStamp":"2019-06-03T07:42:44.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:42:44.393 +02:00 [DBG] Start token request validation
2019-06-03 09:42:44.406 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:42:44.454 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:42:44.517 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:42:44.526 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:42:44.528 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:42:44.565 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:42:44.566 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000002","TimeStamp":"2019-06-03T07:42:44.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:42:44.573 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000002","TimeStamp":"2019-06-03T07:42:44.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:42:44.573 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:42:44.581 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:42:44.606 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:42:44.606 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:42:44.723 +02:00 [DBG] 8GLpyhS8aH2JZbFQp69v1o90KEVm5/8CB+uyLm4sf14= not found in database
2019-06-03 09:42:44.761 +02:00 [DBG] Creating refresh token
2019-06-03 09:42:44.761 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:42:44.765 +02:00 [DBG] sVbwy2eXjMqTBRDOH4qr0lFyJyuJgi1WKMaOtbb4Nn8= not found in database
2019-06-03 09:42:44.800 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****467b","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fe11","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000002","TimeStamp":"2019-06-03T07:42:44.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:42:44.801 +02:00 [DBG] Token request success.
2019-06-03 09:43:11.941 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:43:11.943 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:43:11.943 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:43:11.950 +02:00 [DBG] Start userinfo request
2019-06-03 09:43:11.953 +02:00 [DBG] Bearer token found in header
2019-06-03 09:43:11.981 +02:00 [DBG] 8GLpyhS8aH2JZbFQp69v1o90KEVm5/8CB+uyLm4sf14= found in database: true
2019-06-03 09:43:11.992 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:43:11.992 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:43:11.998 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:43:11.998 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:43:12.011 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:43:12.013 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"f59e2e387c129fc10aa94761d3bbac2de55b29152d868160f2ebdd21beddfe11","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559547764,"exp":1559551364,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559547764,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:43:12.021 +02:00 [DBG] Creating userinfo response
2019-06-03 09:43:12.024 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:43:12.026 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:43:12.034 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:43:12.034 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:43:12.034 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:43:12.036 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:43:12.042 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:43:12.042 +02:00 [DBG] End userinfo request
2019-06-03 09:43:32.002 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:43:32.003 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:43:32.004 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:43:32.011 +02:00 [DBG] Start revocation request.
2019-06-03 09:43:32.011 +02:00 [DBG] Start client validation
2019-06-03 09:43:32.011 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:43:32.011 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:43:32.012 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:43:32.012 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:43:32.017 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:43:32.017 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:43:32.017 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:43:32.017 +02:00 [DBG] Client validation success
2019-06-03 09:43:32.017 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000003","TimeStamp":"2019-06-03T07:43:32.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:43:32.019 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:43:32.019 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:43:32.027 +02:00 [DBG] 8GLpyhS8aH2JZbFQp69v1o90KEVm5/8CB+uyLm4sf14= found in database: true
2019-06-03 09:43:32.027 +02:00 [DBG] Access token revoked
2019-06-03 09:43:32.034 +02:00 [DBG] removing 8GLpyhS8aH2JZbFQp69v1o90KEVm5/8CB+uyLm4sf14= persisted grant from database
2019-06-03 09:43:32.039 +02:00 [INF] Token successfully revoked
2019-06-03 09:43:32.040 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"TokenType":"access_token","Token":"****fe11","Category":"Token","Name":"Token Revoked Success","EventType":"Success","Id":2010,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000003","TimeStamp":"2019-06-03T07:43:32.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenRevokedSuccessEvent"}
2019-06-03 09:43:34.391 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:43:34.391 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:43:34.391 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:43:34.391 +02:00 [DBG] Start userinfo request
2019-06-03 09:43:34.391 +02:00 [DBG] Bearer token found in header
2019-06-03 09:43:34.392 +02:00 [DBG] 8GLpyhS8aH2JZbFQp69v1o90KEVm5/8CB+uyLm4sf14= found in database: false
2019-06-03 09:43:34.393 +02:00 [DBG] reference_token grant with value: f59e2e387c129fc10aa94761d3bbac2de55b29152d868160f2ebdd21beddfe11 not found in store.
2019-06-03 09:43:34.393 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"f59e2e387c129fc10aa94761d3bbac2de55b29152d868160f2ebdd21beddfe11","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-03 09:43:35.769 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:43:35.770 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:43:35.770 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:43:35.770 +02:00 [DBG] Start userinfo request
2019-06-03 09:43:35.770 +02:00 [DBG] Bearer token found in header
2019-06-03 09:43:35.771 +02:00 [DBG] 8GLpyhS8aH2JZbFQp69v1o90KEVm5/8CB+uyLm4sf14= found in database: false
2019-06-03 09:43:35.771 +02:00 [DBG] reference_token grant with value: f59e2e387c129fc10aa94761d3bbac2de55b29152d868160f2ebdd21beddfe11 not found in store.
2019-06-03 09:43:35.771 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"f59e2e387c129fc10aa94761d3bbac2de55b29152d868160f2ebdd21beddfe11","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-03 09:43:41.954 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:43:41.955 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:43:41.955 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:43:41.955 +02:00 [DBG] Start token request.
2019-06-03 09:43:41.955 +02:00 [DBG] Start client validation
2019-06-03 09:43:41.955 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:43:41.955 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:43:41.955 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:43:41.955 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:43:41.959 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:43:41.959 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:43:41.959 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:43:41.959 +02:00 [DBG] Client validation success
2019-06-03 09:43:41.960 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000004","TimeStamp":"2019-06-03T07:43:41.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:43:41.960 +02:00 [DBG] Start token request validation
2019-06-03 09:43:41.960 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:43:41.963 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:43:41.965 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:43:41.966 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:43:41.968 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:43:41.980 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:43:41.981 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000004","TimeStamp":"2019-06-03T07:43:41.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:43:41.981 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000004","TimeStamp":"2019-06-03T07:43:41.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:43:41.981 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:43:41.981 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:43:41.981 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:43:41.981 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:43:41.986 +02:00 [DBG] FR2xCDGl+sioq7quDk/iR3S2HzRX8I3M4n9czx95yHo= not found in database
2019-06-03 09:43:41.989 +02:00 [DBG] Creating refresh token
2019-06-03 09:43:41.989 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:43:41.990 +02:00 [DBG] zynq8sXlEEgyUhoWHsDIiVjwNIvMRJF824haTwLV8pI= not found in database
2019-06-03 09:43:41.991 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****455d","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8e86","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000004","TimeStamp":"2019-06-03T07:43:41.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:43:41.991 +02:00 [DBG] Token request success.
2019-06-03 09:43:50.201 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:43:50.201 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:43:50.202 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:43:50.202 +02:00 [DBG] Start token request.
2019-06-03 09:43:50.202 +02:00 [DBG] Start client validation
2019-06-03 09:43:50.202 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:43:50.202 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:43:50.202 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:43:50.202 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:43:50.206 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:43:50.206 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:43:50.207 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:43:50.207 +02:00 [DBG] Client validation success
2019-06-03 09:43:50.207 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000005","TimeStamp":"2019-06-03T07:43:50.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:43:50.207 +02:00 [DBG] Start token request validation
2019-06-03 09:43:50.210 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:43:50.217 +02:00 [DBG] zynq8sXlEEgyUhoWHsDIiVjwNIvMRJF824haTwLV8pI= found in database: true
2019-06-03 09:43:50.226 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","client_id":"ro.client","scope":["openid","profile","offline_access"],"auth_time":1559547821,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:43:50.229 +02:00 [DBG] Validation of refresh token request success
2019-06-03 09:43:50.229 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"4a265cda48353bd9f366562b4123691a32c9db052dd3204bf1d21edd39ee455d","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:43:50.234 +02:00 [DBG] 8tcYyZbTl+Xbf3FQFNs0JPF9OiJGG/PF9OM+BS2tTx8= not found in database
2019-06-03 09:43:50.240 +02:00 [DBG] Updating refresh token
2019-06-03 09:43:50.240 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-06-03 09:43:50.241 +02:00 [DBG] removing zynq8sXlEEgyUhoWHsDIiVjwNIvMRJF824haTwLV8pI= persisted grant from database
2019-06-03 09:43:50.279 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-06-03 09:43:50.280 +02:00 [DBG] Current lifetime: 9
2019-06-03 09:43:50.280 +02:00 [DBG] New lifetime: 1296009
2019-06-03 09:43:50.281 +02:00 [DBG] dRLIQl+TSVmNtvTOGzc/6PTFw4eHFNDQFcSx2ElMO7c= not found in database
2019-06-03 09:43:50.282 +02:00 [DBG] Created refresh token in store
2019-06-03 09:43:50.287 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:43:50.291 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:43:50.293 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:43:50.294 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:43:50.301 +02:00 [DBG] Getting claims for identity token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128 and client: ro.client
2019-06-03 09:43:50.301 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-03 09:43:50.364 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"id_token","TokenValue":"****ENGw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****a4d1","$type":"Token"},{"TokenType":"access_token","TokenValue":"****791e","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000005","TimeStamp":"2019-06-03T07:43:50.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:43:50.364 +02:00 [DBG] Token request success.
2019-06-03 09:44:05.373 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:44:05.373 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:44:05.373 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:44:05.373 +02:00 [DBG] Start userinfo request
2019-06-03 09:44:05.374 +02:00 [DBG] Bearer token found in header
2019-06-03 09:44:05.375 +02:00 [DBG] FR2xCDGl+sioq7quDk/iR3S2HzRX8I3M4n9czx95yHo= found in database: true
2019-06-03 09:44:05.379 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:05.379 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:05.383 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:05.383 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:05.386 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:44:05.389 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"b62139b3c367b9331c3ed856c415a59ec7fa42d11ac688d1d8a34e7688d48e86","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559547821,"exp":1559551421,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559547821,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:44:05.389 +02:00 [DBG] Creating userinfo response
2019-06-03 09:44:05.389 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:05.389 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:05.391 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:05.391 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:44:05.391 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:05.393 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:05.396 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:44:05.396 +02:00 [DBG] End userinfo request
2019-06-03 09:44:06.411 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:44:06.412 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:44:06.412 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:44:06.412 +02:00 [DBG] Start userinfo request
2019-06-03 09:44:06.412 +02:00 [DBG] Bearer token found in header
2019-06-03 09:44:06.413 +02:00 [DBG] FR2xCDGl+sioq7quDk/iR3S2HzRX8I3M4n9czx95yHo= found in database: true
2019-06-03 09:44:06.417 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:06.417 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:06.422 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:06.422 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:06.425 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:44:06.425 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"b62139b3c367b9331c3ed856c415a59ec7fa42d11ac688d1d8a34e7688d48e86","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559547821,"exp":1559551421,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559547821,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:44:06.426 +02:00 [DBG] Creating userinfo response
2019-06-03 09:44:06.426 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:06.426 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:06.428 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:06.428 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:44:06.428 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:06.430 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:06.436 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:44:06.436 +02:00 [DBG] End userinfo request
2019-06-03 09:44:13.350 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:44:13.350 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:44:13.350 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:44:13.350 +02:00 [DBG] Start token request.
2019-06-03 09:44:13.350 +02:00 [DBG] Start client validation
2019-06-03 09:44:13.350 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:44:13.350 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:44:13.351 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:44:13.351 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:44:13.356 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:13.356 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:13.356 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:44:13.356 +02:00 [DBG] Client validation success
2019-06-03 09:44:13.356 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000006","TimeStamp":"2019-06-03T07:44:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:44:13.356 +02:00 [DBG] Start token request validation
2019-06-03 09:44:13.356 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:44:13.357 +02:00 [DBG] zynq8sXlEEgyUhoWHsDIiVjwNIvMRJF824haTwLV8pI= found in database: false
2019-06-03 09:44:13.357 +02:00 [DBG] refresh_token grant with value: 4a265cda48353bd9f366562b4123691a32c9db052dd3204bf1d21edd39ee455d not found in store.
2019-06-03 09:44:13.357 +02:00 [WRN] Invalid refresh token
2019-06-03 09:44:13.357 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:44:13.359 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000006","TimeStamp":"2019-06-03T07:44:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 09:44:19.677 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:44:19.677 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:44:19.677 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:44:19.677 +02:00 [DBG] Start token request.
2019-06-03 09:44:19.677 +02:00 [DBG] Start client validation
2019-06-03 09:44:19.678 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:44:19.678 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:44:19.678 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:44:19.678 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:44:19.682 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:19.682 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:19.682 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:44:19.682 +02:00 [DBG] Client validation success
2019-06-03 09:44:19.682 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000007","TimeStamp":"2019-06-03T07:44:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:44:19.682 +02:00 [DBG] Start token request validation
2019-06-03 09:44:19.682 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:44:19.684 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:19.686 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:44:19.687 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:19.689 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:44:19.699 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:44:19.700 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000007","TimeStamp":"2019-06-03T07:44:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:44:19.700 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000007","TimeStamp":"2019-06-03T07:44:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:44:19.700 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:44:19.700 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:44:19.700 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:44:19.700 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:44:19.710 +02:00 [DBG] iLqPlNC7RFWsgk1tDaiPy02xZTPXODXLtyydZ4vyqnY= not found in database
2019-06-03 09:44:19.724 +02:00 [DBG] Creating refresh token
2019-06-03 09:44:19.724 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:44:19.725 +02:00 [DBG] ThPJhz+/3DL7exEd/rxj/GStKb9ZP2CTGQJvHVyzUYY= not found in database
2019-06-03 09:44:19.728 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****85b9","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2e70","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0H:00000007","TimeStamp":"2019-06-03T07:44:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:44:19.728 +02:00 [DBG] Token request success.
2019-06-03 09:44:28.468 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:44:28.468 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:44:28.468 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:44:28.468 +02:00 [DBG] Start token request.
2019-06-03 09:44:28.468 +02:00 [DBG] Start client validation
2019-06-03 09:44:28.468 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:44:28.468 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:44:28.468 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:44:28.469 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:44:28.473 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:28.473 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:28.473 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:44:28.473 +02:00 [DBG] Client validation success
2019-06-03 09:44:28.473 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000007","TimeStamp":"2019-06-03T07:44:28.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:44:28.473 +02:00 [DBG] Start token request validation
2019-06-03 09:44:28.473 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:44:28.474 +02:00 [DBG] ThPJhz+/3DL7exEd/rxj/GStKb9ZP2CTGQJvHVyzUYY= found in database: true
2019-06-03 09:44:28.478 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","client_id":"ro.client","scope":["openid","profile","offline_access"],"auth_time":1559547859,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:44:28.478 +02:00 [DBG] Validation of refresh token request success
2019-06-03 09:44:28.478 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"d6c70b87e96a00b499e4a3fb57b207d2aa096660ccde78001f35b16ab8b385b9","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:44:28.479 +02:00 [DBG] vdHVdeeJizKXtImHliHq0FrWVwYnT0wY83gGcsx8s5k= not found in database
2019-06-03 09:44:28.490 +02:00 [DBG] Updating refresh token
2019-06-03 09:44:28.490 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-06-03 09:44:28.491 +02:00 [DBG] removing ThPJhz+/3DL7exEd/rxj/GStKb9ZP2CTGQJvHVyzUYY= persisted grant from database
2019-06-03 09:44:28.492 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-06-03 09:44:28.492 +02:00 [DBG] Current lifetime: 9
2019-06-03 09:44:28.493 +02:00 [DBG] New lifetime: 1296009
2019-06-03 09:44:28.494 +02:00 [DBG] MPekrWn1VbAofUXuxqoVEzHnuuUFBOZRNpc4qOCL+AY= not found in database
2019-06-03 09:44:28.496 +02:00 [DBG] Created refresh token in store
2019-06-03 09:44:28.497 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:28.499 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:44:28.501 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:28.502 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:44:28.502 +02:00 [DBG] Getting claims for identity token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128 and client: ro.client
2019-06-03 09:44:28.502 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-03 09:44:28.505 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"id_token","TokenValue":"****HQfw","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****bd50","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0c24","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000007","TimeStamp":"2019-06-03T07:44:28.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:44:28.505 +02:00 [DBG] Token request success.
2019-06-03 09:44:44.058 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:44:44.058 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:44:44.058 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:44:44.058 +02:00 [DBG] Start userinfo request
2019-06-03 09:44:44.058 +02:00 [DBG] Bearer token found in header
2019-06-03 09:44:44.059 +02:00 [DBG] vdHVdeeJizKXtImHliHq0FrWVwYnT0wY83gGcsx8s5k= found in database: true
2019-06-03 09:44:44.064 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:44.064 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:44.067 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:44.067 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:44.071 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:44:44.072 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"ef815f12539528ae3f8a3004f1bba62f6031f811053ad17237db067d53e90c24","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559547868,"exp":1559551468,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559547859,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:44:44.072 +02:00 [DBG] Creating userinfo response
2019-06-03 09:44:44.072 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:44.072 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:44.075 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:44.075 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:44:44.075 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:44:44.077 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:44:44.081 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:44:44.081 +02:00 [DBG] End userinfo request
2019-06-03 09:44:48.324 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:44:48.324 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:44:48.324 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:44:48.325 +02:00 [DBG] Start revocation request.
2019-06-03 09:44:48.325 +02:00 [DBG] Start client validation
2019-06-03 09:44:48.325 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:44:48.325 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:44:48.325 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:44:48.325 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:44:48.329 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:44:48.329 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:44:48.329 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:44:48.329 +02:00 [DBG] Client validation success
2019-06-03 09:44:48.329 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000008","TimeStamp":"2019-06-03T07:44:48.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:44:48.329 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:44:48.330 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:44:48.330 +02:00 [DBG] vdHVdeeJizKXtImHliHq0FrWVwYnT0wY83gGcsx8s5k= found in database: true
2019-06-03 09:44:48.331 +02:00 [DBG] Access token revoked
2019-06-03 09:44:48.331 +02:00 [DBG] removing vdHVdeeJizKXtImHliHq0FrWVwYnT0wY83gGcsx8s5k= persisted grant from database
2019-06-03 09:44:48.336 +02:00 [INF] Token successfully revoked
2019-06-03 09:44:48.336 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"TokenType":"access_token","Token":"****0c24","Category":"Token","Name":"Token Revoked Success","EventType":"Success","Id":2010,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000008","TimeStamp":"2019-06-03T07:44:48.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenRevokedSuccessEvent"}
2019-06-03 09:44:49.702 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:44:49.703 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:44:49.703 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:44:49.703 +02:00 [DBG] Start userinfo request
2019-06-03 09:44:49.703 +02:00 [DBG] Bearer token found in header
2019-06-03 09:44:49.704 +02:00 [DBG] vdHVdeeJizKXtImHliHq0FrWVwYnT0wY83gGcsx8s5k= found in database: false
2019-06-03 09:44:49.704 +02:00 [DBG] reference_token grant with value: ef815f12539528ae3f8a3004f1bba62f6031f811053ad17237db067d53e90c24 not found in store.
2019-06-03 09:44:49.704 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"ef815f12539528ae3f8a3004f1bba62f6031f811053ad17237db067d53e90c24","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-03 09:45:02.435 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:45:02.435 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:45:02.435 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:45:02.435 +02:00 [DBG] Start token request.
2019-06-03 09:45:02.435 +02:00 [DBG] Start client validation
2019-06-03 09:45:02.435 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:45:02.435 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:45:02.435 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:45:02.436 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:45:02.439 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:45:02.440 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:45:02.440 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:45:02.440 +02:00 [DBG] Client validation success
2019-06-03 09:45:02.440 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000009","TimeStamp":"2019-06-03T07:45:02.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:45:02.440 +02:00 [DBG] Start token request validation
2019-06-03 09:45:02.440 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:45:02.443 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:45:02.444 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:45:02.446 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:45:02.448 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:45:02.457 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:45:02.457 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000009","TimeStamp":"2019-06-03T07:45:02.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:45:02.458 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000009","TimeStamp":"2019-06-03T07:45:02.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:45:02.458 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:45:02.458 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:45:02.458 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:45:02.458 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:45:02.463 +02:00 [DBG] JcjVpH/qlfxGZgh6oYB3PNg3DHyGr0bJb6c2K3O5qfQ= not found in database
2019-06-03 09:45:02.466 +02:00 [DBG] Creating refresh token
2019-06-03 09:45:02.467 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:45:02.467 +02:00 [DBG] 9a1TjLLfIvbwzBN3Rwi9/7O3yShnk+919jxVrKzaoWE= not found in database
2019-06-03 09:45:02.469 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****015f","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1548","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0I:00000009","TimeStamp":"2019-06-03T07:45:02.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:45:02.469 +02:00 [DBG] Token request success.
2019-06-03 09:45:03.097 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:45:03.098 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:45:03.098 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:45:03.098 +02:00 [DBG] Start token request.
2019-06-03 09:45:03.098 +02:00 [DBG] Start client validation
2019-06-03 09:45:03.098 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:45:03.098 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:45:03.098 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:45:03.098 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:45:03.102 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:45:03.102 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:45:03.102 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:45:03.102 +02:00 [DBG] Client validation success
2019-06-03 09:45:03.103 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0H:0000000A","TimeStamp":"2019-06-03T07:45:03.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:45:03.103 +02:00 [DBG] Start token request validation
2019-06-03 09:45:03.103 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:45:03.105 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:45:03.107 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:45:03.109 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:45:03.110 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:45:03.121 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:45:03.122 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0H:0000000A","TimeStamp":"2019-06-03T07:45:03.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:45:03.122 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0H:0000000A","TimeStamp":"2019-06-03T07:45:03.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:45:03.122 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:45:03.122 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:45:03.122 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:45:03.122 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:45:03.132 +02:00 [DBG] 1phU0BgMAj4nlcyr+mqTmlyeReLXrorXLccirKvUtPs= not found in database
2019-06-03 09:45:03.155 +02:00 [DBG] Creating refresh token
2019-06-03 09:45:03.155 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:45:03.156 +02:00 [DBG] fVlC2GOzrcdtTszHtEUsTKtc3/KJ+Zq5+bGGVxbRUik= not found in database
2019-06-03 09:45:03.159 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****7153","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6be8","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0H:0000000A","TimeStamp":"2019-06-03T07:45:03.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:45:03.160 +02:00 [DBG] Token request success.
2019-06-03 09:46:13.679 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:46:13.680 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:46:13.680 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:46:13.680 +02:00 [DBG] Start token request.
2019-06-03 09:46:13.680 +02:00 [DBG] Start client validation
2019-06-03 09:46:13.680 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:46:13.680 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:46:13.680 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:46:13.681 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:46:13.701 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:46:13.702 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:46:13.702 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:46:13.702 +02:00 [DBG] Client validation success
2019-06-03 09:46:13.702 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000001","TimeStamp":"2019-06-03T07:46:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:46:13.702 +02:00 [DBG] Start token request validation
2019-06-03 09:46:13.702 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:46:13.704 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:46:13.709 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:46:13.711 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:46:13.713 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:46:13.722 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:46:13.722 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000001","TimeStamp":"2019-06-03T07:46:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:46:13.722 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000001","TimeStamp":"2019-06-03T07:46:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:46:13.722 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:46:13.723 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:46:13.723 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:46:13.723 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:46:13.728 +02:00 [DBG] jIWaaHKRdBekQa0F2NxGIMPjyPoGJ/i3N+qliE9tQKc= not found in database
2019-06-03 09:46:13.733 +02:00 [DBG] Creating refresh token
2019-06-03 09:46:13.733 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:46:13.734 +02:00 [DBG] ddD+Dy/oO+k+JJAq3DmfRGXSkihG8JMRbtxKEgHA9hw= not found in database
2019-06-03 09:46:13.735 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****4f02","$type":"Token"},{"TokenType":"access_token","TokenValue":"****d35d","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000001","TimeStamp":"2019-06-03T07:46:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:46:13.736 +02:00 [DBG] Token request success.
2019-06-03 09:46:14.409 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:46:14.409 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:46:14.409 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:46:14.409 +02:00 [DBG] Start token request.
2019-06-03 09:46:14.409 +02:00 [DBG] Start client validation
2019-06-03 09:46:14.409 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:46:14.409 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:46:14.410 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:46:14.410 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:46:14.414 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:46:14.414 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:46:14.414 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:46:14.414 +02:00 [DBG] Client validation success
2019-06-03 09:46:14.414 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000002","TimeStamp":"2019-06-03T07:46:14.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:46:14.415 +02:00 [DBG] Start token request validation
2019-06-03 09:46:14.415 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:46:14.416 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:46:14.418 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:46:14.419 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:46:14.421 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:46:14.433 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:46:14.433 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000002","TimeStamp":"2019-06-03T07:46:14.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:46:14.433 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000002","TimeStamp":"2019-06-03T07:46:14.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:46:14.434 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:46:14.434 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:46:14.434 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:46:14.434 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:46:14.440 +02:00 [DBG] TmVRTlfW1hW1ZDEbFCMdS1UdM7GO++MhhZMLZkkLFc4= not found in database
2019-06-03 09:46:14.458 +02:00 [DBG] Creating refresh token
2019-06-03 09:46:14.458 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:46:14.459 +02:00 [DBG] pb21Uijqll5ZZq/IB6qmYBYqDjCNBORBgWeTjY2XHbA= not found in database
2019-06-03 09:46:14.461 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****0496","$type":"Token"},{"TokenType":"access_token","TokenValue":"****962f","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0J:00000002","TimeStamp":"2019-06-03T07:46:14.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:46:14.461 +02:00 [DBG] Token request success.
2019-06-03 09:47:33.777 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:47:33.777 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:47:33.777 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:47:33.777 +02:00 [DBG] Start userinfo request
2019-06-03 09:47:33.778 +02:00 [DBG] Bearer token found in header
2019-06-03 09:47:33.779 +02:00 [DBG] TmVRTlfW1hW1ZDEbFCMdS1UdM7GO++MhhZMLZkkLFc4= found in database: true
2019-06-03 09:47:33.784 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:47:33.784 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:47:33.788 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:47:33.789 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:47:33.793 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:47:33.793 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"9d1db2ade944eb8d1c965c9c85bce2f48a901ba054bb0cf1adb24dfdbdb2962f","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559547974,"exp":1559551574,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559547974,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:47:33.793 +02:00 [DBG] Creating userinfo response
2019-06-03 09:47:33.793 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:47:33.793 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:47:33.795 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:47:33.795 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:47:33.796 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:47:33.798 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:47:33.803 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:47:33.803 +02:00 [DBG] End userinfo request
2019-06-03 09:50:10.062 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:50:10.062 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:50:10.062 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:50:10.062 +02:00 [DBG] Start userinfo request
2019-06-03 09:50:10.062 +02:00 [DBG] Bearer token found in header
2019-06-03 09:50:10.064 +02:00 [DBG] TmVRTlfW1hW1ZDEbFCMdS1UdM7GO++MhhZMLZkkLFc4= found in database: false
2019-06-03 09:50:10.064 +02:00 [DBG] reference_token grant with value: 9d1db2ade944eb8d1c965c9c85bce2f48a901ba054bb0cf1adb24dfdbdb2962f not found in store.
2019-06-03 09:50:10.065 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"9d1db2ade944eb8d1c965c9c85bce2f48a901ba054bb0cf1adb24dfdbdb2962f","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-03 09:50:11.367 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:50:11.370 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:50:11.370 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:50:11.370 +02:00 [DBG] Start userinfo request
2019-06-03 09:50:11.370 +02:00 [DBG] Bearer token found in header
2019-06-03 09:50:11.371 +02:00 [DBG] TmVRTlfW1hW1ZDEbFCMdS1UdM7GO++MhhZMLZkkLFc4= found in database: false
2019-06-03 09:50:11.371 +02:00 [DBG] reference_token grant with value: 9d1db2ade944eb8d1c965c9c85bce2f48a901ba054bb0cf1adb24dfdbdb2962f not found in store.
2019-06-03 09:50:11.371 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"9d1db2ade944eb8d1c965c9c85bce2f48a901ba054bb0cf1adb24dfdbdb2962f","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-03 09:50:37.838 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:50:37.838 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:50:37.838 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:50:37.838 +02:00 [DBG] Start token request.
2019-06-03 09:50:37.838 +02:00 [DBG] Start client validation
2019-06-03 09:50:37.838 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:50:37.838 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:50:37.839 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:50:37.839 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:50:37.843 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:50:37.843 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:50:37.843 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:50:37.843 +02:00 [DBG] Client validation success
2019-06-03 09:50:37.844 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0L:00000003","TimeStamp":"2019-06-03T07:50:37.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:50:37.844 +02:00 [DBG] Start token request validation
2019-06-03 09:50:37.844 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:50:37.846 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:50:37.847 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:50:37.849 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:50:37.850 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:50:37.861 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:50:37.862 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0L:00000003","TimeStamp":"2019-06-03T07:50:37.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:50:37.862 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0L:00000003","TimeStamp":"2019-06-03T07:50:37.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:50:37.862 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:50:37.862 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:50:37.862 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:50:37.862 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:50:37.867 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= not found in database
2019-06-03 09:50:37.926 +02:00 [DBG] Creating refresh token
2019-06-03 09:50:37.926 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:50:37.927 +02:00 [DBG] Pkvi3FbaapoFUUgcaf83SwRwtIl3ddd1YdRiJhpm2yw= not found in database
2019-06-03 09:50:37.929 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****354d","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ba4c","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0L:00000003","TimeStamp":"2019-06-03T07:50:37.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:50:37.929 +02:00 [DBG] Token request success.
2019-06-03 09:52:31.651 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:52:31.651 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:52:31.651 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:52:31.651 +02:00 [DBG] Start userinfo request
2019-06-03 09:52:31.651 +02:00 [DBG] Bearer token found in header
2019-06-03 09:52:31.653 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: true
2019-06-03 09:52:31.658 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:52:31.658 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:52:31.661 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:52:31.662 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:52:31.666 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:52:31.666 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559548237,"exp":1559551837,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559548237,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:52:31.666 +02:00 [DBG] Creating userinfo response
2019-06-03 09:52:31.666 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:52:31.666 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:52:31.668 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:52:31.668 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:52:31.668 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:52:31.670 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:52:31.680 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:52:31.680 +02:00 [DBG] End userinfo request
2019-06-03 09:52:49.607 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:52:49.608 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:52:49.608 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:52:49.608 +02:00 [DBG] Start userinfo request
2019-06-03 09:52:49.608 +02:00 [DBG] Bearer token found in header
2019-06-03 09:52:49.609 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:52:49.609 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:52:49.610 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-03 09:52:52.418 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:52:52.418 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:52:52.418 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:52:52.419 +02:00 [DBG] Start token request.
2019-06-03 09:52:52.419 +02:00 [DBG] Start client validation
2019-06-03 09:52:52.419 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:52:52.419 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:52:52.419 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:52:52.419 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:52:52.425 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:52:52.425 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:52:52.425 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:52:52.425 +02:00 [DBG] Client validation success
2019-06-03 09:52:52.425 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000003","TimeStamp":"2019-06-03T07:52:52.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:52:52.425 +02:00 [DBG] Start token request validation
2019-06-03 09:52:52.425 +02:00 [DBG] Start validation of refresh token request
2019-06-03 09:52:52.426 +02:00 [DBG] Pkvi3FbaapoFUUgcaf83SwRwtIl3ddd1YdRiJhpm2yw= found in database: false
2019-06-03 09:52:52.426 +02:00 [DBG] refresh_token grant with value: 0258ba073bfef9ac39fb309e10cda5d1ca5a26258ee8d893db1ce137ff1e354d not found in store.
2019-06-03 09:52:52.426 +02:00 [WRN] Invalid refresh token
2019-06-03 09:52:52.426 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:52:52.427 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000003","TimeStamp":"2019-06-03T07:52:52.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 09:53:10.333 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:10.334 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:10.334 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:10.334 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:10.334 +02:00 [DBG] Start client validation
2019-06-03 09:53:10.334 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:10.334 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:10.334 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:10.334 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:10.339 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:10.339 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:10.339 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:10.339 +02:00 [DBG] Client validation success
2019-06-03 09:53:10.339 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000004","TimeStamp":"2019-06-03T07:53:10.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:10.339 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:10.339 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:10.340 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:10.340 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:10.340 +02:00 [INF] No matching token found
2019-06-03 09:53:12.082 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:12.082 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:12.082 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:12.082 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:12.082 +02:00 [DBG] Start client validation
2019-06-03 09:53:12.082 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:12.082 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:12.082 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:12.082 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:12.086 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:12.086 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:12.087 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:12.087 +02:00 [DBG] Client validation success
2019-06-03 09:53:12.087 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000005","TimeStamp":"2019-06-03T07:53:12.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:12.087 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:12.087 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:12.088 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:12.088 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:12.088 +02:00 [INF] No matching token found
2019-06-03 09:53:13.082 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:13.083 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:13.083 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:13.083 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:13.083 +02:00 [DBG] Start client validation
2019-06-03 09:53:13.083 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:13.083 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:13.083 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:13.083 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:13.087 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:13.087 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:13.087 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:13.087 +02:00 [DBG] Client validation success
2019-06-03 09:53:13.087 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000006","TimeStamp":"2019-06-03T07:53:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:13.087 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:13.087 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:13.088 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:13.088 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:13.088 +02:00 [INF] No matching token found
2019-06-03 09:53:13.699 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:13.700 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:13.700 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:13.700 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:13.700 +02:00 [DBG] Start client validation
2019-06-03 09:53:13.700 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:13.700 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:13.700 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:13.700 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:13.704 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:13.704 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:13.704 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:13.704 +02:00 [DBG] Client validation success
2019-06-03 09:53:13.704 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000007","TimeStamp":"2019-06-03T07:53:13.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:13.704 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:13.704 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:13.705 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:13.705 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:13.705 +02:00 [INF] No matching token found
2019-06-03 09:53:14.270 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:14.270 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:14.270 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:14.270 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:14.270 +02:00 [DBG] Start client validation
2019-06-03 09:53:14.270 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:14.271 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:14.271 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:14.271 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:14.275 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:14.276 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:14.276 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:14.276 +02:00 [DBG] Client validation success
2019-06-03 09:53:14.276 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000008","TimeStamp":"2019-06-03T07:53:14.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:14.276 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:14.276 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:14.277 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:14.277 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:14.277 +02:00 [INF] No matching token found
2019-06-03 09:53:14.718 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:14.718 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:14.718 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:14.719 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:14.719 +02:00 [DBG] Start client validation
2019-06-03 09:53:14.719 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:14.719 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:14.719 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:14.719 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:14.723 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:14.723 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:14.723 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:14.723 +02:00 [DBG] Client validation success
2019-06-03 09:53:14.723 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000009","TimeStamp":"2019-06-03T07:53:14.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:14.723 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:14.723 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:14.724 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:14.724 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:14.724 +02:00 [INF] No matching token found
2019-06-03 09:53:15.149 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:15.149 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:15.149 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:15.149 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:15.149 +02:00 [DBG] Start client validation
2019-06-03 09:53:15.149 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:15.149 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:15.149 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:15.149 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:15.153 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:15.153 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:15.153 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:15.153 +02:00 [DBG] Client validation success
2019-06-03 09:53:15.153 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000A","TimeStamp":"2019-06-03T07:53:15.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:15.154 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:15.154 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:15.154 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:15.155 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:15.155 +02:00 [INF] No matching token found
2019-06-03 09:53:15.505 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:15.506 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:15.506 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:15.506 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:15.506 +02:00 [DBG] Start client validation
2019-06-03 09:53:15.506 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:15.506 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:15.506 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:15.506 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:15.510 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:15.510 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:15.510 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:15.510 +02:00 [DBG] Client validation success
2019-06-03 09:53:15.510 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000B","TimeStamp":"2019-06-03T07:53:15.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:15.511 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:15.511 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:15.512 +02:00 [DBG] kR1HPjGMJX41aZYFP5sAiCY9bpFb1xAWVcYSv4e9BRA= found in database: false
2019-06-03 09:53:15.512 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663398076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:15.512 +02:00 [INF] No matching token found
2019-06-03 09:53:23.192 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:23.192 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:23.192 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:23.192 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:23.192 +02:00 [DBG] Start client validation
2019-06-03 09:53:23.192 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:23.192 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:23.193 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:23.193 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:23.197 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:23.197 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:23.197 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:23.197 +02:00 [DBG] Client validation success
2019-06-03 09:53:23.197 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000C","TimeStamp":"2019-06-03T07:53:23.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:23.197 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:23.197 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:23.198 +02:00 [DBG] PRyhkEFOE/cVS6+XqP/u21ImfFpDwoAGSqMF+3RQvAE= found in database: false
2019-06-03 09:53:23.198 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663a98076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:23.198 +02:00 [INF] No matching token found
2019-06-03 09:53:23.907 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:23.907 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:23.907 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:23.907 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:23.907 +02:00 [DBG] Start client validation
2019-06-03 09:53:23.907 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:23.907 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:23.908 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:23.908 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:23.912 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:23.912 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:23.912 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:23.912 +02:00 [DBG] Client validation success
2019-06-03 09:53:23.912 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000D","TimeStamp":"2019-06-03T07:53:23.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:23.913 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:23.913 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:23.914 +02:00 [DBG] PRyhkEFOE/cVS6+XqP/u21ImfFpDwoAGSqMF+3RQvAE= found in database: false
2019-06-03 09:53:23.914 +02:00 [DBG] reference_token grant with value: 2a0aa5f284838c2f41663a98076b23867b763474194af505fba539b458bdba4c not found in store.
2019-06-03 09:53:23.914 +02:00 [INF] No matching token found
2019-06-03 09:53:32.767 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 09:53:32.767 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 09:53:32.767 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 09:53:32.767 +02:00 [DBG] Start token request.
2019-06-03 09:53:32.767 +02:00 [DBG] Start client validation
2019-06-03 09:53:32.767 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:32.767 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:32.767 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:32.767 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:32.772 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:32.772 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:32.772 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:32.772 +02:00 [DBG] Client validation success
2019-06-03 09:53:32.772 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000E","TimeStamp":"2019-06-03T07:53:32.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:32.772 +02:00 [DBG] Start token request validation
2019-06-03 09:53:32.772 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 09:53:32.774 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:53:32.775 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:53:32.777 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:53:32.778 +02:00 [DBG] Found [] API scopes in database
2019-06-03 09:53:32.789 +02:00 [INF] Credentials validated for username: alice
2019-06-03 09:53:32.790 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000E","TimeStamp":"2019-06-03T07:53:32.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:53:32.790 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000E","TimeStamp":"2019-06-03T07:53:32.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 09:53:32.790 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 09:53:32.790 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 09:53:32.790 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 09:53:32.790 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 09:53:32.796 +02:00 [DBG] YAY0ZwafA0zdqi5fpv2HpYKHt+LDKWdVSV9+XXS6PA4= not found in database
2019-06-03 09:53:32.813 +02:00 [DBG] Creating refresh token
2019-06-03 09:53:32.813 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 09:53:32.814 +02:00 [DBG] bPo5RHAfXYBwV7tl1TEtwPgEtHHbEC43v9muh4UAmpM= not found in database
2019-06-03 09:53:32.815 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****4c89","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8c68","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0M:0000000E","TimeStamp":"2019-06-03T07:53:32.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 09:53:32.815 +02:00 [DBG] Token request success.
2019-06-03 09:53:38.135 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 09:53:38.135 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 09:53:38.135 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 09:53:38.135 +02:00 [DBG] Start userinfo request
2019-06-03 09:53:38.135 +02:00 [DBG] Bearer token found in header
2019-06-03 09:53:38.136 +02:00 [DBG] YAY0ZwafA0zdqi5fpv2HpYKHt+LDKWdVSV9+XXS6PA4= found in database: true
2019-06-03 09:53:38.140 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:38.140 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:38.144 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:38.144 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:38.148 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 09:53:38.148 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"4be1838f9844b336257259f58003d5852bbbd135d97c3ed45a2260784d8e8c68","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559548412,"exp":1559552012,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559548412,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 09:53:38.148 +02:00 [DBG] Creating userinfo response
2019-06-03 09:53:38.148 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:53:38.148 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:53:38.150 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:53:38.150 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 09:53:38.150 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 09:53:38.152 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 09:53:38.156 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 09:53:38.156 +02:00 [DBG] End userinfo request
2019-06-03 09:53:49.296 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-03 09:53:49.296 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-03 09:53:49.296 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-03 09:53:49.297 +02:00 [DBG] Start revocation request.
2019-06-03 09:53:49.297 +02:00 [DBG] Start client validation
2019-06-03 09:53:49.297 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 09:53:49.297 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 09:53:49.297 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 09:53:49.297 +02:00 [DBG] Secret id found: ro.client
2019-06-03 09:53:49.302 +02:00 [DBG] ro.client found in database: true
2019-06-03 09:53:49.302 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 09:53:49.302 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 09:53:49.302 +02:00 [DBG] Client validation success
2019-06-03 09:53:49.302 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000010","TimeStamp":"2019-06-03T07:53:49.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 09:53:49.302 +02:00 [DBG] Token type hint found in request: access_token
2019-06-03 09:53:49.302 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-03 09:53:49.303 +02:00 [DBG] YAY0ZwafA0zdqi5fpv2HpYKHt+LDKWdVSV9+XXS6PA4= found in database: true
2019-06-03 09:53:49.303 +02:00 [DBG] Access token revoked
2019-06-03 09:53:49.304 +02:00 [DBG] removing YAY0ZwafA0zdqi5fpv2HpYKHt+LDKWdVSV9+XXS6PA4= persisted grant from database
2019-06-03 09:53:49.311 +02:00 [INF] Token successfully revoked
2019-06-03 09:53:49.311 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"TokenType":"access_token","Token":"****8c68","Category":"Token","Name":"Token Revoked Success","EventType":"Success","Id":2010,"Message":null,"ActivityId":"0HLN7US6A4U0M:00000010","TimeStamp":"2019-06-03T07:53:49.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenRevokedSuccessEvent"}
2019-06-03 10:09:19.461 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:09:19.461 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:09:19.461 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:09:19.461 +02:00 [DBG] Start token request.
2019-06-03 10:09:19.461 +02:00 [DBG] Start client validation
2019-06-03 10:09:19.461 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:09:19.461 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:09:19.462 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:09:19.462 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:09:19.472 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:09:19.472 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:09:19.472 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:09:19.472 +02:00 [DBG] Client validation success
2019-06-03 10:09:19.472 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000001","TimeStamp":"2019-06-03T08:09:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:09:19.472 +02:00 [DBG] Start token request validation
2019-06-03 10:09:19.472 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:09:19.474 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:09:19.475 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:09:19.477 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:09:19.478 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:09:19.487 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:09:19.487 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000001","TimeStamp":"2019-06-03T08:09:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:09:19.487 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000001","TimeStamp":"2019-06-03T08:09:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:09:19.487 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:09:19.488 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:09:19.488 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:09:19.488 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 10:09:19.498 +02:00 [DBG] t/eqTU6f5rZShkXwfGO29l/qL1L0mHvKTEIl85jhlQQ= not found in database
2019-06-03 10:09:19.519 +02:00 [DBG] Creating refresh token
2019-06-03 10:09:19.519 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:09:19.521 +02:00 [DBG] 4JBB21sZJyKYPD9fHOZyPlemf9qfHOsq4hbeDcmq3WY= not found in database
2019-06-03 10:09:19.523 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****57e8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2920","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000001","TimeStamp":"2019-06-03T08:09:19.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:09:19.523 +02:00 [DBG] Token request success.
2019-06-03 10:09:27.812 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:09:27.812 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:09:27.812 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:09:27.812 +02:00 [DBG] Start token request.
2019-06-03 10:09:27.813 +02:00 [DBG] Start client validation
2019-06-03 10:09:27.813 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:09:27.813 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:09:27.813 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:09:27.813 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:09:27.817 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:09:27.817 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:09:27.818 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:09:27.818 +02:00 [DBG] Client validation success
2019-06-03 10:09:27.818 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000002","TimeStamp":"2019-06-03T08:09:27.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:09:27.818 +02:00 [DBG] Start token request validation
2019-06-03 10:09:27.818 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:09:27.819 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:09:27.821 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:09:27.822 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:09:27.824 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:09:27.835 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:09:27.835 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000002","TimeStamp":"2019-06-03T08:09:27.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:09:27.835 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000002","TimeStamp":"2019-06-03T08:09:27.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:09:27.835 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:09:27.835 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:09:27.836 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:09:27.836 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 10:09:27.842 +02:00 [DBG] Cs9vR5eeaHDDHxIBq2XGPwxkPKWFXgQbbFxLJPd8D3Q= not found in database
2019-06-03 10:09:27.848 +02:00 [DBG] Creating refresh token
2019-06-03 10:09:27.848 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:09:27.849 +02:00 [DBG] G04bXE8/6Kx0e4DcuWxgdwv1nSxeUDAqU68o3h8lgCM= not found in database
2019-06-03 10:09:27.851 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****e607","$type":"Token"},{"TokenType":"access_token","TokenValue":"****860e","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000002","TimeStamp":"2019-06-03T08:09:27.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:09:27.851 +02:00 [DBG] Token request success.
2019-06-03 10:09:34.659 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:09:34.659 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:09:34.659 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:09:34.659 +02:00 [DBG] Start token request.
2019-06-03 10:09:34.659 +02:00 [DBG] Start client validation
2019-06-03 10:09:34.659 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:09:34.660 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:09:34.660 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:09:34.660 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:09:34.664 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:09:34.665 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:09:34.665 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:09:34.665 +02:00 [DBG] Client validation success
2019-06-03 10:09:34.665 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000003","TimeStamp":"2019-06-03T08:09:34.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:09:34.665 +02:00 [DBG] Start token request validation
2019-06-03 10:09:34.665 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:09:34.666 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:09:34.668 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:09:34.669 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:09:34.671 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:09:34.683 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:09:34.683 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000003","TimeStamp":"2019-06-03T08:09:34.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:09:34.683 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000003","TimeStamp":"2019-06-03T08:09:34.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:09:34.683 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:09:34.684 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:09:34.684 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:09:34.684 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 10:09:34.690 +02:00 [DBG] idssEAZrv1mdyLPkXBDyr4+Ut+JWZrjQnSBdsVfRgHY= not found in database
2019-06-03 10:09:34.713 +02:00 [DBG] Creating refresh token
2019-06-03 10:09:34.713 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:09:34.714 +02:00 [DBG] +j36Wnulxpmyll+7Yi2M0QwImD/jgnSVRqTM9nIGpFA= not found in database
2019-06-03 10:09:34.715 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****83d0","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0c01","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000003","TimeStamp":"2019-06-03T08:09:34.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:09:34.716 +02:00 [DBG] Token request success.
2019-06-03 10:09:46.640 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:09:46.640 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:09:46.640 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:09:46.640 +02:00 [DBG] Start token request.
2019-06-03 10:09:46.640 +02:00 [DBG] Start client validation
2019-06-03 10:09:46.640 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:09:46.640 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:09:46.641 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:09:46.641 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:09:46.645 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:09:46.645 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:09:46.645 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:09:46.645 +02:00 [DBG] Client validation success
2019-06-03 10:09:46.645 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000004","TimeStamp":"2019-06-03T08:09:46.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:09:46.646 +02:00 [DBG] Start token request validation
2019-06-03 10:09:46.646 +02:00 [DBG] Start validation of refresh token request
2019-06-03 10:09:46.646 +02:00 [DBG] 6s2cXNY2qbKXPW7o/W7nOZG2PtwgDzNr6JYDGAOLcy0= found in database: false
2019-06-03 10:09:46.646 +02:00 [DBG] refresh_token grant with value: ee135eb3a4b98ee69d926a047a709d44c9dd56a4ab100c5fc229876a315e0c01 not found in store.
2019-06-03 10:09:46.647 +02:00 [WRN] Invalid refresh token
2019-06-03 10:09:46.647 +02:00 [WRN] Refresh token validation failed. aborting, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:09:46.647 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"refresh_token","Error":"invalid_grant","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000004","TimeStamp":"2019-06-03T08:09:46.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-03 10:10:05.030 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:10:05.030 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:10:05.030 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:10:05.030 +02:00 [DBG] Start token request.
2019-06-03 10:10:05.030 +02:00 [DBG] Start client validation
2019-06-03 10:10:05.030 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:10:05.030 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:10:05.031 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:10:05.031 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:10:05.035 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:10:05.035 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:10:05.035 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:10:05.035 +02:00 [DBG] Client validation success
2019-06-03 10:10:05.035 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000005","TimeStamp":"2019-06-03T08:10:05.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:10:05.035 +02:00 [DBG] Start token request validation
2019-06-03 10:10:05.035 +02:00 [DBG] Start validation of refresh token request
2019-06-03 10:10:05.036 +02:00 [DBG] +j36Wnulxpmyll+7Yi2M0QwImD/jgnSVRqTM9nIGpFA= found in database: true
2019-06-03 10:10:05.039 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","client_id":"ro.client","scope":["openid","profile","offline_access"],"auth_time":1559549374,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 10:10:05.040 +02:00 [DBG] Validation of refresh token request success
2019-06-03 10:10:05.040 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"9722a1eba3ee38b4c804fcd44330321f41fb7d32703fbdf5d681c8b92e8a83d0","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:10:05.041 +02:00 [DBG] UG312F835aux4qkHe/J8Wc2t8ANH4yWX/mPpEFyMEGA= not found in database
2019-06-03 10:10:05.055 +02:00 [DBG] Updating refresh token
2019-06-03 10:10:05.055 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-06-03 10:10:05.056 +02:00 [DBG] removing +j36Wnulxpmyll+7Yi2M0QwImD/jgnSVRqTM9nIGpFA= persisted grant from database
2019-06-03 10:10:05.069 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-06-03 10:10:05.069 +02:00 [DBG] Current lifetime: 31
2019-06-03 10:10:05.069 +02:00 [DBG] New lifetime: 1296031
2019-06-03 10:10:05.069 +02:00 [DBG] WZijFi8ThJmvfaVuOMvF+JmUziX56rAZ3iSylx706JQ= not found in database
2019-06-03 10:10:05.096 +02:00 [DBG] Created refresh token in store
2019-06-03 10:10:05.098 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:10:05.099 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:10:05.101 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:10:05.102 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:10:05.102 +02:00 [DBG] Getting claims for identity token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128 and client: ro.client
2019-06-03 10:10:05.102 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-03 10:10:05.105 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"id_token","TokenValue":"****oB7w","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****3d95","$type":"Token"},{"TokenType":"access_token","TokenValue":"****889d","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7US6A4U0N:00000005","TimeStamp":"2019-06-03T08:10:05.0000000Z","ProcessId":17920,"LocalIpAddress":"127.0.0.1:28731","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:10:05.105 +02:00 [DBG] Token request success.
2019-06-03 10:13:41.734 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 10:13:41.864 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 10:13:41.864 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 10:13:41.864 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 10:13:41.864 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 10:13:41.864 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 10:13:41.864 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 10:13:42.027 +02:00 [DBG] Starting grant removal
2019-06-03 10:13:42.227 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 10:13:42.228 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 10:13:42.228 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 10:13:42.229 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 10:13:42.229 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 10:13:42.229 +02:00 [DBG] Error Url: /home/error
2019-06-03 10:13:42.229 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 10:14:35.931 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:14:35.946 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:14:35.946 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:14:35.952 +02:00 [DBG] Start token request.
2019-06-03 10:14:35.957 +02:00 [DBG] Start client validation
2019-06-03 10:14:35.961 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:14:35.964 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:14:35.979 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:14:35.979 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:14:36.826 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:14:36.837 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:14:36.844 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:14:36.844 +02:00 [DBG] Client validation success
2019-06-03 10:14:36.862 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VDI0JCF4:00000002","TimeStamp":"2019-06-03T08:14:36.0000000Z","ProcessId":31072,"LocalIpAddress":"127.0.0.1:38565","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:14:36.872 +02:00 [DBG] Start token request validation
2019-06-03 10:14:36.882 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:14:36.932 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:14:37.004 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:14:37.014 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:14:37.015 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:14:37.156 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:14:37.158 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VDI0JCF4:00000002","TimeStamp":"2019-06-03T08:14:37.0000000Z","ProcessId":31072,"LocalIpAddress":"127.0.0.1:38565","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:14:37.165 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VDI0JCF4:00000002","TimeStamp":"2019-06-03T08:14:37.0000000Z","ProcessId":31072,"LocalIpAddress":"127.0.0.1:38565","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:14:37.165 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:14:37.172 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:14:37.191 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:14:37.191 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 10:14:37.312 +02:00 [DBG] VnHT/KUMnm6bpQItheA+vmNVZnTT4NNfjBuSlqAnvUY= not found in database
2019-06-03 10:14:37.355 +02:00 [DBG] Creating refresh token
2019-06-03 10:14:37.355 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:14:37.360 +02:00 [DBG] iaFK8iQvGNxjuDca2sj0tR+xj8hfW9q2Pl+59ZFf+tA= not found in database
2019-06-03 10:14:37.368 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****1b68","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4654","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VDI0JCF4:00000002","TimeStamp":"2019-06-03T08:14:37.0000000Z","ProcessId":31072,"LocalIpAddress":"127.0.0.1:38565","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:14:37.369 +02:00 [DBG] Token request success.
2019-06-03 10:14:49.960 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-03 10:14:49.963 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-03 10:14:49.963 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-03 10:14:49.969 +02:00 [DBG] Start discovery request
2019-06-03 10:14:50.105 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-03 10:14:50.243 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-03 10:14:50.243 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-03 10:14:50.243 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-03 10:14:50.246 +02:00 [DBG] Start key discovery request
2019-06-03 10:15:22.569 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 10:15:22.571 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 10:15:22.571 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 10:15:22.578 +02:00 [DBG] Start userinfo request
2019-06-03 10:15:22.582 +02:00 [DBG] Bearer token found in header
2019-06-03 10:15:22.610 +02:00 [DBG] VnHT/KUMnm6bpQItheA+vmNVZnTT4NNfjBuSlqAnvUY= found in database: true
2019-06-03 10:15:22.632 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:15:22.632 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:15:22.639 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:15:22.640 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:15:22.653 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 10:15:22.654 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"eb7ba17a9528c05e054c761e79de048a10e4e4586562cab489d32a810ea94654","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559549677,"exp":1559553277,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","auth_time":1559549677,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 10:15:22.665 +02:00 [DBG] Creating userinfo response
2019-06-03 10:15:22.668 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 10:15:22.671 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 10:15:22.680 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:15:22.680 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 10:15:22.681 +02:00 [DBG] Scopes in access token: openid profile offline_access
2019-06-03 10:15:22.682 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:15:22.690 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 10:15:22.691 +02:00 [DBG] End userinfo request
2019-06-03 10:26:39.655 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 10:26:39.786 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 10:26:39.786 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 10:26:39.786 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 10:26:39.787 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 10:26:39.787 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 10:26:39.787 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 10:26:39.943 +02:00 [DBG] Starting grant removal
2019-06-03 10:26:40.180 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 10:26:40.182 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 10:26:40.182 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 10:26:40.182 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 10:26:40.182 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 10:26:40.182 +02:00 [DBG] Error Url: /home/error
2019-06-03 10:26:40.182 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 10:26:46.366 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:26:46.386 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:26:46.386 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:26:46.395 +02:00 [DBG] Start token request.
2019-06-03 10:26:46.400 +02:00 [DBG] Start client validation
2019-06-03 10:26:46.404 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:26:46.409 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:26:46.425 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:26:46.425 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:26:47.306 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:26:47.315 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:26:47.321 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:26:47.321 +02:00 [DBG] Client validation success
2019-06-03 10:26:47.338 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VKPRU4DR:00000002","TimeStamp":"2019-06-03T08:26:47.0000000Z","ProcessId":21888,"LocalIpAddress":"127.0.0.1:22823","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:26:47.348 +02:00 [DBG] Start token request validation
2019-06-03 10:26:47.358 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:26:47.406 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:26:47.479 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:26:47.489 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:26:47.490 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:26:47.634 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:26:47.635 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VKPRU4DR:00000002","TimeStamp":"2019-06-03T08:26:47.0000000Z","ProcessId":21888,"LocalIpAddress":"127.0.0.1:22823","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:26:47.642 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VKPRU4DR:00000002","TimeStamp":"2019-06-03T08:26:47.0000000Z","ProcessId":21888,"LocalIpAddress":"127.0.0.1:22823","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:26:47.642 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:26:47.649 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:26:47.669 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:26:47.669 +02:00 [DBG] Getting claims for access token for subject: f4c78e5f-f7c4-4201-ba6b-e16fa988b128
2019-06-03 10:26:47.798 +02:00 [DBG] X7DMChMULYNdJJUV+I5MTlFgFUPCkEnc+fHEM4prM7g= not found in database
2019-06-03 10:26:47.842 +02:00 [DBG] Creating refresh token
2019-06-03 10:26:47.842 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:26:47.846 +02:00 [DBG] Vz85aIV29foCino3TBKXEKlgW0AqFFA2ZhydTExROos= not found in database
2019-06-03 10:26:47.854 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"f4c78e5f-f7c4-4201-ba6b-e16fa988b128","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a1ae","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6ce2","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VKPRU4DR:00000002","TimeStamp":"2019-06-03T08:26:47.0000000Z","ProcessId":21888,"LocalIpAddress":"127.0.0.1:22823","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:26:47.855 +02:00 [DBG] Token request success.
2019-06-03 10:26:51.478 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:26:51.479 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:26:51.479 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:26:51.480 +02:00 [DBG] Start token request.
2019-06-03 10:26:51.480 +02:00 [DBG] Start client validation
2019-06-03 10:26:51.480 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:26:51.480 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:26:51.480 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:26:51.481 +02:00 [DBG] Secret id found: client
2019-06-03 10:26:51.486 +02:00 [DBG] client found in database: true
2019-06-03 10:26:51.486 +02:00 [DBG] client configuration validation for client client succeeded.
2019-06-03 10:26:51.486 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:26:51.486 +02:00 [DBG] Client validation success
2019-06-03 10:26:51.486 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VKPRU4DQ:00000002","TimeStamp":"2019-06-03T08:26:51.0000000Z","ProcessId":21888,"LocalIpAddress":"127.0.0.1:22823","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:26:51.486 +02:00 [DBG] Start token request validation
2019-06-03 10:26:51.490 +02:00 [DBG] Start client credentials token request validation
2019-06-03 10:26:51.493 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 10:26:51.609 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:26:51.613 +02:00 [DBG] Found [] identity scopes in database
2019-06-03 10:26:51.617 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:26:51.619 +02:00 [DBG] client credentials token request validation success
2019-06-03 10:26:51.620 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:26:51.620 +02:00 [DBG] Getting claims for access token for client: client
2019-06-03 10:26:51.680 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****x28w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VKPRU4DQ:00000002","TimeStamp":"2019-06-03T08:26:51.0000000Z","ProcessId":21888,"LocalIpAddress":"127.0.0.1:22823","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:26:51.680 +02:00 [DBG] Token request success.
2019-06-03 10:27:00.846 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-03 10:27:00.847 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-03 10:27:00.847 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-03 10:27:00.850 +02:00 [DBG] Start discovery request
2019-06-03 10:27:00.927 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-03 10:27:01.042 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-03 10:27:01.042 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-03 10:27:01.043 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-03 10:27:01.046 +02:00 [DBG] Start key discovery request
2019-06-03 10:28:37.146 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 10:28:37.191 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 10:28:37.191 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 10:28:37.191 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 10:28:37.191 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 10:28:37.191 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 10:28:37.191 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 10:28:37.303 +02:00 [DBG] Starting grant removal
2019-06-03 10:28:37.722 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 10:28:37.724 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 10:28:37.725 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 10:28:37.725 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 10:28:37.725 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 10:28:37.725 +02:00 [DBG] Error Url: /home/error
2019-06-03 10:28:37.725 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 10:28:42.280 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:28:42.296 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:28:42.296 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:28:42.303 +02:00 [DBG] Start token request.
2019-06-03 10:28:42.308 +02:00 [DBG] Start client validation
2019-06-03 10:28:42.314 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:28:42.318 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:28:42.330 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:28:42.330 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:28:42.509 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:28:42.518 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:28:42.525 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:28:42.525 +02:00 [DBG] Client validation success
2019-06-03 10:28:42.542 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VLSSNVF7:00000002","TimeStamp":"2019-06-03T08:28:42.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:28:42.562 +02:00 [DBG] Start token request validation
2019-06-03 10:28:42.572 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:28:42.720 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:28:42.798 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:28:42.807 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:28:42.808 +02:00 [DBG] Found [] API scopes in database
2019-06-03 10:28:42.841 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:28:42.842 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VLSSNVF7:00000002","TimeStamp":"2019-06-03T08:28:42.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:28:42.849 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VLSSNVF7:00000002","TimeStamp":"2019-06-03T08:28:42.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:28:42.849 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:28:42.858 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:28:42.877 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:28:42.878 +02:00 [DBG] Getting claims for access token for subject: 87893feb-a778-45bd-9edd-01ff0def86c1
2019-06-03 10:28:43.027 +02:00 [DBG] Creating refresh token
2019-06-03 10:28:43.027 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:28:43.064 +02:00 [DBG] Hv8T+CKP0XtEN7wx3DMy7Xh4aSAy5t3EY3RN4FIA8rA= not found in database
2019-06-03 10:28:43.084 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****0734","$type":"Token"},{"TokenType":"access_token","TokenValue":"****3RGg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VLSSNVF7:00000002","TimeStamp":"2019-06-03T08:28:43.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:28:43.086 +02:00 [DBG] Token request success.
2019-06-03 10:28:52.590 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-03 10:28:52.591 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-03 10:28:52.591 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-03 10:28:52.595 +02:00 [DBG] Start discovery request
2019-06-03 10:28:52.678 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-03 10:28:52.782 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-03 10:28:52.782 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-03 10:28:52.782 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-03 10:28:52.785 +02:00 [DBG] Start key discovery request
2019-06-03 10:29:16.541 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:29:16.541 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:29:16.542 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:29:16.542 +02:00 [DBG] Start token request.
2019-06-03 10:29:16.542 +02:00 [DBG] Start client validation
2019-06-03 10:29:16.542 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:29:16.542 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:29:16.545 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:29:16.546 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:29:16.551 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:29:16.551 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:29:16.552 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:29:16.552 +02:00 [DBG] Client validation success
2019-06-03 10:29:16.552 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VLSSNVF6:00000003","TimeStamp":"2019-06-03T08:29:16.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:29:16.552 +02:00 [DBG] Start token request validation
2019-06-03 10:29:16.552 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:29:16.562 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:29:16.641 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:29:16.648 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:29:16.651 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:29:16.662 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:29:16.662 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VLSSNVF6:00000003","TimeStamp":"2019-06-03T08:29:16.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:29:16.663 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VLSSNVF6:00000003","TimeStamp":"2019-06-03T08:29:16.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:29:16.663 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:29:16.663 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:29:16.663 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:29:16.663 +02:00 [DBG] Getting claims for access token for subject: 87893feb-a778-45bd-9edd-01ff0def86c1
2019-06-03 10:29:16.671 +02:00 [DBG] Creating refresh token
2019-06-03 10:29:16.671 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:29:16.672 +02:00 [DBG] b+ftk81T9P1cYicnXeIm5YFDucOTfjbhTHN+07fOXTY= not found in database
2019-06-03 10:29:16.685 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****22d2","$type":"Token"},{"TokenType":"access_token","TokenValue":"****DtBQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VLSSNVF6:00000003","TimeStamp":"2019-06-03T08:29:16.0000000Z","ProcessId":32244,"LocalIpAddress":"127.0.0.1:33019","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:29:16.685 +02:00 [DBG] Token request success.
2019-06-03 10:34:09.263 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 10:34:09.399 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 10:34:09.399 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 10:34:09.399 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 10:34:09.399 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 10:34:09.399 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 10:34:09.399 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 10:34:09.527 +02:00 [DBG] Starting grant removal
2019-06-03 10:34:09.711 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 10:34:09.713 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 10:34:09.713 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 10:34:09.713 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 10:34:09.713 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 10:34:09.713 +02:00 [DBG] Error Url: /home/error
2019-06-03 10:34:09.713 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 10:34:09.737 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:34:09.770 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:34:09.770 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:34:09.776 +02:00 [DBG] Start token request.
2019-06-03 10:34:09.787 +02:00 [DBG] Start client validation
2019-06-03 10:34:09.791 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:34:09.794 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:34:09.807 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:34:09.807 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:34:10.986 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:34:10.998 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:34:11.005 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:34:11.005 +02:00 [DBG] Client validation success
2019-06-03 10:34:11.023 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VOVQQCQF:00000001","TimeStamp":"2019-06-03T08:34:11.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:34:11.036 +02:00 [DBG] Start token request validation
2019-06-03 10:34:11.046 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:34:11.109 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:34:11.348 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:34:11.362 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:34:11.366 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:34:11.518 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:34:11.519 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VOVQQCQF:00000001","TimeStamp":"2019-06-03T08:34:11.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:34:11.525 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VOVQQCQF:00000001","TimeStamp":"2019-06-03T08:34:11.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:34:11.526 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:34:11.534 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:34:11.562 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:34:11.563 +02:00 [DBG] Getting claims for access token for subject: 87893feb-a778-45bd-9edd-01ff0def86c1
2019-06-03 10:34:11.713 +02:00 [DBG] Creating refresh token
2019-06-03 10:34:11.713 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:34:11.752 +02:00 [DBG] bx3uphCtN5RCUimRgFDKH/+sFABPT++meu3eK5oRoYQ= not found in database
2019-06-03 10:34:11.801 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3651","$type":"Token"},{"TokenType":"access_token","TokenValue":"****qFnw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VOVQQCQF:00000001","TimeStamp":"2019-06-03T08:34:11.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:34:11.802 +02:00 [DBG] Token request success.
2019-06-03 10:35:42.325 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:35:42.330 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:35:42.330 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:35:42.330 +02:00 [DBG] Start token request.
2019-06-03 10:35:42.331 +02:00 [DBG] Start client validation
2019-06-03 10:35:42.331 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:35:42.331 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:35:42.331 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:35:42.331 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:35:42.354 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:35:42.354 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:35:42.354 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:35:42.354 +02:00 [DBG] Client validation success
2019-06-03 10:35:42.354 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000001","TimeStamp":"2019-06-03T08:35:42.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:35:42.355 +02:00 [DBG] Start token request validation
2019-06-03 10:35:42.355 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:35:42.365 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:35:42.429 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:35:42.431 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:35:42.435 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:35:42.445 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:35:42.446 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000001","TimeStamp":"2019-06-03T08:35:42.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:35:42.446 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000001","TimeStamp":"2019-06-03T08:35:42.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:35:42.446 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:35:42.446 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:35:42.446 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:35:42.446 +02:00 [DBG] Getting claims for access token for subject: 87893feb-a778-45bd-9edd-01ff0def86c1
2019-06-03 10:35:42.455 +02:00 [DBG] pVluU4Bvfy0ZDwzRqw0t0YdilVtczeFYVnvsyy/ze5M= not found in database
2019-06-03 10:35:42.472 +02:00 [DBG] Creating refresh token
2019-06-03 10:35:42.472 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:35:42.473 +02:00 [DBG] x5BifqXOTehFkiCatmg14Ej+sWkUfLeFPJDH+YtuCCc= not found in database
2019-06-03 10:35:42.474 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a588","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0f34","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000001","TimeStamp":"2019-06-03T08:35:42.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:35:42.475 +02:00 [DBG] Token request success.
2019-06-03 10:35:51.033 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-03 10:35:51.034 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-03 10:35:51.034 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-03 10:35:51.038 +02:00 [DBG] Start discovery request
2019-06-03 10:35:51.108 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-03 10:35:51.216 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-03 10:35:51.216 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-03 10:35:51.217 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-03 10:35:51.220 +02:00 [DBG] Start key discovery request
2019-06-03 10:36:00.670 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:36:00.671 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:36:00.671 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:36:00.671 +02:00 [DBG] Start token request.
2019-06-03 10:36:00.671 +02:00 [DBG] Start client validation
2019-06-03 10:36:00.671 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:36:00.671 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:36:00.671 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:36:00.671 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:36:00.676 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:36:00.676 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:36:00.676 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:36:00.676 +02:00 [DBG] Client validation success
2019-06-03 10:36:00.676 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000004","TimeStamp":"2019-06-03T08:36:00.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:36:00.676 +02:00 [DBG] Start token request validation
2019-06-03 10:36:00.676 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:36:00.678 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:36:00.681 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:36:00.683 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:36:00.687 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:36:00.699 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:36:00.700 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000004","TimeStamp":"2019-06-03T08:36:00.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:36:00.700 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000004","TimeStamp":"2019-06-03T08:36:00.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:36:00.700 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:36:00.701 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:36:00.701 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:36:00.701 +02:00 [DBG] Getting claims for access token for subject: 87893feb-a778-45bd-9edd-01ff0def86c1
2019-06-03 10:36:00.707 +02:00 [DBG] H8fMZrWk+WExHHkfQOQKEAcPXd6eA2l25FwYXzfizy0= not found in database
2019-06-03 10:36:00.715 +02:00 [DBG] Creating refresh token
2019-06-03 10:36:00.715 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:36:00.716 +02:00 [DBG] 6CODBqA/IppxFmIG5vZWFmc+52eOPD0CeQo2IcCR5WA= not found in database
2019-06-03 10:36:00.717 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****2a08","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dab7","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000004","TimeStamp":"2019-06-03T08:36:00.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:36:00.718 +02:00 [DBG] Token request success.
2019-06-03 10:36:23.009 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:36:23.010 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:36:23.010 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:36:23.010 +02:00 [DBG] Start token request.
2019-06-03 10:36:23.010 +02:00 [DBG] Start client validation
2019-06-03 10:36:23.010 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:36:23.010 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:36:23.010 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:36:23.010 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:36:23.033 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:36:23.033 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:36:23.033 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:36:23.033 +02:00 [DBG] Client validation success
2019-06-03 10:36:23.033 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000005","TimeStamp":"2019-06-03T08:36:23.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:36:23.033 +02:00 [DBG] Start token request validation
2019-06-03 10:36:23.037 +02:00 [DBG] Start validation of refresh token request
2019-06-03 10:36:23.052 +02:00 [DBG] 6CODBqA/IppxFmIG5vZWFmc+52eOPD0CeQo2IcCR5WA= found in database: true
2019-06-03 10:36:23.075 +02:00 [DBG] Token validation success
{"ClientId":"ro.client","ClientName":null,"ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"sub":"87893feb-a778-45bd-9edd-01ff0def86c1","client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"auth_time":1559550960,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 10:36:23.076 +02:00 [DBG] Validation of refresh token request success
2019-06-03 10:36:23.076 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"refresh_token","Scopes":null,"AuthorizationCode":null,"RefreshToken":"09099f1787f81a225d4df151a9912b913f2050948a61829530edd654bea22a08","UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"refresh_token":"***REDACTED***","grant_type":"refresh_token","client_id":"ro.client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:36:23.081 +02:00 [DBG] 59QSm6krJfT0svt84ylQQ+5YP96TRKgwN0B1tIY88ug= not found in database
2019-06-03 10:36:23.094 +02:00 [DBG] Updating refresh token
2019-06-03 10:36:23.095 +02:00 [DBG] Token usage is one-time only. Generating new handle
2019-06-03 10:36:23.104 +02:00 [DBG] removing 6CODBqA/IppxFmIG5vZWFmc+52eOPD0CeQo2IcCR5WA= persisted grant from database
2019-06-03 10:36:23.108 +02:00 [DBG] Refresh token expiration is sliding - extending lifetime
2019-06-03 10:36:23.108 +02:00 [DBG] Current lifetime: 23
2019-06-03 10:36:23.108 +02:00 [DBG] New lifetime: 1296023
2019-06-03 10:36:23.109 +02:00 [DBG] rlaWmlIWoQopSS9cO5KbqAHJ9Tp+ifrioPkP7tB3sww= not found in database
2019-06-03 10:36:23.111 +02:00 [DBG] Created refresh token in store
2019-06-03 10:36:23.122 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:36:23.187 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:36:23.189 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:36:23.193 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:36:23.200 +02:00 [DBG] Getting claims for identity token for subject: 87893feb-a778-45bd-9edd-01ff0def86c1 and client: ro.client
2019-06-03 10:36:23.200 +02:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-06-03 10:36:23.203 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","Scopes":"openid profile api1 offline_access","GrantType":"refresh_token","Tokens":[{"TokenType":"id_token","TokenValue":"****cslg","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****b0f3","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2371","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VOVQQCQG:00000005","TimeStamp":"2019-06-03T08:36:23.0000000Z","ProcessId":14024,"LocalIpAddress":"127.0.0.1:27070","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:36:23.203 +02:00 [DBG] Token request success.
2019-06-03 10:36:32.409 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-03 10:36:32.411 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-03 10:36:32.411 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-03 10:36:32.418 +02:00 [DBG] Start userinfo request
2019-06-03 10:36:32.422 +02:00 [DBG] Bearer token found in header
2019-06-03 10:36:32.440 +02:00 [DBG] 59QSm6krJfT0svt84ylQQ+5YP96TRKgwN0B1tIY88ug= found in database: true
2019-06-03 10:36:32.445 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:36:32.445 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:36:32.450 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:36:32.450 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:36:32.456 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-03 10:36:32.456 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"e700db11d2836870823379645996ecbae8eb615a6dbaa38cd4ada32eeb542371","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559550983,"exp":1559554583,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"87893feb-a778-45bd-9edd-01ff0def86c1","auth_time":1559550960,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-03 10:36:32.466 +02:00 [DBG] Creating userinfo response
2019-06-03 10:36:32.469 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-03 10:36:32.471 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-03 10:36:32.475 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:36:32.476 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-03 10:36:32.476 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-03 10:36:32.477 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:36:32.485 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-03 10:36:32.485 +02:00 [DBG] End userinfo request
2019-06-03 10:36:54.822 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 10:36:54.969 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 10:36:54.969 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 10:36:54.969 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 10:36:54.969 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 10:36:54.969 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 10:36:54.969 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 10:36:55.132 +02:00 [DBG] Starting grant removal
2019-06-03 10:36:55.462 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 10:36:55.464 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 10:36:55.464 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 10:36:55.464 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 10:36:55.464 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 10:36:55.464 +02:00 [DBG] Error Url: /home/error
2019-06-03 10:36:55.464 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 10:37:00.367 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-03 10:37:00.379 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-03 10:37:00.379 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-03 10:37:00.382 +02:00 [DBG] Start discovery request
2019-06-03 10:37:01.195 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-03 10:37:01.317 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-03 10:37:01.317 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-03 10:37:01.318 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-03 10:37:01.321 +02:00 [DBG] Start key discovery request
2019-06-03 10:37:04.834 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-03 10:37:04.839 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-03 10:37:04.839 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-03 10:37:04.847 +02:00 [DBG] Start token request.
2019-06-03 10:37:04.852 +02:00 [DBG] Start client validation
2019-06-03 10:37:04.856 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-03 10:37:04.860 +02:00 [DBG] Start parsing for secret in post body
2019-06-03 10:37:04.874 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-03 10:37:04.874 +02:00 [DBG] Secret id found: ro.client
2019-06-03 10:37:05.146 +02:00 [DBG] ro.client found in database: true
2019-06-03 10:37:05.154 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-03 10:37:05.166 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-03 10:37:05.166 +02:00 [DBG] Client validation success
2019-06-03 10:37:05.189 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VQH7FJ3G:00000003","TimeStamp":"2019-06-03T08:37:05.0000000Z","ProcessId":33444,"LocalIpAddress":"127.0.0.1:33816","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-03 10:37:05.198 +02:00 [DBG] Start token request validation
2019-06-03 10:37:05.207 +02:00 [DBG] Start resource owner password token request validation
2019-06-03 10:37:05.251 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:37:05.341 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:37:05.348 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-03 10:37:05.351 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-03 10:37:05.481 +02:00 [INF] Credentials validated for username: alice
2019-06-03 10:37:05.482 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VQH7FJ3G:00000003","TimeStamp":"2019-06-03T08:37:05.0000000Z","ProcessId":33444,"LocalIpAddress":"127.0.0.1:33816","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:37:05.488 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VQH7FJ3G:00000003","TimeStamp":"2019-06-03T08:37:05.0000000Z","ProcessId":33444,"LocalIpAddress":"127.0.0.1:33816","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-03 10:37:05.489 +02:00 [DBG] Resource owner password token request validation success.
2019-06-03 10:37:05.495 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-03 10:37:05.514 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-03 10:37:05.514 +02:00 [DBG] Getting claims for access token for subject: 87893feb-a778-45bd-9edd-01ff0def86c1
2019-06-03 10:37:05.627 +02:00 [DBG] 5qqgFTS1zvcd9VdfKSNnjXgEPiDQVsgYpncycW7vc34= not found in database
2019-06-03 10:37:05.667 +02:00 [DBG] Creating refresh token
2019-06-03 10:37:05.667 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-03 10:37:05.671 +02:00 [DBG] QScrrRjEmauEDb4ETr+gbXXdI2fiQjoDGS26p+/oH/0= not found in database
2019-06-03 10:37:05.679 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"87893feb-a778-45bd-9edd-01ff0def86c1","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****cc29","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ac64","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VQH7FJ3G:00000003","TimeStamp":"2019-06-03T08:37:05.0000000Z","ProcessId":33444,"LocalIpAddress":"127.0.0.1:33816","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-03 10:37:05.680 +02:00 [DBG] Token request success.
2019-06-03 10:38:35.911 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-03 10:38:36.016 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-03 10:38:36.016 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-03 10:38:36.016 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-03 10:38:36.016 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-03 10:38:36.016 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-03 10:38:36.016 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-03 10:38:36.122 +02:00 [DBG] Starting grant removal
2019-06-03 10:38:36.231 +02:00 [DBG] Login Url: /Account/Login
2019-06-03 10:38:36.233 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-03 10:38:36.233 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-03 10:38:36.233 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-03 10:38:36.233 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-03 10:38:36.233 +02:00 [DBG] Error Url: /home/error
2019-06-03 10:38:36.233 +02:00 [DBG] Error Id Parameter: errorId
2019-06-03 11:38:38.746 +02:00 [DBG] Removing 0 grants
2019-06-03 12:39:08.389 +02:00 [ERR] An error occurred using the connection to database 'IdentityServer4.Combined-2.3.0' on server '(LocalDb)\MSSQLLocalDB'.
System.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=27149; handshake=27;  ---> System.ComponentModel.Win32Exception (258): Tiempo de espera de la operacin de espera agotado
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:24bc9178-51f9-4232-a35e-a2b1135770e8
Error Number:-2,State:0,Class:11
2019-06-03 12:39:16.188 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=27149; handshake=27;  ---> System.ComponentModel.Win32Exception (258): Tiempo de espera de la operacin de espera agotado
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:24bc9178-51f9-4232-a35e-a2b1135770e8
Error Number:-2,State:0,Class:11
System.Data.SqlClient.SqlException (0x80131904): Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=27149; handshake=27;  ---> System.ComponentModel.Win32Exception (258): Tiempo de espera de la operacin de espera agotado
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider._TrackEntities[TOut,TIn](IEnumerable`1 results, QueryContext queryContext, IList`1 entityTrackingInfos, IList`1 entityAccessors)+MoveNext()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:24bc9178-51f9-4232-a35e-a2b1135770e8
Error Number:-2,State:0,Class:11
2019-06-03 12:39:16.202 +02:00 [ERR] Exception removing expired grants: Connection Timeout Expired.  The timeout period elapsed while attempting to consume the pre-login handshake acknowledgement.  This could be because the pre-login handshake failed or the server was unable to respond back in time.  The duration spent while attempting to connect to this server was - [Pre-Login] initialization=27149; handshake=27; 
2019-06-03 13:39:18.505 +02:00 [DBG] Removing 0 grants
2019-06-03 14:39:20.296 +02:00 [DBG] Removing 0 grants
2019-06-03 15:39:24.125 +02:00 [DBG] Removing 0 grants
2019-06-03 16:39:27.694 +02:00 [DBG] Removing 0 grants
2019-06-03 17:39:29.480 +02:00 [DBG] Removing 0 grants
2019-06-03 18:39:31.397 +02:00 [DBG] Removing 0 grants
2019-06-03 19:39:33.190 +02:00 [DBG] Removing 0 grants
2019-06-03 20:39:35.331 +02:00 [DBG] Removing 0 grants
2019-06-03 21:39:37.075 +02:00 [DBG] Removing 0 grants
2019-06-03 22:39:38.871 +02:00 [DBG] Removing 0 grants
2019-06-03 23:39:40.608 +02:00 [DBG] Removing 0 grants
2019-06-04 00:39:42.328 +02:00 [DBG] Removing 0 grants
2019-06-04 01:39:44.399 +02:00 [DBG] Removing 0 grants
2019-06-04 02:39:46.541 +02:00 [DBG] Removing 0 grants
2019-06-04 03:39:48.488 +02:00 [DBG] Removing 0 grants
2019-06-04 04:39:50.528 +02:00 [DBG] Removing 0 grants
2019-06-04 05:39:52.977 +02:00 [DBG] Removing 0 grants
2019-06-04 06:39:55.017 +02:00 [DBG] Removing 0 grants
2019-06-04 07:39:57.250 +02:00 [DBG] Removing 0 grants
2019-06-04 08:39:59.326 +02:00 [DBG] Removing 0 grants
2019-06-04 09:40:02.183 +02:00 [DBG] Removing 0 grants
2019-06-04 10:40:04.271 +02:00 [DBG] Removing 0 grants
2019-06-04 11:40:06.147 +02:00 [DBG] Removing 0 grants
2019-06-04 11:57:18.225 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 11:57:18.466 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 11:57:18.466 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 11:57:18.476 +02:00 [DBG] Start token request.
2019-06-04 11:57:18.506 +02:00 [DBG] Start client validation
2019-06-04 11:57:18.542 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 11:57:18.547 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 11:57:18.634 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 11:57:18.634 +02:00 [DBG] Secret id found: ro.client
2019-06-04 11:57:23.455 +02:00 [DBG] ro.client found in database: true
2019-06-04 11:57:23.460 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 11:57:23.491 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 11:57:23.491 +02:00 [DBG] Client validation success
2019-06-04 11:57:23.524 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VRF9760B:00000002","TimeStamp":"2019-06-04T09:57:23.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 11:57:23.546 +02:00 [DBG] Start token request validation
2019-06-04 11:57:23.555 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 11:57:23.657 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:57:24.024 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:57:24.038 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:57:24.040 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:57:24.362 +02:00 [INF] Credentials validated for username: alice
2019-06-04 11:57:24.363 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VRF9760B:00000002","TimeStamp":"2019-06-04T09:57:24.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 11:57:24.381 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VRF9760B:00000002","TimeStamp":"2019-06-04T09:57:24.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 11:57:24.381 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 11:57:24.389 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 11:57:24.422 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 11:57:24.422 +02:00 [DBG] Getting claims for access token for subject: 6b8d5850-588c-4d00-b229-958bcb481669
2019-06-04 11:57:24.599 +02:00 [DBG] 4K8/6ZDgFcq0IPBSiuXBs97QVFOYxDSaT57ccB+Yd20= not found in database
2019-06-04 11:57:24.692 +02:00 [DBG] Creating refresh token
2019-06-04 11:57:24.692 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 11:57:24.696 +02:00 [DBG] +hlgKNTLu+bNLwYPfl91/Ld1NdsQSTbAR9bUuvM2E2E= not found in database
2019-06-04 11:57:24.704 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****97ce","$type":"Token"},{"TokenType":"access_token","TokenValue":"****c80f","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VRF9760B:00000002","TimeStamp":"2019-06-04T09:57:24.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 11:57:24.705 +02:00 [DBG] Token request success.
2019-06-04 11:57:36.284 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 11:57:36.285 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 11:57:36.286 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 11:57:36.297 +02:00 [DBG] Start discovery request
2019-06-04 11:57:36.399 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 11:57:36.596 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 11:57:36.597 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 11:57:36.597 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 11:57:36.600 +02:00 [DBG] Start key discovery request
2019-06-04 11:57:54.512 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 11:57:54.513 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 11:57:54.513 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 11:57:54.513 +02:00 [DBG] Start token request.
2019-06-04 11:57:54.513 +02:00 [DBG] Start client validation
2019-06-04 11:57:54.513 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 11:57:54.513 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 11:57:54.514 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 11:57:54.514 +02:00 [DBG] Secret id found: ro.client
2019-06-04 11:57:54.518 +02:00 [DBG] ro.client found in database: true
2019-06-04 11:57:54.519 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 11:57:54.519 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 11:57:54.519 +02:00 [DBG] Client validation success
2019-06-04 11:57:54.519 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN7VRF9760B:00000005","TimeStamp":"2019-06-04T09:57:54.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 11:57:54.519 +02:00 [DBG] Start token request validation
2019-06-04 11:57:54.519 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 11:57:54.521 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:57:54.525 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:57:54.527 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:57:54.531 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:57:54.542 +02:00 [INF] Credentials validated for username: alice
2019-06-04 11:57:54.542 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VRF9760B:00000005","TimeStamp":"2019-06-04T09:57:54.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 11:57:54.542 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN7VRF9760B:00000005","TimeStamp":"2019-06-04T09:57:54.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 11:57:54.542 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 11:57:54.542 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 11:57:54.543 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 11:57:54.543 +02:00 [DBG] Getting claims for access token for subject: 6b8d5850-588c-4d00-b229-958bcb481669
2019-06-04 11:57:54.550 +02:00 [DBG] gj6tOMpf41ywavccnnlcxrATPIqTYr59FvWKfNut6b4= not found in database
2019-06-04 11:57:54.596 +02:00 [DBG] Creating refresh token
2019-06-04 11:57:54.596 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 11:57:54.597 +02:00 [DBG] mDxh5CbTE4VusbKuAvPaile4FyUSZNAz1MiC0mBT7mQ= not found in database
2019-06-04 11:57:54.600 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****56d8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2cc0","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN7VRF9760B:00000005","TimeStamp":"2019-06-04T09:57:54.0000000Z","ProcessId":26436,"LocalIpAddress":"127.0.0.1:8108","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 11:57:54.600 +02:00 [DBG] Token request success.
2019-06-04 11:58:09.482 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 11:58:09.671 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 11:58:09.671 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 11:58:09.671 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 11:58:09.671 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 11:58:09.671 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 11:58:09.671 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 11:58:09.833 +02:00 [DBG] Starting grant removal
2019-06-04 11:58:10.046 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 11:58:10.048 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 11:58:10.048 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 11:58:10.048 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 11:58:10.048 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 11:58:10.048 +02:00 [DBG] Error Url: /home/error
2019-06-04 11:58:10.048 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 11:58:28.032 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 11:58:28.050 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 11:58:28.050 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 11:58:28.058 +02:00 [DBG] Start token request.
2019-06-04 11:58:28.062 +02:00 [DBG] Start client validation
2019-06-04 11:58:28.067 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 11:58:28.070 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 11:58:28.085 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 11:58:28.085 +02:00 [DBG] Secret id found: ro.client
2019-06-04 11:58:31.445 +02:00 [DBG] ro.client found in database: true
2019-06-04 11:58:31.455 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 11:58:31.462 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 11:58:31.462 +02:00 [DBG] Client validation success
2019-06-04 11:58:31.480 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QCJ5R8FC:00000002","TimeStamp":"2019-06-04T09:58:31.0000000Z","ProcessId":20200,"LocalIpAddress":"127.0.0.1:22718","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 11:58:31.490 +02:00 [DBG] Start token request validation
2019-06-04 11:58:31.499 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 11:58:31.554 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:58:31.753 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:58:31.765 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:58:31.768 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:58:31.938 +02:00 [INF] Credentials validated for username: alice
2019-06-04 11:58:31.939 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QCJ5R8FC:00000002","TimeStamp":"2019-06-04T09:58:31.0000000Z","ProcessId":20200,"LocalIpAddress":"127.0.0.1:22718","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 11:58:31.946 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QCJ5R8FC:00000002","TimeStamp":"2019-06-04T09:58:31.0000000Z","ProcessId":20200,"LocalIpAddress":"127.0.0.1:22718","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 11:58:31.946 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 11:58:31.955 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 11:58:31.975 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 11:58:31.976 +02:00 [DBG] Getting claims for access token for subject: 6b8d5850-588c-4d00-b229-958bcb481669
2019-06-04 11:58:32.116 +02:00 [DBG] 5Rr/TOCV1QNf/tGLmuyGxfT7PVu6rwnWaABcMaAml1U= not found in database
2019-06-04 11:58:32.179 +02:00 [DBG] Creating refresh token
2019-06-04 11:58:32.179 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 11:58:32.183 +02:00 [DBG] Sufbc+yovrd39eTfKpuxkr3NWqsMnH3CYi7DFD6xaG8= not found in database
2019-06-04 11:58:32.191 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"6b8d5850-588c-4d00-b229-958bcb481669","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a422","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b841","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QCJ5R8FC:00000002","TimeStamp":"2019-06-04T09:58:32.0000000Z","ProcessId":20200,"LocalIpAddress":"127.0.0.1:22718","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 11:58:32.193 +02:00 [DBG] Token request success.
2019-06-04 11:58:40.898 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 11:58:40.900 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 11:58:40.900 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 11:58:40.906 +02:00 [DBG] Start userinfo request
2019-06-04 11:58:40.910 +02:00 [DBG] Bearer token found in header
2019-06-04 11:58:40.938 +02:00 [DBG] 5Rr/TOCV1QNf/tGLmuyGxfT7PVu6rwnWaABcMaAml1U= found in database: true
2019-06-04 11:58:40.964 +02:00 [DBG] ro.client found in database: true
2019-06-04 11:58:40.964 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 11:58:40.971 +02:00 [DBG] ro.client found in database: true
2019-06-04 11:58:40.972 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 11:58:40.983 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-04 11:58:40.986 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"6727d2b3a9e077ccc95f846af9c9995ef031892b5cc72257c0d4ded04cbbb841","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559642312,"exp":1559645912,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"6b8d5850-588c-4d00-b229-958bcb481669","auth_time":1559642311,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-04 11:58:40.996 +02:00 [DBG] Creating userinfo response
2019-06-04 11:58:40.999 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 11:58:41.003 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 11:58:41.011 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:58:41.011 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-04 11:58:41.011 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 11:58:41.013 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 11:58:41.020 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-04 11:58:41.020 +02:00 [DBG] End userinfo request
2019-06-04 11:58:48.574 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 11:58:48.575 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 11:58:48.575 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 11:58:48.578 +02:00 [DBG] Start discovery request
2019-06-04 11:58:48.659 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 11:58:48.771 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 11:58:48.771 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 11:58:48.771 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 11:58:48.774 +02:00 [DBG] Start key discovery request
2019-06-04 11:58:51.359 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 11:58:51.360 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 11:58:51.360 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 11:58:51.360 +02:00 [DBG] Start token request.
2019-06-04 11:58:51.361 +02:00 [DBG] Start client validation
2019-06-04 11:58:51.361 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 11:58:51.361 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 11:58:51.362 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 11:58:51.362 +02:00 [DBG] Secret id found: client
2019-06-04 11:58:51.367 +02:00 [DBG] client found in database: true
2019-06-04 11:58:51.367 +02:00 [DBG] client configuration validation for client client succeeded.
2019-06-04 11:58:51.367 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 11:58:51.367 +02:00 [DBG] Client validation success
2019-06-04 11:58:51.367 +02:00 [INF] {"ClientId":"client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QCJ5R8FC:00000004","TimeStamp":"2019-06-04T09:58:51.0000000Z","ProcessId":20200,"LocalIpAddress":"127.0.0.1:22718","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 11:58:51.367 +02:00 [DBG] Start token request validation
2019-06-04 11:58:51.376 +02:00 [DBG] Start client credentials token request validation
2019-06-04 11:58:51.396 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 11:58:51.422 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:58:51.423 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 11:58:51.426 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 11:58:51.427 +02:00 [DBG] client credentials token request validation success
2019-06-04 11:58:51.427 +02:00 [INF] Token request validation success, {"ClientId":"client","ClientName":null,"GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"client_credentials","client_id":"client","client_secret":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 11:58:51.428 +02:00 [DBG] Getting claims for access token for client: client
2019-06-04 11:58:51.560 +02:00 [INF] {"ClientId":"client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****iKJA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QCJ5R8FC:00000004","TimeStamp":"2019-06-04T09:58:51.0000000Z","ProcessId":20200,"LocalIpAddress":"127.0.0.1:22718","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 11:58:51.560 +02:00 [DBG] Token request success.
2019-06-04 11:58:58.870 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 11:58:58.870 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 11:58:58.870 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 11:58:58.871 +02:00 [DBG] Start userinfo request
2019-06-04 11:58:58.871 +02:00 [DBG] Bearer token found in header
2019-06-04 11:58:58.935 +02:00 [DBG] client found in database: true
2019-06-04 11:58:58.935 +02:00 [DBG] client configuration validation for client client succeeded.
2019-06-04 11:58:58.941 +02:00 [DBG] client found in database: true
2019-06-04 11:58:58.941 +02:00 [DBG] client configuration validation for client client succeeded.
2019-06-04 11:58:58.941 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559642331,"exp":1559645931,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"client","scope":"api1"},"$type":"TokenValidationLog"}
2019-06-04 12:00:46.899 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:00:46.941 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:00:46.941 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:00:46.941 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:00:46.941 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:00:46.941 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:00:46.941 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:00:47.059 +02:00 [DBG] Starting grant removal
2019-06-04 12:00:47.405 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:00:47.408 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:00:47.408 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:00:47.408 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:00:47.408 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:00:47.408 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:00:47.408 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:01:21.592 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:01:21.611 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:01:21.612 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:01:21.620 +02:00 [DBG] Start token request.
2019-06-04 12:01:21.625 +02:00 [DBG] Start client validation
2019-06-04 12:01:21.629 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:01:21.632 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:01:21.646 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:01:21.646 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:01:22.031 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:01:22.042 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:01:22.050 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:01:22.050 +02:00 [DBG] Client validation success
2019-06-04 12:01:22.077 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QE22L60P:00000002","TimeStamp":"2019-06-04T10:01:22.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:01:22.088 +02:00 [DBG] Start token request validation
2019-06-04 12:01:22.098 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:01:22.162 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:01:22.310 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:01:22.323 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:01:22.326 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:01:22.367 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:01:22.368 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QE22L60P:00000002","TimeStamp":"2019-06-04T10:01:22.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:01:22.375 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QE22L60P:00000002","TimeStamp":"2019-06-04T10:01:22.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:01:22.375 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:01:22.387 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:01:22.408 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:01:22.408 +02:00 [DBG] Getting claims for access token for subject: ca2843a3-ed78-4e54-854b-9add074db8eb
2019-06-04 12:01:22.519 +02:00 [DBG] ZdrkNzArhXUdSPW9JB4gHVy73xkpPsPafwp3g5TQMtk= not found in database
2019-06-04 12:01:22.540 +02:00 [DBG] Creating refresh token
2019-06-04 12:01:22.540 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:01:22.545 +02:00 [DBG] pq5IrjSnG3Tp0D9xyusViyhuAqG/8S9T2vvHZ1/hMdk= not found in database
2019-06-04 12:01:22.553 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****b7cc","$type":"Token"},{"TokenType":"access_token","TokenValue":"****27a2","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QE22L60P:00000002","TimeStamp":"2019-06-04T10:01:22.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:01:22.554 +02:00 [DBG] Token request success.
2019-06-04 12:01:30.308 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:01:30.308 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:01:30.309 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:01:30.312 +02:00 [DBG] Start discovery request
2019-06-04 12:01:30.381 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:01:30.492 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:01:30.493 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:01:30.493 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:01:30.498 +02:00 [DBG] Start key discovery request
2019-06-04 12:01:44.614 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:01:44.615 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:01:44.615 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:01:44.615 +02:00 [DBG] Start token request.
2019-06-04 12:01:44.615 +02:00 [DBG] Start client validation
2019-06-04 12:01:44.616 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:01:44.616 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:01:44.616 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:01:44.616 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:01:44.621 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:01:44.622 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:01:44.622 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:01:44.622 +02:00 [DBG] Client validation success
2019-06-04 12:01:44.622 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QE22L60Q:00000003","TimeStamp":"2019-06-04T10:01:44.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:01:44.622 +02:00 [DBG] Start token request validation
2019-06-04 12:01:44.636 +02:00 [DBG] Start validation of custom grant token request
2019-06-04 12:01:44.637 +02:00 [ERR] Client does not have the custom grant type in the allowed list, therefore requested grant is not allowed{"clientId":"ro.client"}, details: {"ClientId":"ro.client","ClientName":null,"GrantType":"api1","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"api1","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:01:44.639 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"api1","Error":"unsupported_grant_type","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN8QE22L60Q:00000003","TimeStamp":"2019-06-04T10:01:44.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-04 12:02:02.443 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:02:02.444 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:02:02.444 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:02:02.444 +02:00 [DBG] Start token request.
2019-06-04 12:02:02.444 +02:00 [DBG] Start client validation
2019-06-04 12:02:02.444 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:02:02.444 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:02:02.445 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:02:02.445 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:02:02.449 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:02:02.449 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:02:02.449 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:02:02.449 +02:00 [DBG] Client validation success
2019-06-04 12:02:02.449 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QE22L60P:00000004","TimeStamp":"2019-06-04T10:02:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:02:02.449 +02:00 [DBG] Start token request validation
2019-06-04 12:02:02.449 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:02:02.454 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:02:02.484 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:02:02.485 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:02:02.488 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:02:02.497 +02:00 [WRN] Invalid password for user ca2843a3-ed78-4e54-854b-9add074db8eb.
2019-06-04 12:02:02.499 +02:00 [WRN] User ca2843a3-ed78-4e54-854b-9add074db8eb failed to provide the correct password.
2019-06-04 12:02:02.509 +02:00 [INF] Authentication failed for username: alice, reason: invalid credentials
2019-06-04 12:02:02.510 +02:00 [INF] {"Username":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN8QE22L60P:00000004","TimeStamp":"2019-06-04T10:02:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-06-04 12:02:02.538 +02:00 [ERR] Error logging Index was outside the bounds of the array., request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:02:02.538 +02:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":"ro.client","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN8QE22L60P:00000004","TimeStamp":"2019-06-04T10:02:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-06-04 12:02:02.538 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN8QE22L60P:00000004","TimeStamp":"2019-06-04T10:02:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-04 12:02:21.275 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:02:21.276 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:02:21.276 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:02:21.276 +02:00 [DBG] Start token request.
2019-06-04 12:02:21.276 +02:00 [DBG] Start client validation
2019-06-04 12:02:21.276 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:02:21.276 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:02:21.276 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:02:21.276 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:02:21.281 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:02:21.281 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:02:21.281 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:02:21.281 +02:00 [DBG] Client validation success
2019-06-04 12:02:21.281 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QE22L60Q:00000004","TimeStamp":"2019-06-04T10:02:21.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:02:21.281 +02:00 [DBG] Start token request validation
2019-06-04 12:02:21.281 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:02:21.283 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:02:21.286 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:02:21.288 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:02:21.291 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:02:21.319 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:02:21.319 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QE22L60Q:00000004","TimeStamp":"2019-06-04T10:02:21.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:02:21.319 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QE22L60Q:00000004","TimeStamp":"2019-06-04T10:02:21.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:02:21.319 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:02:21.319 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:02:21.320 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:02:21.320 +02:00 [DBG] Getting claims for access token for subject: ca2843a3-ed78-4e54-854b-9add074db8eb
2019-06-04 12:02:21.325 +02:00 [DBG] 1esqoUvK63rOG8RgUFmMlggv1F8wrIF/+BgKWINEm+I= not found in database
2019-06-04 12:02:21.344 +02:00 [DBG] Creating refresh token
2019-06-04 12:02:21.344 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:02:21.348 +02:00 [DBG] zFKm3KMa1Yx90cQS8wl6F6OIfB+6qOPHUi8CJE+Pz5I= not found in database
2019-06-04 12:02:21.352 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****269d","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2969","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QE22L60Q:00000004","TimeStamp":"2019-06-04T10:02:21.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:02:21.352 +02:00 [DBG] Token request success.
2019-06-04 12:03:02.401 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:03:02.402 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:03:02.402 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:03:02.402 +02:00 [DBG] Start token request.
2019-06-04 12:03:02.402 +02:00 [DBG] Start client validation
2019-06-04 12:03:02.402 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:03:02.402 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:03:02.402 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:03:02.402 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:03:02.407 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:03:02.407 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:03:02.407 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:03:02.407 +02:00 [DBG] Client validation success
2019-06-04 12:03:02.407 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QE22L60P:00000005","TimeStamp":"2019-06-04T10:03:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:03:02.407 +02:00 [DBG] Start token request validation
2019-06-04 12:03:02.408 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:03:02.409 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:03:02.415 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:03:02.416 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:03:02.420 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:03:02.430 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:03:02.430 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QE22L60P:00000005","TimeStamp":"2019-06-04T10:03:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:03:02.431 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QE22L60P:00000005","TimeStamp":"2019-06-04T10:03:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:03:02.431 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:03:02.431 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:03:02.431 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:03:02.431 +02:00 [DBG] Getting claims for access token for subject: ca2843a3-ed78-4e54-854b-9add074db8eb
2019-06-04 12:03:02.437 +02:00 [DBG] gxvy6yi3puRTHX9neo4lBmTogu4xlpDQkpvrwS7VvAU= not found in database
2019-06-04 12:03:02.450 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ca2843a3-ed78-4e54-854b-9add074db8eb","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****9179","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QE22L60P:00000005","TimeStamp":"2019-06-04T10:03:02.0000000Z","ProcessId":20452,"LocalIpAddress":"127.0.0.1:4537","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:03:02.450 +02:00 [DBG] Token request success.
2019-06-04 12:07:14.120 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:07:14.210 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:07:14.210 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:07:14.210 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:07:14.210 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:07:14.210 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:07:14.210 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:07:14.283 +02:00 [DBG] Starting grant removal
2019-06-04 12:07:14.410 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:07:14.412 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:07:14.412 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:07:14.412 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:07:14.412 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:07:14.412 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:07:14.412 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:08:18.850 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:08:18.949 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:08:18.949 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:08:18.949 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:08:18.949 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:08:18.949 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:08:18.949 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:08:19.022 +02:00 [DBG] Starting grant removal
2019-06-04 12:08:19.258 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:08:19.260 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:08:19.260 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:08:19.260 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:08:19.260 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:08:19.260 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:08:19.260 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:08:36.742 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:08:36.763 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:08:36.763 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:08:36.771 +02:00 [DBG] Start token request.
2019-06-04 12:08:36.779 +02:00 [DBG] Start client validation
2019-06-04 12:08:36.784 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:08:36.787 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:08:36.802 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:08:36.802 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:08:37.883 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:08:37.892 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:08:37.899 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:08:37.899 +02:00 [DBG] Client validation success
2019-06-04 12:08:37.917 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QI8OBPID:00000003","TimeStamp":"2019-06-04T10:08:37.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:08:37.928 +02:00 [DBG] Start token request validation
2019-06-04 12:08:37.936 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:08:37.981 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:08:38.163 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:08:38.174 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:08:38.178 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:08:38.333 +02:00 [WRN] Invalid password for user 4715d64d-7ea9-42f0-ae5b-c6dc8923eb8f.
2019-06-04 12:08:38.334 +02:00 [WRN] User 4715d64d-7ea9-42f0-ae5b-c6dc8923eb8f failed to provide the correct password.
2019-06-04 12:08:38.411 +02:00 [INF] Authentication failed for username: alice, reason: invalid credentials
2019-06-04 12:08:38.412 +02:00 [INF] {"Username":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLN8QI8OBPID:00000003","TimeStamp":"2019-06-04T10:08:38.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-06-04 12:08:38.420 +02:00 [ERR] Error logging Index was outside the bounds of the array., request details: {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:08:38.422 +02:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":"ro.client","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid_username_or_password","ActivityId":"0HLN8QI8OBPID:00000003","TimeStamp":"2019-06-04T10:08:38.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-06-04 12:08:38.426 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"password","Error":"invalid_grant","ErrorDescription":"invalid_username_or_password","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN8QI8OBPID:00000003","TimeStamp":"2019-06-04T10:08:38.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-04 12:08:46.490 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:08:46.490 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:08:46.491 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:08:46.491 +02:00 [DBG] Start token request.
2019-06-04 12:08:46.491 +02:00 [DBG] Start client validation
2019-06-04 12:08:46.491 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:08:46.491 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:08:46.492 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:08:46.492 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:08:46.497 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:08:46.497 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:08:46.497 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:08:46.497 +02:00 [DBG] Client validation success
2019-06-04 12:08:46.497 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QI8OBPID:00000004","TimeStamp":"2019-06-04T10:08:46.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:08:46.497 +02:00 [DBG] Start token request validation
2019-06-04 12:08:46.498 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:08:46.498 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:08:46.502 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:08:46.503 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:08:46.507 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:08:46.537 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:08:46.538 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4715d64d-7ea9-42f0-ae5b-c6dc8923eb8f","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QI8OBPID:00000004","TimeStamp":"2019-06-04T10:08:46.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:08:46.547 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4715d64d-7ea9-42f0-ae5b-c6dc8923eb8f","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QI8OBPID:00000004","TimeStamp":"2019-06-04T10:08:46.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:08:46.547 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:08:46.548 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:08:46.571 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:08:46.572 +02:00 [DBG] Getting claims for access token for subject: 4715d64d-7ea9-42f0-ae5b-c6dc8923eb8f
2019-06-04 12:08:46.736 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4715d64d-7ea9-42f0-ae5b-c6dc8923eb8f","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****Th8Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QI8OBPID:00000004","TimeStamp":"2019-06-04T10:08:46.0000000Z","ProcessId":15672,"LocalIpAddress":"127.0.0.1:12013","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:08:46.737 +02:00 [DBG] Token request success.
2019-06-04 12:09:00.312 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:09:00.313 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:09:00.313 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:09:00.317 +02:00 [DBG] Start discovery request
2019-06-04 12:09:00.438 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:09:00.551 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:09:00.552 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:09:00.552 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:09:00.557 +02:00 [DBG] Start key discovery request
2019-06-04 12:10:07.187 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:10:07.326 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:10:07.326 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:10:07.326 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:10:07.326 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:10:07.327 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:10:07.327 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:10:07.453 +02:00 [DBG] Starting grant removal
2019-06-04 12:10:07.638 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:10:07.640 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:10:07.640 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:10:07.640 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:10:07.640 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:10:07.640 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:10:07.640 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:10:12.634 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:10:12.655 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:10:12.656 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:10:12.665 +02:00 [DBG] Start token request.
2019-06-04 12:10:12.671 +02:00 [DBG] Start client validation
2019-06-04 12:10:12.676 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:10:12.682 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:10:12.698 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:10:12.698 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:10:23.237 +02:00 [ERR] An error occurred using the connection to database 'IdentityServer4.Combined-2.3.0' on server '(LocalDb)\MSSQLLocalDB'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:10:23.420 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:10:23.426 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:10:23.590 +02:00 [INF] {"Details":"System.Data.SqlClient.SqlException (0x80131904): Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'PANDASOFT\\jorge.guerola'.\r\n   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)\r\n   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\EntityFramework.Storage\\src\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Stores\\ValidatingClientStore.cs:line 52\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.ClientSecretValidator.ValidateAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Validation\\Default\\ClientSecretValidator.cs:line 67\r\n   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Endpoints\\TokenEndpoint.cs:line 78\r\n   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Endpoints\\TokenEndpoint.cs:line 70\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922\r\nError Number:4060,State:1,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'PANDASOFT\\jorge.guerola'.","ActivityId":"0HLN8QJ9199Q6:00000002","TimeStamp":"2019-06-04T10:10:23.0000000Z","ProcessId":25292,"LocalIpAddress":"127.0.0.1:3241","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-06-04 12:10:23.598 +02:00 [FTL] Unhandled exception: Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\ValidatingClientStore.cs:line 52
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.ClientSecretValidator.ValidateAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Validation\Default\ClientSecretValidator.cs:line 67
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 78
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:10:26.950 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:10:26.951 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:10:26.951 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:10:26.951 +02:00 [DBG] Start token request.
2019-06-04 12:10:26.951 +02:00 [DBG] Start client validation
2019-06-04 12:10:26.951 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:10:26.951 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:10:26.952 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:10:26.952 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:10:26.954 +02:00 [ERR] An error occurred using the connection to database 'IdentityServer4.Combined-2.3.0' on server '(LocalDb)\MSSQLLocalDB'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:10:26.956 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:10:26.962 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:10:26.971 +02:00 [INF] {"Details":"System.Data.SqlClient.SqlException (0x80131904): Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'PANDASOFT\\jorge.guerola'.\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\EntityFramework.Storage\\src\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Stores\\ValidatingClientStore.cs:line 52\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.ClientSecretValidator.ValidateAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Validation\\Default\\ClientSecretValidator.cs:line 67\r\n   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Endpoints\\TokenEndpoint.cs:line 78\r\n   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Endpoints\\TokenEndpoint.cs:line 70\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 54\r\nClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922\r\nError Number:4060,State:1,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Cannot open database \"IdentityServer4.Combined-2.3.0\" requested by the login. The login failed.\r\nLogin failed for user 'PANDASOFT\\jorge.guerola'.","ActivityId":"0HLN8QJ9199Q7:00000002","TimeStamp":"2019-06-04T10:10:26.0000000Z","ProcessId":25292,"LocalIpAddress":"127.0.0.1:3241","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-06-04 12:10:26.987 +02:00 [FTL] Unhandled exception: Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
System.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServer4.Combined-2.3.0" requested by the login. The login failed.
Login failed for user 'PANDASOFT\jorge.guerola'.
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\ValidatingClientStore.cs:line 52
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.ClientSecretValidator.ValidateAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Validation\Default\ClientSecretValidator.cs:line 67
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 78
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
ClientConnectionId:c332f71c-04a0-49b7-987e-2097b195a922
Error Number:4060,State:1,Class:11
2019-06-04 12:11:13.229 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:11:13.276 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:11:13.276 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:11:13.276 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:11:13.276 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:11:13.276 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:11:13.276 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:11:13.415 +02:00 [DBG] Starting grant removal
2019-06-04 12:11:13.824 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:11:13.826 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:11:13.826 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:11:13.826 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:11:13.826 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:11:13.826 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:11:13.826 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:11:19.659 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:11:19.673 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:11:19.674 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:11:19.682 +02:00 [DBG] Start token request.
2019-06-04 12:11:19.687 +02:00 [DBG] Start client validation
2019-06-04 12:11:19.691 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:11:19.695 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:11:19.712 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:11:19.712 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:11:20.121 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:11:20.131 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:11:20.140 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:11:20.140 +02:00 [DBG] Client validation success
2019-06-04 12:11:20.160 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QJSOFV68:00000002","TimeStamp":"2019-06-04T10:11:20.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:11:20.171 +02:00 [DBG] Start token request validation
2019-06-04 12:11:20.181 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:11:20.222 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:11:20.488 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:11:20.501 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:11:20.505 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:11:20.544 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:11:20.545 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2f514dff-f015-4906-86ab-2057699e835b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QJSOFV68:00000002","TimeStamp":"2019-06-04T10:11:20.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:11:20.553 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2f514dff-f015-4906-86ab-2057699e835b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QJSOFV68:00000002","TimeStamp":"2019-06-04T10:11:20.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:11:20.553 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:11:20.562 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:11:20.585 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:11:20.585 +02:00 [DBG] Getting claims for access token for subject: 2f514dff-f015-4906-86ab-2057699e835b
2019-06-04 12:11:20.791 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"2f514dff-f015-4906-86ab-2057699e835b","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****vvLg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QJSOFV68:00000002","TimeStamp":"2019-06-04T10:11:20.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:11:20.793 +02:00 [DBG] Token request success.
2019-06-04 12:11:37.467 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:11:37.468 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:11:37.468 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:11:37.472 +02:00 [DBG] Start discovery request
2019-06-04 12:11:37.543 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:11:37.659 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:11:37.659 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:11:37.659 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:11:37.663 +02:00 [DBG] Start key discovery request
2019-06-04 12:11:49.999 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 12:11:50.001 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 12:11:50.001 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 12:11:50.010 +02:00 [DBG] Start userinfo request
2019-06-04 12:11:50.016 +02:00 [DBG] Bearer token found in header
2019-06-04 12:11:50.076 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:11:50.076 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:11:50.083 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:11:50.083 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:11:50.097 +02:00 [ERR] Checking for expected scope openid failed
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559643080,"exp":1559646680,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","sub":"2f514dff-f015-4906-86ab-2057699e835b","auth_time":1559643080,"idp":"local","scope":"api1","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-04 12:12:08.098 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:12:08.099 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:12:08.099 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:12:08.099 +02:00 [DBG] Start token request.
2019-06-04 12:12:08.099 +02:00 [DBG] Start client validation
2019-06-04 12:12:08.100 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:12:08.100 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:12:08.100 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:12:08.100 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:12:08.106 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:12:08.106 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:12:08.106 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:12:08.106 +02:00 [DBG] Client validation success
2019-06-04 12:12:08.106 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QJSOFV68:00000004","TimeStamp":"2019-06-04T10:12:08.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:12:08.106 +02:00 [DBG] Start token request validation
2019-06-04 12:12:08.106 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:12:08.107 +02:00 [ERR] offline_access is not allowed for this client: ro.client
2019-06-04 12:12:08.107 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:12:08.109 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN8QJSOFV68:00000004","TimeStamp":"2019-06-04T10:12:08.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-04 12:12:23.290 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:12:23.290 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:12:23.290 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:12:23.290 +02:00 [DBG] Start token request.
2019-06-04 12:12:23.290 +02:00 [DBG] Start client validation
2019-06-04 12:12:23.290 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:12:23.291 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:12:23.291 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:12:23.291 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:12:23.296 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:12:23.296 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:12:23.296 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:12:23.296 +02:00 [DBG] Client validation success
2019-06-04 12:12:23.296 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QJSOFV69:00000004","TimeStamp":"2019-06-04T10:12:23.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:12:23.296 +02:00 [DBG] Start token request validation
2019-06-04 12:12:23.296 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:12:23.338 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:12:23.401 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:12:23.404 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:12:23.407 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:12:23.420 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:12:23.421 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2f514dff-f015-4906-86ab-2057699e835b","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QJSOFV69:00000004","TimeStamp":"2019-06-04T10:12:23.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:12:23.421 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2f514dff-f015-4906-86ab-2057699e835b","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QJSOFV69:00000004","TimeStamp":"2019-06-04T10:12:23.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:12:23.421 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:12:23.422 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:12:23.422 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:12:23.422 +02:00 [DBG] Getting claims for access token for subject: 2f514dff-f015-4906-86ab-2057699e835b
2019-06-04 12:12:23.433 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"2f514dff-f015-4906-86ab-2057699e835b","Scopes":"openid profile api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****RMyw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QJSOFV69:00000004","TimeStamp":"2019-06-04T10:12:23.0000000Z","ProcessId":5460,"LocalIpAddress":"127.0.0.1:39973","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:12:23.433 +02:00 [DBG] Token request success.
2019-06-04 12:12:50.902 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 12:12:50.902 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 12:12:50.902 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 12:12:50.902 +02:00 [DBG] Start userinfo request
2019-06-04 12:12:50.902 +02:00 [DBG] Bearer token found in header
2019-06-04 12:12:50.909 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:12:50.909 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:12:50.913 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:12:50.913 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:12:50.917 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-04 12:12:50.919 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559643143,"exp":1559646743,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","sub":"2f514dff-f015-4906-86ab-2057699e835b","auth_time":1559643143,"idp":"local","scope":["openid","profile","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-04 12:12:50.928 +02:00 [DBG] Creating userinfo response
2019-06-04 12:12:50.932 +02:00 [DBG] Scopes in access token: openid profile api1
2019-06-04 12:12:50.935 +02:00 [DBG] Scopes in access token: openid profile api1
2019-06-04 12:12:50.943 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:12:50.945 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-04 12:12:50.945 +02:00 [DBG] Scopes in access token: openid profile api1
2019-06-04 12:12:50.947 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:12:50.954 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-04 12:12:50.954 +02:00 [DBG] End userinfo request
2019-06-04 12:14:34.946 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:14:35.065 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:14:35.066 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:14:35.066 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:14:35.066 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:14:35.066 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:14:35.066 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:14:35.167 +02:00 [DBG] Starting grant removal
2019-06-04 12:14:35.410 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:14:35.412 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:14:35.412 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:14:35.412 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:14:35.412 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:14:35.412 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:14:35.412 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:14:58.148 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:14:58.290 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:14:58.290 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:14:58.290 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:14:58.290 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:14:58.290 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:14:58.290 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:14:58.428 +02:00 [DBG] Starting grant removal
2019-06-04 12:14:58.719 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:14:58.721 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:14:58.721 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:14:58.721 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:14:58.721 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:14:58.721 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:14:58.721 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:15:02.448 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 12:15:02.462 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 12:15:02.462 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 12:15:02.469 +02:00 [DBG] Start userinfo request
2019-06-04 12:15:02.471 +02:00 [DBG] Bearer token found in header
2019-06-04 12:15:03.666 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:15:03.676 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:15:03.684 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:15:03.684 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:15:03.772 +02:00 [WRN] No user found matching subject Id: 2f514dff-f015-4906-86ab-2057699e835b
2019-06-04 12:15:03.774 +02:00 [ERR] User marked as not active: 2f514dff-f015-4906-86ab-2057699e835b
2019-06-04 12:15:07.770 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:15:07.777 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:15:07.777 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:15:07.783 +02:00 [DBG] Start token request.
2019-06-04 12:15:07.789 +02:00 [DBG] Start client validation
2019-06-04 12:15:07.795 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:15:07.799 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:15:07.817 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:15:07.817 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:15:07.821 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:15:07.821 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:15:07.831 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:15:07.831 +02:00 [DBG] Client validation success
2019-06-04 12:15:07.854 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QLVP96MD:00000002","TimeStamp":"2019-06-04T10:15:07.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:15:07.873 +02:00 [DBG] Start token request validation
2019-06-04 12:15:07.890 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:15:07.979 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:15:08.220 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:15:08.232 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:15:08.235 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:15:08.317 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:15:08.318 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"093b674d-02c9-427f-bf19-5540b629b2bf","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QLVP96MD:00000002","TimeStamp":"2019-06-04T10:15:08.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:15:08.321 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"093b674d-02c9-427f-bf19-5540b629b2bf","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QLVP96MD:00000002","TimeStamp":"2019-06-04T10:15:08.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:15:08.321 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:15:08.329 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:15:08.353 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:15:08.354 +02:00 [DBG] Getting claims for access token for subject: 093b674d-02c9-427f-bf19-5540b629b2bf
2019-06-04 12:15:08.490 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"093b674d-02c9-427f-bf19-5540b629b2bf","Scopes":"openid profile api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****w2yw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QLVP96MD:00000002","TimeStamp":"2019-06-04T10:15:08.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:15:08.491 +02:00 [DBG] Token request success.
2019-06-04 12:15:15.981 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:15:15.982 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:15:15.982 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:15:15.986 +02:00 [DBG] Start discovery request
2019-06-04 12:15:16.070 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:15:16.178 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:15:16.179 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:15:16.179 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:15:16.182 +02:00 [DBG] Start key discovery request
2019-06-04 12:15:26.218 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:15:26.219 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:15:26.219 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:15:26.219 +02:00 [DBG] Start token request.
2019-06-04 12:15:26.219 +02:00 [DBG] Start client validation
2019-06-04 12:15:26.219 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:15:26.219 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:15:26.220 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:15:26.220 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:15:26.224 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:15:26.224 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:15:26.225 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:15:26.225 +02:00 [DBG] Client validation success
2019-06-04 12:15:26.225 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QLVP96MC:00000004","TimeStamp":"2019-06-04T10:15:26.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:15:26.225 +02:00 [DBG] Start token request validation
2019-06-04 12:15:26.225 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:15:26.229 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:15:26.233 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:15:26.235 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:15:26.238 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:15:26.249 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:15:26.249 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"093b674d-02c9-427f-bf19-5540b629b2bf","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QLVP96MC:00000004","TimeStamp":"2019-06-04T10:15:26.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:15:26.249 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"093b674d-02c9-427f-bf19-5540b629b2bf","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QLVP96MC:00000004","TimeStamp":"2019-06-04T10:15:26.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:15:26.249 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:15:26.249 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:15:26.249 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:15:26.249 +02:00 [DBG] Getting claims for access token for subject: 093b674d-02c9-427f-bf19-5540b629b2bf
2019-06-04 12:15:26.259 +02:00 [DBG] Creating refresh token
2019-06-04 12:15:26.260 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:15:26.318 +02:00 [DBG] 9KyW0H2CvYns0RNnNxgJFH8QrZID7/nQUb7rUi6Efxw= not found in database
2019-06-04 12:15:26.401 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"093b674d-02c9-427f-bf19-5540b629b2bf","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a849","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ym1Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QLVP96MC:00000004","TimeStamp":"2019-06-04T10:15:26.0000000Z","ProcessId":16544,"LocalIpAddress":"127.0.0.1:5095","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:15:26.401 +02:00 [DBG] Token request success.
2019-06-04 12:15:46.277 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 12:15:46.278 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 12:15:46.279 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 12:15:46.279 +02:00 [DBG] Start userinfo request
2019-06-04 12:15:46.279 +02:00 [DBG] Bearer token found in header
2019-06-04 12:15:46.286 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:15:46.286 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:15:46.290 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:15:46.290 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:15:46.296 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-04 12:15:46.298 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1559643326,"exp":1559646926,"iss":"http://localhost:5000","aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","sub":"093b674d-02c9-427f-bf19-5540b629b2bf","auth_time":1559643326,"idp":"local","scope":["openid","profile","api1","offline_access"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-04 12:15:46.305 +02:00 [DBG] Creating userinfo response
2019-06-04 12:15:46.309 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 12:15:46.312 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 12:15:46.324 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:15:46.325 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-04 12:15:46.325 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 12:15:46.327 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:15:46.334 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-04 12:15:46.334 +02:00 [DBG] End userinfo request
2019-06-04 12:16:58.050 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:16:58.144 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:16:58.144 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:16:58.144 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:16:58.144 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:16:58.144 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:16:58.144 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:16:58.219 +02:00 [DBG] Starting grant removal
2019-06-04 12:16:58.542 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:16:58.544 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:16:58.544 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:16:58.544 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:16:58.544 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:16:58.544 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:16:58.544 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:17:18.137 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:17:18.275 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:17:18.276 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:17:18.276 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:17:18.276 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:17:18.276 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:17:18.276 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:17:18.423 +02:00 [DBG] Starting grant removal
2019-06-04 12:17:18.703 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:17:18.704 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:17:18.704 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:17:18.704 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:17:18.704 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:17:18.704 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:17:18.704 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:17:22.174 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:17:22.196 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:17:22.196 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:17:22.204 +02:00 [DBG] Start token request.
2019-06-04 12:17:22.209 +02:00 [DBG] Start client validation
2019-06-04 12:17:22.213 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:17:22.218 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:17:22.239 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:17:22.239 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:17:23.374 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:17:23.385 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:17:23.392 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:17:23.392 +02:00 [DBG] Client validation success
2019-06-04 12:17:23.411 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8QN9FVHHS:00000002","TimeStamp":"2019-06-04T10:17:23.0000000Z","ProcessId":16616,"LocalIpAddress":"127.0.0.1:43165","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:17:23.424 +02:00 [DBG] Start token request validation
2019-06-04 12:17:23.436 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:17:23.500 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:17:23.703 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:17:23.716 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:17:23.720 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:17:23.879 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:17:23.881 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QN9FVHHS:00000002","TimeStamp":"2019-06-04T10:17:23.0000000Z","ProcessId":16616,"LocalIpAddress":"127.0.0.1:43165","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:17:23.888 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8QN9FVHHS:00000002","TimeStamp":"2019-06-04T10:17:23.0000000Z","ProcessId":16616,"LocalIpAddress":"127.0.0.1:43165","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:17:23.888 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:17:23.895 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:17:23.916 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:17:23.917 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 12:17:24.052 +02:00 [DBG] UqxRX6Wm5av82FOoiS77Pn5tTkjFESLw/ebmKE/UjB4= not found in database
2019-06-04 12:17:24.097 +02:00 [DBG] Creating refresh token
2019-06-04 12:17:24.097 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:17:24.102 +02:00 [DBG] yDLIwhFwC9B/MQGpPZbeoLMT02RTs/d65CL/7mam4DE= not found in database
2019-06-04 12:17:24.110 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a544","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b5e0","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8QN9FVHHS:00000002","TimeStamp":"2019-06-04T10:17:24.0000000Z","ProcessId":16616,"LocalIpAddress":"127.0.0.1:43165","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:17:24.112 +02:00 [DBG] Token request success.
2019-06-04 12:17:30.745 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:17:30.749 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:17:30.749 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:17:30.753 +02:00 [DBG] Start discovery request
2019-06-04 12:17:30.830 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:17:30.939 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:17:30.940 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:17:30.940 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:17:30.944 +02:00 [DBG] Start key discovery request
2019-06-04 12:40:20.626 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:40:20.800 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:40:20.800 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:40:20.800 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:40:20.800 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:40:20.800 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:40:20.800 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:40:20.973 +02:00 [DBG] Starting grant removal
2019-06-04 12:40:21.206 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:40:21.208 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:40:21.208 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:40:21.208 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:40:21.208 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:40:21.208 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:40:21.208 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:40:26.221 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:40:26.240 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:40:26.241 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:40:26.247 +02:00 [DBG] Start token request.
2019-06-04 12:40:26.253 +02:00 [DBG] Start client validation
2019-06-04 12:40:26.258 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:40:26.261 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:40:26.278 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:40:26.278 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:40:27.414 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:40:27.424 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:40:27.430 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:40:27.431 +02:00 [DBG] Client validation success
2019-06-04 12:40:27.451 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000002","TimeStamp":"2019-06-04T10:40:27.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:40:27.464 +02:00 [DBG] Start token request validation
2019-06-04 12:40:27.476 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:40:27.534 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:40:27.753 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:40:27.767 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:40:27.771 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:40:27.966 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:40:27.967 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000002","TimeStamp":"2019-06-04T10:40:27.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:40:27.974 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000002","TimeStamp":"2019-06-04T10:40:27.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:40:27.974 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:40:27.982 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:40:28.008 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:40:28.008 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 12:40:28.143 +02:00 [DBG] wORNlzJv4Fw93vSi8Ei9Wg+P5v1LH8MIc6lTdUOMTbA= not found in database
2019-06-04 12:40:28.187 +02:00 [DBG] Creating refresh token
2019-06-04 12:40:28.187 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:40:28.192 +02:00 [DBG] IZ4jRBP9fTitgLQHmeDkbApbiTYIYzJgeVLsyBNYgq4= not found in database
2019-06-04 12:40:28.224 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****5b63","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0bdd","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000002","TimeStamp":"2019-06-04T10:40:28.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:40:28.226 +02:00 [DBG] Token request success.
2019-06-04 12:40:32.941 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:40:32.943 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:40:32.943 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:40:32.967 +02:00 [DBG] Start discovery request
2019-06-04 12:40:33.045 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:40:33.100 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:40:33.101 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:40:33.101 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:40:33.105 +02:00 [DBG] Start key discovery request
2019-06-04 12:40:33.289 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:40:33.291 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:40:33.291 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:40:33.299 +02:00 [DBG] Starting introspection request.
2019-06-04 12:40:33.305 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:40:33.305 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:40:33.305 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:40:33.305 +02:00 [DBG] Secret id found: api1
2019-06-04 12:40:33.355 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:40:33.356 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:40:33.356 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:40:33.356 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R45GJ3H7:00000003","TimeStamp":"2019-06-04T10:40:33.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:40:33.356 +02:00 [ERR] API validation failed.
2019-06-04 12:40:33.356 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:40:36.079 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:40:36.080 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:40:36.081 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:40:36.081 +02:00 [DBG] Starting introspection request.
2019-06-04 12:40:36.082 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:40:36.082 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:40:36.083 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:40:36.083 +02:00 [DBG] Secret id found: api1
2019-06-04 12:40:36.087 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:40:36.088 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:40:36.088 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:40:36.088 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R45GJ3H8:00000004","TimeStamp":"2019-06-04T10:40:36.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:40:36.088 +02:00 [ERR] API validation failed.
2019-06-04 12:40:36.088 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:40:39.112 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:40:39.112 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:40:39.112 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:40:39.112 +02:00 [DBG] Starting introspection request.
2019-06-04 12:40:39.112 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:40:39.113 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:40:39.113 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:40:39.113 +02:00 [DBG] Secret id found: api1
2019-06-04 12:40:39.116 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:40:39.116 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:40:39.116 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:40:39.116 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R45GJ3H7:00000004","TimeStamp":"2019-06-04T10:40:39.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:40:39.116 +02:00 [ERR] API validation failed.
2019-06-04 12:40:39.116 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:40:47.567 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:40:47.568 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:40:47.568 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:40:47.568 +02:00 [DBG] Start token request.
2019-06-04 12:40:47.568 +02:00 [DBG] Start client validation
2019-06-04 12:40:47.568 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:40:47.568 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:40:47.569 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:40:47.569 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:40:47.577 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:40:47.578 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:40:47.578 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:40:47.578 +02:00 [DBG] Client validation success
2019-06-04 12:40:47.578 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000005","TimeStamp":"2019-06-04T10:40:47.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:40:47.578 +02:00 [DBG] Start token request validation
2019-06-04 12:40:47.578 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:40:47.606 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:40:47.648 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:40:47.649 +02:00 [DBG] Found [] identity scopes in database
2019-06-04 12:40:47.652 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:40:47.668 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:40:47.668 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000005","TimeStamp":"2019-06-04T10:40:47.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:40:47.668 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000005","TimeStamp":"2019-06-04T10:40:47.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:40:47.669 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:40:47.669 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:40:47.669 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:40:47.669 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 12:40:47.676 +02:00 [DBG] h8Ac0IV6pUUi9suc+wLu2ABJjt309hilLCjaLrQd1BE= not found in database
2019-06-04 12:40:47.679 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"api1","GrantType":"password","Tokens":[{"TokenType":"access_token","TokenValue":"****6a03","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000005","TimeStamp":"2019-06-04T10:40:47.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:40:47.679 +02:00 [DBG] Token request success.
2019-06-04 12:40:53.690 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:40:53.690 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:40:53.690 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:40:53.690 +02:00 [DBG] Starting introspection request.
2019-06-04 12:40:53.690 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:40:53.690 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:40:53.691 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:40:53.691 +02:00 [DBG] Secret id found: api1
2019-06-04 12:40:53.694 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:40:53.694 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:40:53.694 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:40:53.694 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R45GJ3H7:00000005","TimeStamp":"2019-06-04T10:40:53.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:40:53.694 +02:00 [ERR] API validation failed.
2019-06-04 12:40:53.694 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:40:58.825 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:40:58.826 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:40:58.826 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:40:58.826 +02:00 [DBG] Start token request.
2019-06-04 12:40:58.826 +02:00 [DBG] Start client validation
2019-06-04 12:40:58.826 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:40:58.826 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:40:58.826 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:40:58.827 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:40:58.831 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:40:58.831 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:40:58.831 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:40:58.831 +02:00 [DBG] Client validation success
2019-06-04 12:40:58.831 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000006","TimeStamp":"2019-06-04T10:40:58.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:40:58.832 +02:00 [DBG] Start token request validation
2019-06-04 12:40:58.832 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:40:58.834 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:40:58.837 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:40:58.839 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:40:58.843 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:40:58.853 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:40:58.854 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000006","TimeStamp":"2019-06-04T10:40:58.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:40:58.854 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000006","TimeStamp":"2019-06-04T10:40:58.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:40:58.854 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:40:58.855 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:40:58.855 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:40:58.855 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 12:40:58.862 +02:00 [DBG] BkBGSjuEoMg3DrCT+zALzL6tA2d5H/G6w4LTogfTND4= not found in database
2019-06-04 12:40:58.878 +02:00 [DBG] Creating refresh token
2019-06-04 12:40:58.878 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:40:58.881 +02:00 [DBG] BTvHd2bAowx7LhRV8CMFJpjHBXJkf6Rqlt+H/nalDlc= not found in database
2019-06-04 12:40:58.884 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****b84c","$type":"Token"},{"TokenType":"access_token","TokenValue":"****04d1","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8R45GJ3H8:00000006","TimeStamp":"2019-06-04T10:40:58.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:40:58.885 +02:00 [DBG] Token request success.
2019-06-04 12:41:03.661 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:41:03.661 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:41:03.661 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:41:03.661 +02:00 [DBG] Starting introspection request.
2019-06-04 12:41:03.661 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:41:03.661 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:41:03.662 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:41:03.662 +02:00 [DBG] Secret id found: api1
2019-06-04 12:41:03.664 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:41:03.665 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:41:03.665 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:41:03.665 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R45GJ3H7:00000006","TimeStamp":"2019-06-04T10:41:03.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:41:03.665 +02:00 [ERR] API validation failed.
2019-06-04 12:41:03.665 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:41:22.882 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:41:22.882 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:41:22.882 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:41:22.882 +02:00 [DBG] Starting introspection request.
2019-06-04 12:41:22.882 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:41:22.882 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:41:22.882 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:41:22.882 +02:00 [DBG] Secret id found: api1
2019-06-04 12:41:22.897 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:41:22.897 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:41:22.897 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:41:22.897 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R45GJ3H8:00000007","TimeStamp":"2019-06-04T10:41:22.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:41:22.897 +02:00 [ERR] API validation failed.
2019-06-04 12:41:22.897 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:43:25.835 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:43:25.836 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:43:25.836 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:43:25.836 +02:00 [DBG] Start token request.
2019-06-04 12:43:25.836 +02:00 [DBG] Start client validation
2019-06-04 12:43:25.836 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:43:25.836 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:43:25.836 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:43:25.837 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:43:25.883 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:43:25.883 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:43:25.883 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:43:25.883 +02:00 [DBG] Client validation success
2019-06-04 12:43:25.883 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000001","TimeStamp":"2019-06-04T10:43:25.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:43:25.883 +02:00 [DBG] Start token request validation
2019-06-04 12:43:25.883 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:43:25.896 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:43:25.905 +02:00 [DBG] Found [] API scopes in database
2019-06-04 12:43:25.908 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:43:25.911 +02:00 [DBG] Found [] API scopes in database
2019-06-04 12:43:25.931 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:43:25.931 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000001","TimeStamp":"2019-06-04T10:43:25.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:43:25.931 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000001","TimeStamp":"2019-06-04T10:43:25.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:43:25.931 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:43:25.932 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:43:25.932 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:43:25.932 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 12:43:25.944 +02:00 [DBG] 0QI5BqbEaApvmMIb4BIrOehhMCiNi/DyYOg1ovuowS0= not found in database
2019-06-04 12:43:25.947 +02:00 [DBG] Creating refresh token
2019-06-04 12:43:25.947 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:43:25.948 +02:00 [DBG] o/MdC/PUQGu8GLLGVTCxvQKwjNPP2od1Njx/QAB721A= not found in database
2019-06-04 12:43:25.950 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****1952","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4fb5","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000001","TimeStamp":"2019-06-04T10:43:25.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:43:25.950 +02:00 [DBG] Token request success.
2019-06-04 12:43:31.180 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:43:31.181 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:43:31.181 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:43:31.181 +02:00 [DBG] Starting introspection request.
2019-06-04 12:43:31.181 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:43:31.181 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:43:31.182 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:43:31.182 +02:00 [DBG] Secret id found: api1
2019-06-04 12:43:31.200 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:43:31.200 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:43:31.200 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:43:31.200 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R45GJ3H9:00000002","TimeStamp":"2019-06-04T10:43:31.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:43:31.200 +02:00 [ERR] API validation failed.
2019-06-04 12:43:31.200 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:43:35.550 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:43:35.550 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:43:35.550 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:43:35.550 +02:00 [DBG] Start token request.
2019-06-04 12:43:35.550 +02:00 [DBG] Start client validation
2019-06-04 12:43:35.550 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:43:35.550 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:43:35.551 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:43:35.551 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:43:35.555 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:43:35.555 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:43:35.555 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:43:35.555 +02:00 [DBG] Client validation success
2019-06-04 12:43:35.555 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000003","TimeStamp":"2019-06-04T10:43:35.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:43:35.555 +02:00 [DBG] Start token request validation
2019-06-04 12:43:35.555 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:43:35.564 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:43:35.634 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:43:35.637 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:43:35.640 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:43:35.654 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:43:35.654 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000003","TimeStamp":"2019-06-04T10:43:35.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:43:35.654 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000003","TimeStamp":"2019-06-04T10:43:35.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:43:35.654 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:43:35.654 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:43:35.654 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:43:35.654 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 12:43:35.661 +02:00 [DBG] iOpxvF6zMylUfdjlcZEh3/hUGOcIdYtaOds/VYG4KFQ= not found in database
2019-06-04 12:43:35.664 +02:00 [DBG] Creating refresh token
2019-06-04 12:43:35.664 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:43:35.665 +02:00 [DBG] +4u6vEO9noejLAT4wvunOOmIAP5ivV37tzXqGspig08= not found in database
2019-06-04 12:43:35.667 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****75d5","$type":"Token"},{"TokenType":"access_token","TokenValue":"****15df","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8R45GJ3H9:00000003","TimeStamp":"2019-06-04T10:43:35.0000000Z","ProcessId":34072,"LocalIpAddress":"127.0.0.1:8771","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:43:35.667 +02:00 [DBG] Token request success.
2019-06-04 12:45:20.696 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:45:20.961 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:45:20.962 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:45:20.962 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:45:20.962 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:45:20.962 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:45:20.962 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:45:21.140 +02:00 [DBG] Starting grant removal
2019-06-04 12:45:21.481 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:45:21.484 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:45:21.484 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:45:21.484 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:45:21.484 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:45:21.484 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:45:21.484 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:45:21.531 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 12:45:21.589 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 12:45:21.590 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 12:45:21.603 +02:00 [DBG] Start token request.
2019-06-04 12:45:21.626 +02:00 [DBG] Start client validation
2019-06-04 12:45:21.633 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:45:21.642 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:45:21.661 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:45:21.661 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:45:23.113 +02:00 [DBG] ro.client found in database: true
2019-06-04 12:45:23.122 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 12:45:23.130 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 12:45:23.130 +02:00 [DBG] Client validation success
2019-06-04 12:45:23.149 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8R6UVBKD6:00000001","TimeStamp":"2019-06-04T10:45:23.0000000Z","ProcessId":12848,"LocalIpAddress":"127.0.0.1:9887","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 12:45:23.161 +02:00 [DBG] Start token request validation
2019-06-04 12:45:23.171 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 12:45:23.234 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:45:23.464 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:45:23.477 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 12:45:23.480 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 12:45:23.654 +02:00 [INF] Credentials validated for username: alice
2019-06-04 12:45:23.655 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R6UVBKD6:00000001","TimeStamp":"2019-06-04T10:45:23.0000000Z","ProcessId":12848,"LocalIpAddress":"127.0.0.1:9887","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:45:23.663 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R6UVBKD6:00000001","TimeStamp":"2019-06-04T10:45:23.0000000Z","ProcessId":12848,"LocalIpAddress":"127.0.0.1:9887","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 12:45:23.663 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 12:45:23.671 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 12:45:23.694 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 12:45:23.694 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 12:45:23.831 +02:00 [DBG] gp4KU6czfTpO2xlRXfazNHvVfBO8XId6QR/fMD21nYY= not found in database
2019-06-04 12:45:23.879 +02:00 [DBG] Creating refresh token
2019-06-04 12:45:23.879 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 12:45:23.884 +02:00 [DBG] 0djirUotm553SqHuusogNh8/GwGncnyUh7Ty/NM+sCo= not found in database
2019-06-04 12:45:23.893 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****f5d6","$type":"Token"},{"TokenType":"access_token","TokenValue":"****24bc","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8R6UVBKD6:00000001","TimeStamp":"2019-06-04T10:45:23.0000000Z","ProcessId":12848,"LocalIpAddress":"127.0.0.1:9887","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 12:45:23.894 +02:00 [DBG] Token request success.
2019-06-04 12:45:31.793 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:45:31.794 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:45:31.795 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:45:31.798 +02:00 [DBG] Start discovery request
2019-06-04 12:45:31.874 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:45:31.909 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:45:31.910 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:45:31.910 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:45:31.913 +02:00 [DBG] Start key discovery request
2019-06-04 12:45:32.030 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:45:32.032 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:45:32.032 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:45:32.040 +02:00 [DBG] Starting introspection request.
2019-06-04 12:45:32.047 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:45:32.048 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:45:32.048 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:45:32.048 +02:00 [DBG] Secret id found: api1
2019-06-04 12:45:32.171 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:45:32.171 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:45:32.171 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:45:32.172 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R6UVBKD6:00000002","TimeStamp":"2019-06-04T10:45:32.0000000Z","ProcessId":12848,"LocalIpAddress":"127.0.0.1:9887","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:45:32.172 +02:00 [ERR] API validation failed.
2019-06-04 12:45:32.172 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:47:10.337 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:47:10.482 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:47:10.482 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:47:10.482 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:47:10.482 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:47:10.482 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:47:10.483 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:47:10.626 +02:00 [DBG] Starting grant removal
2019-06-04 12:47:11.028 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:47:11.030 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:47:11.030 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:47:11.030 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:47:11.030 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:47:11.030 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:47:11.030 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:47:11.080 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:47:11.150 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:47:11.151 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:47:11.155 +02:00 [DBG] Start discovery request
2019-06-04 12:47:12.473 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:47:12.531 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:47:12.533 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:47:12.533 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:47:12.535 +02:00 [DBG] Start key discovery request
2019-06-04 12:47:12.656 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:47:12.659 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:47:12.659 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:47:12.666 +02:00 [DBG] Starting introspection request.
2019-06-04 12:47:12.675 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:47:12.679 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:47:12.693 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:47:12.694 +02:00 [DBG] Secret id found: api1
2019-06-04 12:47:12.746 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:47:12.752 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:47:12.752 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:47:12.771 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R7VKNKOQ:00000002","TimeStamp":"2019-06-04T10:47:12.0000000Z","ProcessId":35020,"LocalIpAddress":"127.0.0.1:27840","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:47:12.774 +02:00 [ERR] API validation failed.
2019-06-04 12:47:12.774 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:47:15.829 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:47:15.830 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:47:15.830 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:47:15.830 +02:00 [DBG] Starting introspection request.
2019-06-04 12:47:15.831 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:47:15.831 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:47:15.831 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:47:15.831 +02:00 [DBG] Secret id found: api1
2019-06-04 12:47:15.840 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:47:15.840 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:47:15.840 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:47:15.841 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R7VKNKOP:00000002","TimeStamp":"2019-06-04T10:47:15.0000000Z","ProcessId":35020,"LocalIpAddress":"127.0.0.1:27840","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:47:15.841 +02:00 [ERR] API validation failed.
2019-06-04 12:47:15.841 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:47:25.902 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:47:25.903 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:47:25.903 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:47:25.903 +02:00 [DBG] Starting introspection request.
2019-06-04 12:47:25.903 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:47:25.903 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:47:25.903 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:47:25.904 +02:00 [DBG] Secret id found: api1
2019-06-04 12:47:25.911 +02:00 [DBG] Found api1 API resource in database
2019-06-04 12:47:25.912 +02:00 [DBG] No shared secret configured for client.
2019-06-04 12:47:25.912 +02:00 [DBG] Secret validators could not validate secret
2019-06-04 12:47:25.912 +02:00 [INF] {"ApiName":"api1","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Invalid API secret","ActivityId":"0HLN8R7VKNKOO:00000003","TimeStamp":"2019-06-04T10:47:25.0000000Z","ProcessId":35020,"LocalIpAddress":"127.0.0.1:27840","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:47:25.912 +02:00 [ERR] API validation failed.
2019-06-04 12:47:25.912 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:49:23.593 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 12:49:23.763 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 12:49:23.764 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 12:49:23.764 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 12:49:23.764 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 12:49:23.764 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 12:49:23.764 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 12:49:23.916 +02:00 [DBG] Starting grant removal
2019-06-04 12:49:24.154 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 12:49:24.170 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 12:49:24.170 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 12:49:24.170 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 12:49:24.170 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 12:49:24.170 +02:00 [DBG] Error Url: /home/error
2019-06-04 12:49:24.170 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 12:49:30.694 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 12:49:30.706 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 12:49:30.707 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 12:49:30.711 +02:00 [DBG] Start discovery request
2019-06-04 12:49:31.989 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 12:49:32.043 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 12:49:32.044 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 12:49:32.044 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 12:49:32.048 +02:00 [DBG] Start key discovery request
2019-06-04 12:49:32.181 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:49:32.183 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:49:32.183 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:49:32.190 +02:00 [DBG] Starting introspection request.
2019-06-04 12:49:32.205 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:49:32.209 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:49:32.223 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:49:32.223 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:49:32.266 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 12:49:32.284 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8R97AFI3Q:00000003","TimeStamp":"2019-06-04T10:49:32.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:49:32.286 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 12:49:32.286 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:49:48.202 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:49:48.203 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:49:48.203 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:49:48.203 +02:00 [DBG] Starting introspection request.
2019-06-04 12:49:48.203 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:49:48.204 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:49:48.204 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:49:48.204 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:49:48.208 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 12:49:48.208 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8R97AFI3P:00000003","TimeStamp":"2019-06-04T10:49:48.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:49:48.208 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 12:49:48.208 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 12:49:54.045 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 12:49:54.045 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 12:49:54.046 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 12:49:54.046 +02:00 [DBG] Starting introspection request.
2019-06-04 12:49:54.046 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 12:49:54.046 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 12:49:54.046 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 12:49:54.046 +02:00 [DBG] Secret id found: ro.client
2019-06-04 12:49:54.048 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 12:49:54.048 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8R97AFI3Q:00000004","TimeStamp":"2019-06-04T10:49:54.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 12:49:54.048 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 12:49:54.048 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 13:49:24.320 +02:00 [DBG] Removing 7 grants
2019-06-04 14:49:24.594 +02:00 [DBG] Removing 0 grants
2019-06-04 14:51:02.188 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 14:51:02.199 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 14:51:02.199 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 14:51:02.208 +02:00 [DBG] Start token request.
2019-06-04 14:51:02.213 +02:00 [DBG] Start client validation
2019-06-04 14:51:02.214 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 14:51:02.214 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 14:51:02.215 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 14:51:02.215 +02:00 [DBG] Secret id found: ro.client
2019-06-04 14:51:02.601 +02:00 [DBG] ro.client found in database: true
2019-06-04 14:51:02.607 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 14:51:02.616 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 14:51:02.616 +02:00 [DBG] Client validation success
2019-06-04 14:51:02.617 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8R97AFI3R:00000001","TimeStamp":"2019-06-04T12:51:02.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 14:51:02.624 +02:00 [DBG] Start token request validation
2019-06-04 14:51:02.636 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 14:51:02.705 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 14:51:02.810 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 14:51:02.820 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 14:51:02.823 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 14:51:03.053 +02:00 [INF] Credentials validated for username: alice
2019-06-04 14:51:03.054 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R97AFI3R:00000001","TimeStamp":"2019-06-04T12:51:03.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 14:51:03.063 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8R97AFI3R:00000001","TimeStamp":"2019-06-04T12:51:03.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 14:51:03.063 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 14:51:03.074 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 14:51:03.099 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 14:51:03.099 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 14:51:03.201 +02:00 [DBG] BBp+Q1u+F0zeAw7H7mgHg0rMWET6A9gC3NmuI0OR9mc= not found in database
2019-06-04 14:51:03.227 +02:00 [DBG] Creating refresh token
2019-06-04 14:51:03.227 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 14:51:03.233 +02:00 [DBG] /5OK6kTM5BV51QI3G8LHSRxoCtiCRy26vBCIdHDXyUc= not found in database
2019-06-04 14:51:03.274 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****eced","$type":"Token"},{"TokenType":"access_token","TokenValue":"****9b35","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8R97AFI3R:00000001","TimeStamp":"2019-06-04T12:51:03.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 14:51:03.277 +02:00 [DBG] Token request success.
2019-06-04 14:51:08.128 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 14:51:08.129 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 14:51:08.129 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 14:51:08.129 +02:00 [DBG] Starting introspection request.
2019-06-04 14:51:08.129 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 14:51:08.129 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 14:51:08.129 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 14:51:08.129 +02:00 [DBG] Secret id found: ro.client
2019-06-04 14:51:08.181 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 14:51:08.181 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8R97AFI3R:00000002","TimeStamp":"2019-06-04T12:51:08.0000000Z","ProcessId":29124,"LocalIpAddress":"127.0.0.1:42856","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 14:51:08.181 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 14:51:08.182 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 14:52:15.430 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 14:52:15.552 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 14:52:15.552 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 14:52:15.552 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 14:52:15.553 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 14:52:15.553 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 14:52:15.553 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 14:52:15.695 +02:00 [DBG] Starting grant removal
2019-06-04 14:52:16.019 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 14:52:16.031 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 14:52:16.031 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 14:52:16.032 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 14:52:16.032 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 14:52:16.032 +02:00 [DBG] Error Url: /home/error
2019-06-04 14:52:16.032 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 14:52:16.063 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 14:52:16.110 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 14:52:16.110 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 14:52:16.121 +02:00 [DBG] Start token request.
2019-06-04 14:52:16.127 +02:00 [DBG] Start client validation
2019-06-04 14:52:16.133 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 14:52:16.137 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 14:52:16.154 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 14:52:16.154 +02:00 [DBG] Secret id found: ro.client
2019-06-04 14:52:17.877 +02:00 [DBG] ro.client found in database: true
2019-06-04 14:52:17.890 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 14:52:17.899 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 14:52:17.899 +02:00 [DBG] Client validation success
2019-06-04 14:52:17.921 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8TDSA8NUR:00000001","TimeStamp":"2019-06-04T12:52:17.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 14:52:17.934 +02:00 [DBG] Start token request validation
2019-06-04 14:52:17.947 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 14:52:18.023 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 14:52:18.234 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 14:52:18.246 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 14:52:18.249 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 14:52:18.420 +02:00 [INF] Credentials validated for username: alice
2019-06-04 14:52:18.421 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8TDSA8NUR:00000001","TimeStamp":"2019-06-04T12:52:18.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 14:52:18.428 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8TDSA8NUR:00000001","TimeStamp":"2019-06-04T12:52:18.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 14:52:18.428 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 14:52:18.436 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 14:52:18.456 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 14:52:18.456 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 14:52:18.594 +02:00 [DBG] 7EUn/4BMWBqKjIR5juotwqO8NcjrjxThJAxzysglJt8= not found in database
2019-06-04 14:52:18.689 +02:00 [DBG] Creating refresh token
2019-06-04 14:52:18.689 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 14:52:18.698 +02:00 [DBG] TYDx++T/fpLQtZbP2m0lEiLLVRvV6n190BSMzQc51Pg= not found in database
2019-06-04 14:52:18.706 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****8788","$type":"Token"},{"TokenType":"access_token","TokenValue":"****4107","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8TDSA8NUR:00000001","TimeStamp":"2019-06-04T12:52:18.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 14:52:18.708 +02:00 [DBG] Token request success.
2019-06-04 14:52:20.363 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 14:52:20.364 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 14:52:20.364 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 14:52:20.364 +02:00 [DBG] Start token request.
2019-06-04 14:52:20.364 +02:00 [DBG] Start client validation
2019-06-04 14:52:20.364 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 14:52:20.364 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 14:52:20.365 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 14:52:20.365 +02:00 [DBG] Secret id found: ro.client
2019-06-04 14:52:20.371 +02:00 [DBG] ro.client found in database: true
2019-06-04 14:52:20.372 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 14:52:20.372 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 14:52:20.372 +02:00 [DBG] Client validation success
2019-06-04 14:52:20.372 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN8TDSA8NUS:00000002","TimeStamp":"2019-06-04T12:52:20.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 14:52:20.372 +02:00 [DBG] Start token request validation
2019-06-04 14:52:20.372 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 14:52:20.374 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 14:52:20.378 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 14:52:20.380 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 14:52:20.384 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 14:52:20.398 +02:00 [INF] Credentials validated for username: alice
2019-06-04 14:52:20.398 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8TDSA8NUS:00000002","TimeStamp":"2019-06-04T12:52:20.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 14:52:20.398 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN8TDSA8NUS:00000002","TimeStamp":"2019-06-04T12:52:20.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 14:52:20.398 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 14:52:20.399 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 14:52:20.399 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 14:52:20.399 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 14:52:20.406 +02:00 [DBG] jQ8SBEM46Z6d3QPe5TKh0HzWaIUNvyA1XWxREwH+qDc= not found in database
2019-06-04 14:52:20.432 +02:00 [DBG] Creating refresh token
2019-06-04 14:52:20.432 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 14:52:20.434 +02:00 [DBG] fdSXTVOr5wBMbafquWJ/GXMn3GPffudGQUJZu1chhCY= not found in database
2019-06-04 14:52:20.473 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a9e6","$type":"Token"},{"TokenType":"access_token","TokenValue":"****10bd","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN8TDSA8NUS:00000002","TimeStamp":"2019-06-04T12:52:20.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 14:52:20.473 +02:00 [DBG] Token request success.
2019-06-04 14:52:25.133 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 14:52:25.134 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 14:52:25.134 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 14:52:25.138 +02:00 [DBG] Start discovery request
2019-06-04 14:52:25.216 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 14:52:25.259 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 14:52:25.260 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 14:52:25.260 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 14:52:25.263 +02:00 [DBG] Start key discovery request
2019-06-04 14:52:25.371 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 14:52:25.372 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 14:52:25.372 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 14:52:25.379 +02:00 [DBG] Starting introspection request.
2019-06-04 14:52:25.385 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 14:52:25.385 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 14:52:25.385 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 14:52:25.385 +02:00 [DBG] Secret id found: ro.client
2019-06-04 14:52:25.428 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 14:52:25.428 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8TDSA8NUS:00000003","TimeStamp":"2019-06-04T12:52:25.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 14:52:25.429 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 14:52:25.429 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 14:53:18.681 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 14:53:18.682 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 14:53:18.682 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 14:53:18.683 +02:00 [DBG] Starting introspection request.
2019-06-04 14:53:18.683 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 14:53:18.683 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 14:53:18.683 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 14:53:18.683 +02:00 [DBG] Secret id found: ro.client
2019-06-04 14:53:18.688 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 14:53:18.688 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8TDSA8NUT:00000003","TimeStamp":"2019-06-04T12:53:18.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 14:53:18.688 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 14:53:18.689 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 14:55:35.623 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 14:55:35.624 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 14:55:35.624 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 14:55:35.624 +02:00 [DBG] Starting introspection request.
2019-06-04 14:55:35.624 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 14:55:35.624 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 14:55:35.624 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 14:55:35.624 +02:00 [DBG] Secret id found: ro.client
2019-06-04 14:55:35.628 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 14:55:35.629 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8TDSA8NUU:00000001","TimeStamp":"2019-06-04T12:55:35.0000000Z","ProcessId":32516,"LocalIpAddress":"127.0.0.1:10057","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 14:55:35.629 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 14:55:35.629 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 15:52:15.895 +02:00 [DBG] Removing 1 grants
2019-06-04 16:14:18.446 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 16:14:18.586 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 16:14:18.586 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 16:14:18.586 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 16:14:18.586 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 16:14:18.586 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 16:14:18.586 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 16:14:18.727 +02:00 [DBG] Starting grant removal
2019-06-04 16:14:18.940 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 16:14:18.943 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 16:14:18.943 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 16:14:18.943 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 16:14:18.943 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 16:14:18.943 +02:00 [DBG] Error Url: /home/error
2019-06-04 16:14:18.943 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 16:14:51.365 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 16:14:51.377 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 16:14:51.377 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 16:14:51.380 +02:00 [DBG] Start discovery request
2019-06-04 16:14:52.438 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 16:14:52.490 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 16:14:52.491 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 16:14:52.491 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 16:14:52.494 +02:00 [DBG] Start key discovery request
2019-06-04 16:14:52.598 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 16:14:52.601 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 16:14:52.601 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 16:14:52.608 +02:00 [DBG] Starting introspection request.
2019-06-04 16:14:52.616 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 16:14:52.619 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 16:14:52.634 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 16:14:52.634 +02:00 [DBG] Secret id found: ro.client
2019-06-04 16:14:52.674 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 16:14:52.694 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN8URNES5I2:00000003","TimeStamp":"2019-06-04T14:14:52.0000000Z","ProcessId":34424,"LocalIpAddress":"127.0.0.1:25780","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 16:14:52.696 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 16:14:52.696 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 17:14:19.124 +02:00 [DBG] Removing 2 grants
2019-06-04 17:42:51.034 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-04 17:42:51.292 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-04 17:42:51.293 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-04 17:42:51.293 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-04 17:42:51.293 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-04 17:42:51.293 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-04 17:42:51.293 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-04 17:42:52.017 +02:00 [DBG] Starting grant removal
2019-06-04 17:42:52.448 +02:00 [DBG] Login Url: /Account/Login
2019-06-04 17:42:52.450 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-04 17:42:52.450 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-04 17:42:52.450 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-04 17:42:52.450 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-04 17:42:52.450 +02:00 [DBG] Error Url: /home/error
2019-06-04 17:42:52.450 +02:00 [DBG] Error Id Parameter: errorId
2019-06-04 17:42:52.479 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 17:42:52.548 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 17:42:52.548 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 17:42:52.566 +02:00 [DBG] Start token request.
2019-06-04 17:42:52.571 +02:00 [DBG] Start client validation
2019-06-04 17:42:52.576 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 17:42:52.579 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 17:42:52.599 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 17:42:52.599 +02:00 [DBG] Secret id found: ro.client
2019-06-04 17:42:56.222 +02:00 [DBG] ro.client found in database: true
2019-06-04 17:42:56.231 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 17:42:56.630 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 17:42:56.630 +02:00 [DBG] Client validation success
2019-06-04 17:42:56.646 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000001","TimeStamp":"2019-06-04T15:42:56.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 17:42:56.686 +02:00 [DBG] Start token request validation
2019-06-04 17:42:56.695 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 17:42:56.806 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:42:57.113 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 17:42:57.125 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:42:57.128 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 17:42:57.603 +02:00 [INF] Credentials validated for username: alice
2019-06-04 17:42:57.604 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000001","TimeStamp":"2019-06-04T15:42:57.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 17:42:57.620 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000001","TimeStamp":"2019-06-04T15:42:57.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 17:42:57.621 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 17:42:57.627 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 17:42:57.646 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 17:42:57.646 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 17:42:57.790 +02:00 [DBG] ofBeX+BDZUFH28TRDn+s6pOsPPeNs/Rl3KVhgbqr7Ow= not found in database
2019-06-04 17:42:57.833 +02:00 [DBG] Creating refresh token
2019-06-04 17:42:57.833 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 17:42:57.837 +02:00 [DBG] qbrztXFmvsiCXCTp7q/OPLZn3sL0JrooRjBjLQN12c0= not found in database
2019-06-04 17:42:57.851 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****d8e8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****c376","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000001","TimeStamp":"2019-06-04T15:42:57.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 17:42:57.853 +02:00 [DBG] Token request success.
2019-06-04 17:43:11.301 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-04 17:43:11.302 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-04 17:43:11.303 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-04 17:43:11.306 +02:00 [DBG] Start discovery request
2019-06-04 17:43:11.375 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-04 17:43:11.406 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-04 17:43:11.407 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-04 17:43:11.407 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-04 17:43:11.410 +02:00 [DBG] Start key discovery request
2019-06-04 17:43:11.519 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 17:43:11.521 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 17:43:11.521 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 17:43:11.527 +02:00 [DBG] Starting introspection request.
2019-06-04 17:43:11.532 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 17:43:11.532 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 17:43:11.533 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 17:43:11.533 +02:00 [DBG] Secret id found: ro.client
2019-06-04 17:43:11.566 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 17:43:11.567 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN90D6VTIEG:00000002","TimeStamp":"2019-06-04T15:43:11.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 17:43:11.567 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 17:43:11.567 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 17:43:15.773 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 17:43:15.773 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 17:43:15.774 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 17:43:15.774 +02:00 [DBG] Starting introspection request.
2019-06-04 17:43:15.774 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 17:43:15.774 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 17:43:15.774 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 17:43:15.774 +02:00 [DBG] Secret id found: ro.client
2019-06-04 17:43:15.777 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 17:43:15.777 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN90D6VTIEI:00000003","TimeStamp":"2019-06-04T15:43:15.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 17:43:15.777 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 17:43:15.777 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 17:43:22.598 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 17:43:22.600 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 17:43:22.600 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 17:43:22.607 +02:00 [DBG] Start userinfo request
2019-06-04 17:43:22.611 +02:00 [DBG] Bearer token found in header
2019-06-04 17:43:22.657 +02:00 [DBG] ofBeX+BDZUFH28TRDn+s6pOsPPeNs/Rl3KVhgbqr7Ow= found in database: true
2019-06-04 17:43:22.689 +02:00 [DBG] ro.client found in database: true
2019-06-04 17:43:22.689 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 17:43:22.697 +02:00 [DBG] ro.client found in database: true
2019-06-04 17:43:22.697 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 17:43:22.726 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-04 17:43:22.728 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"a882085bc5ccb2ebfb4876915320798daaa3ac9246e1df726f0a9a089cf4c376","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559662977,"exp":1559666577,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","auth_time":1559662977,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-04 17:43:22.737 +02:00 [DBG] Creating userinfo response
2019-06-04 17:43:22.739 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 17:43:22.742 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 17:43:22.748 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:43:22.749 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-04 17:43:22.749 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 17:43:22.751 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:43:22.758 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-04 17:43:22.758 +02:00 [DBG] End userinfo request
2019-06-04 17:44:10.296 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-04 17:44:10.296 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-04 17:44:10.296 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-04 17:44:10.297 +02:00 [DBG] Starting introspection request.
2019-06-04 17:44:10.297 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 17:44:10.297 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 17:44:10.297 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 17:44:10.297 +02:00 [DBG] Secret id found: ro.client
2019-06-04 17:44:10.301 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-04 17:44:10.301 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN90D6VTIEG:00000003","TimeStamp":"2019-06-04T15:44:10.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-04 17:44:10.301 +02:00 [ERR] No API resource with that name found. aborting
2019-06-04 17:44:10.301 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-04 17:44:51.659 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 17:44:51.659 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 17:44:51.659 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 17:44:51.659 +02:00 [DBG] Start token request.
2019-06-04 17:44:51.660 +02:00 [DBG] Start client validation
2019-06-04 17:44:51.660 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 17:44:51.660 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 17:44:51.660 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 17:44:51.660 +02:00 [DBG] Secret id found: ro.client
2019-06-04 17:44:51.684 +02:00 [DBG] ro.client found in database: true
2019-06-04 17:44:51.684 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 17:44:51.684 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 17:44:51.684 +02:00 [DBG] Client validation success
2019-06-04 17:44:51.684 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000004","TimeStamp":"2019-06-04T15:44:51.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 17:44:51.685 +02:00 [DBG] Start token request validation
2019-06-04 17:44:51.685 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 17:44:51.706 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:44:51.751 +02:00 [DBG] Found [] API scopes in database
2019-06-04 17:44:51.751 +02:00 [ERR] Requested scope not allowed: api1ss
2019-06-04 17:44:51.752 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1ss","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 17:44:51.754 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000004","TimeStamp":"2019-06-04T15:44:51.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-04 17:44:55.103 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-04 17:44:55.104 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-04 17:44:55.104 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-04 17:44:55.104 +02:00 [DBG] Start token request.
2019-06-04 17:44:55.104 +02:00 [DBG] Start client validation
2019-06-04 17:44:55.104 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-04 17:44:55.104 +02:00 [DBG] Start parsing for secret in post body
2019-06-04 17:44:55.104 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-04 17:44:55.104 +02:00 [DBG] Secret id found: ro.client
2019-06-04 17:44:55.123 +02:00 [DBG] ro.client found in database: true
2019-06-04 17:44:55.123 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 17:44:55.124 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-04 17:44:55.124 +02:00 [DBG] Client validation success
2019-06-04 17:44:55.124 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000005","TimeStamp":"2019-06-04T15:44:55.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-04 17:44:55.124 +02:00 [DBG] Start token request validation
2019-06-04 17:44:55.124 +02:00 [DBG] Start resource owner password token request validation
2019-06-04 17:44:55.132 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:44:55.195 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 17:44:55.196 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:44:55.199 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-04 17:44:55.212 +02:00 [INF] Credentials validated for username: alice
2019-06-04 17:44:55.212 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000005","TimeStamp":"2019-06-04T15:44:55.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 17:44:55.212 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000005","TimeStamp":"2019-06-04T15:44:55.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-04 17:44:55.212 +02:00 [DBG] Resource owner password token request validation success.
2019-06-04 17:44:55.212 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-04 17:44:55.212 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-04 17:44:55.213 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-04 17:44:55.242 +02:00 [DBG] +4PPDejoO290MBHfuLNYsmmHzCsTiD20c5m8gAmmm/I= not found in database
2019-06-04 17:44:55.245 +02:00 [DBG] Creating refresh token
2019-06-04 17:44:55.245 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-04 17:44:55.246 +02:00 [DBG] kSdiD4wLqJt0L195V52LPJKzP7mSsBMLI8qxg/aS3Us= not found in database
2019-06-04 17:44:55.247 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****7809","$type":"Token"},{"TokenType":"access_token","TokenValue":"****a8f7","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN90D6VTIEG:00000005","TimeStamp":"2019-06-04T15:44:55.0000000Z","ProcessId":7292,"LocalIpAddress":"127.0.0.1:36395","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-04 17:44:55.247 +02:00 [DBG] Token request success.
2019-06-04 17:45:05.321 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-04 17:45:05.321 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-04 17:45:05.321 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-04 17:45:05.322 +02:00 [DBG] Start userinfo request
2019-06-04 17:45:05.322 +02:00 [DBG] Bearer token found in header
2019-06-04 17:45:05.323 +02:00 [DBG] ofBeX+BDZUFH28TRDn+s6pOsPPeNs/Rl3KVhgbqr7Ow= found in database: true
2019-06-04 17:45:05.328 +02:00 [DBG] ro.client found in database: true
2019-06-04 17:45:05.328 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 17:45:05.333 +02:00 [DBG] ro.client found in database: true
2019-06-04 17:45:05.333 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-04 17:45:05.338 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-04 17:45:05.338 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"a882085bc5ccb2ebfb4876915320798daaa3ac9246e1df726f0a9a089cf4c376","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559662977,"exp":1559666577,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","auth_time":1559662977,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-04 17:45:05.338 +02:00 [DBG] Creating userinfo response
2019-06-04 17:45:05.338 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 17:45:05.338 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 17:45:05.347 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:45:05.347 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-04 17:45:05.347 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-04 17:45:05.350 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-04 17:45:05.354 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-04 17:45:05.354 +02:00 [DBG] End userinfo request
2019-06-05 09:14:10.590 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-05 09:14:11.277 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-05 09:14:11.277 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-05 09:14:11.277 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-05 09:14:11.277 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-05 09:14:11.277 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-05 09:14:11.277 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-05 09:14:11.880 +02:00 [DBG] Starting grant removal
2019-06-05 09:14:12.448 +02:00 [DBG] Login Url: /Account/Login
2019-06-05 09:14:12.450 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-05 09:14:12.450 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-05 09:14:12.450 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-05 09:14:12.450 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-05 09:14:12.450 +02:00 [DBG] Error Url: /home/error
2019-06-05 09:14:12.450 +02:00 [DBG] Error Id Parameter: errorId
2019-06-05 10:14:13.405 +02:00 [DBG] Removing 2 grants
2019-06-05 11:14:15.558 +02:00 [DBG] Removing 0 grants
2019-06-05 11:40:52.323 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-05 11:40:53.196 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-05 11:40:53.196 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-05 11:40:53.204 +02:00 [DBG] Start token request.
2019-06-05 11:40:53.236 +02:00 [DBG] Start client validation
2019-06-05 11:40:53.430 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:40:53.433 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:40:54.249 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 11:40:54.250 +02:00 [DBG] Secret id found: ro.client
2019-06-05 11:41:08.303 +02:00 [DBG] ro.client found in database: true
2019-06-05 11:41:08.364 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 11:41:08.532 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 11:41:08.532 +02:00 [DBG] Client validation success
2019-06-05 11:41:09.388 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN9GLKG7K2D:00000001","TimeStamp":"2019-06-05T09:41:09.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-05 11:41:09.702 +02:00 [DBG] Start token request validation
2019-06-05 11:41:09.711 +02:00 [DBG] Start resource owner password token request validation
2019-06-05 11:41:10.115 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 11:41:11.107 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-05 11:41:11.120 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 11:41:11.123 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-05 11:41:13.195 +02:00 [INF] Credentials validated for username: alice
2019-06-05 11:41:13.197 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9GLKG7K2D:00000001","TimeStamp":"2019-06-05T09:41:13.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 11:41:13.317 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9GLKG7K2D:00000001","TimeStamp":"2019-06-05T09:41:13.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 11:41:13.317 +02:00 [DBG] Resource owner password token request validation success.
2019-06-05 11:41:13.325 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-05 11:41:13.456 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-05 11:41:13.457 +02:00 [DBG] Getting claims for access token for subject: 4f3e4f2a-bf01-4e72-adc1-6ae0b023e767
2019-06-05 11:41:14.310 +02:00 [DBG] MAdXK8PIONTRs8owA5lB15ZIIE/moM8cDr39iAysTl8= not found in database
2019-06-05 11:41:14.659 +02:00 [DBG] Creating refresh token
2019-06-05 11:41:14.659 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-05 11:41:14.722 +02:00 [DBG] 81Si5zimXj6VmQy9ETgLbaMUbKPvz85ZMZFACapZJ6I= not found in database
2019-06-05 11:41:14.731 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"4f3e4f2a-bf01-4e72-adc1-6ae0b023e767","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****8241","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0db6","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN9GLKG7K2D:00000001","TimeStamp":"2019-06-05T09:41:14.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-05 11:41:14.732 +02:00 [DBG] Token request success.
2019-06-05 11:43:54.707 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:43:54.718 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:43:54.721 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:43:54.730 +02:00 [DBG] Starting introspection request.
2019-06-05 11:43:54.735 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:43:54.735 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:43:54.735 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 11:43:54.735 +02:00 [DBG] Secret id found: ro.client
2019-06-05 11:43:54.883 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-05 11:43:54.883 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9GLKG7K2E:00000001","TimeStamp":"2019-06-05T09:43:54.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:43:54.883 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 11:43:54.883 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:43:59.400 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:43:59.401 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:43:59.401 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:43:59.401 +02:00 [DBG] Starting introspection request.
2019-06-05 11:43:59.401 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:43:59.401 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:43:59.402 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 11:43:59.402 +02:00 [DBG] Secret id found: ro.client
2019-06-05 11:43:59.404 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-05 11:43:59.404 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9GLKG7K2E:00000002","TimeStamp":"2019-06-05T09:43:59.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:43:59.404 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 11:43:59.404 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:44:04.795 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:44:04.795 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:44:04.795 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:44:04.795 +02:00 [DBG] Starting introspection request.
2019-06-05 11:44:04.796 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:44:04.796 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:44:04.796 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 11:44:04.796 +02:00 [DBG] Secret id found: ro.client
2019-06-05 11:44:04.798 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-05 11:44:04.798 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9GLKG7K2E:00000003","TimeStamp":"2019-06-05T09:44:04.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:44:04.798 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 11:44:04.798 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:44:16.704 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:44:16.705 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:44:16.705 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:44:16.705 +02:00 [DBG] Starting introspection request.
2019-06-05 11:44:16.705 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:44:16.705 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:44:16.705 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 11:44:16.705 +02:00 [DBG] Secret id found: ro.client
2019-06-05 11:44:16.707 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-05 11:44:16.707 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9GLKG7K2E:00000004","TimeStamp":"2019-06-05T09:44:16.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:44:16.707 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 11:44:16.707 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:45:41.390 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:45:41.390 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:45:41.390 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:45:41.390 +02:00 [DBG] Starting introspection request.
2019-06-05 11:45:41.390 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:45:41.390 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:45:41.436 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 11:45:41.437 +02:00 [DBG] Secret id found: ro.client
2019-06-05 11:45:41.439 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-05 11:45:41.439 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9GLKG7K2F:00000001","TimeStamp":"2019-06-05T09:45:41.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:45:41.439 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 11:45:41.439 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:46:29.902 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:46:29.902 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:46:29.902 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:46:29.902 +02:00 [DBG] Starting introspection request.
2019-06-05 11:46:29.902 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:46:29.903 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:46:29.903 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 11:46:29.903 +02:00 [DBG] Secret id found: ro.client
2019-06-05 11:46:29.906 +02:00 [DBG] Did not find ro.client API resource in database
2019-06-05 11:46:29.906 +02:00 [INF] {"ApiName":"ro.client","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9GLKG7K2F:00000002","TimeStamp":"2019-06-05T09:46:29.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:46:29.906 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 11:46:29.906 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:48:48.336 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:48:48.337 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:48:48.337 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:48:48.337 +02:00 [DBG] Starting introspection request.
2019-06-05 11:48:48.337 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:48:48.337 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:48:48.337 +02:00 [DBG] No secret in post body found
2019-06-05 11:48:48.337 +02:00 [DBG] Parser found no secret
2019-06-05 11:48:48.337 +02:00 [INF] {"ApiName":"unknown","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"No API id or secret found","ActivityId":"0HLN9GLKG7K2G:00000001","TimeStamp":"2019-06-05T09:48:48.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:48:48.337 +02:00 [ERR] No API secret found
2019-06-05 11:48:48.337 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:48:50.094 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:48:50.097 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:48:50.098 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:48:50.098 +02:00 [DBG] Starting introspection request.
2019-06-05 11:48:50.098 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:48:50.098 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:48:50.098 +02:00 [DBG] No secret in post body found
2019-06-05 11:48:50.098 +02:00 [DBG] Parser found no secret
2019-06-05 11:48:50.098 +02:00 [INF] {"ApiName":"unknown","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"No API id or secret found","ActivityId":"0HLN9GLKG7K2G:00000002","TimeStamp":"2019-06-05T09:48:50.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:48:50.098 +02:00 [ERR] No API secret found
2019-06-05 11:48:50.098 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:48:51.573 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:48:51.573 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:48:51.573 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:48:51.574 +02:00 [DBG] Starting introspection request.
2019-06-05 11:48:51.574 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:48:51.574 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:48:51.574 +02:00 [DBG] No secret in post body found
2019-06-05 11:48:51.574 +02:00 [DBG] Parser found no secret
2019-06-05 11:48:51.574 +02:00 [INF] {"ApiName":"unknown","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"No API id or secret found","ActivityId":"0HLN9GLKG7K2G:00000003","TimeStamp":"2019-06-05T09:48:51.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:48:51.574 +02:00 [ERR] No API secret found
2019-06-05 11:48:51.574 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:48:59.294 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:48:59.294 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:48:59.294 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:48:59.294 +02:00 [DBG] Starting introspection request.
2019-06-05 11:48:59.294 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:48:59.294 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:48:59.295 +02:00 [DBG] No secret in post body found
2019-06-05 11:48:59.295 +02:00 [DBG] Parser found no secret
2019-06-05 11:48:59.295 +02:00 [INF] {"ApiName":"unknown","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"No API id or secret found","ActivityId":"0HLN9GLKG7K2G:00000004","TimeStamp":"2019-06-05T09:48:59.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:48:59.295 +02:00 [ERR] No API secret found
2019-06-05 11:48:59.295 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:49:02.292 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:49:02.292 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:49:02.292 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:49:02.292 +02:00 [DBG] Starting introspection request.
2019-06-05 11:49:02.293 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:49:02.293 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:49:02.293 +02:00 [DBG] No secret in post body found
2019-06-05 11:49:02.293 +02:00 [DBG] Parser found no secret
2019-06-05 11:49:02.293 +02:00 [INF] {"ApiName":"unknown","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"No API id or secret found","ActivityId":"0HLN9GLKG7K2G:00000005","TimeStamp":"2019-06-05T09:49:02.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:49:02.293 +02:00 [ERR] No API secret found
2019-06-05 11:49:02.293 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:49:05.524 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 11:49:05.524 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 11:49:05.524 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 11:49:05.524 +02:00 [DBG] Starting introspection request.
2019-06-05 11:49:05.525 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 11:49:05.525 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 11:49:05.525 +02:00 [DBG] No secret in post body found
2019-06-05 11:49:05.525 +02:00 [DBG] Parser found no secret
2019-06-05 11:49:05.525 +02:00 [INF] {"ApiName":"unknown","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"No API id or secret found","ActivityId":"0HLN9GLKG7K2G:00000006","TimeStamp":"2019-06-05T09:49:05.0000000Z","ProcessId":8320,"LocalIpAddress":"127.0.0.1:13455","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 11:49:05.525 +02:00 [ERR] No API secret found
2019-06-05 11:49:05.525 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 11:58:30.870 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-05 11:58:30.915 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-05 11:58:30.915 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-05 11:58:30.915 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-05 11:58:30.915 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-05 11:58:30.915 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-05 11:58:30.915 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-05 11:58:31.042 +02:00 [DBG] Starting grant removal
2019-06-05 11:58:31.357 +02:00 [DBG] Login Url: /Account/Login
2019-06-05 11:58:31.359 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-05 11:58:31.359 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-05 11:58:31.359 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-05 11:58:31.359 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-05 11:58:31.359 +02:00 [DBG] Error Url: /home/error
2019-06-05 11:58:31.359 +02:00 [DBG] Error Id Parameter: errorId
2019-06-05 12:00:05.867 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-05 12:00:06.017 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-05 12:00:06.017 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-05 12:00:06.017 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-05 12:00:06.017 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-05 12:00:06.017 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-05 12:00:06.017 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-05 12:00:06.163 +02:00 [DBG] Starting grant removal
2019-06-05 12:00:06.511 +02:00 [DBG] Login Url: /Account/Login
2019-06-05 12:00:06.513 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-05 12:00:06.513 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-05 12:00:06.513 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-05 12:00:06.513 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-05 12:00:06.513 +02:00 [DBG] Error Url: /home/error
2019-06-05 12:00:06.513 +02:00 [DBG] Error Id Parameter: errorId
2019-06-05 12:00:21.654 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-05 12:00:21.669 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-05 12:00:21.670 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-05 12:00:21.676 +02:00 [DBG] Start token request.
2019-06-05 12:00:21.680 +02:00 [DBG] Start client validation
2019-06-05 12:00:21.685 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:00:21.688 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:00:21.704 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:00:21.704 +02:00 [DBG] Secret id found: ro.client
2019-06-05 12:00:22.756 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:00:22.767 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:00:22.778 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:00:22.779 +02:00 [DBG] Client validation success
2019-06-05 12:00:22.797 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN9JIB31F6A:00000002","TimeStamp":"2019-06-05T10:00:22.0000000Z","ProcessId":27576,"LocalIpAddress":"127.0.0.1:38846","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-05 12:00:22.807 +02:00 [DBG] Start token request validation
2019-06-05 12:00:22.817 +02:00 [DBG] Start resource owner password token request validation
2019-06-05 12:00:22.876 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:00:23.090 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-05 12:00:23.103 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:00:23.106 +02:00 [DBG] Found ["api1"] API scopes in database
2019-06-05 12:00:23.254 +02:00 [INF] Credentials validated for username: alice
2019-06-05 12:00:23.255 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2cc28999-0933-4529-9e0d-ca0ecf355ca0","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9JIB31F6A:00000002","TimeStamp":"2019-06-05T10:00:23.0000000Z","ProcessId":27576,"LocalIpAddress":"127.0.0.1:38846","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 12:00:23.261 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"2cc28999-0933-4529-9e0d-ca0ecf355ca0","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9JIB31F6A:00000002","TimeStamp":"2019-06-05T10:00:23.0000000Z","ProcessId":27576,"LocalIpAddress":"127.0.0.1:38846","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 12:00:23.261 +02:00 [DBG] Resource owner password token request validation success.
2019-06-05 12:00:23.269 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-05 12:00:23.289 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-05 12:00:23.289 +02:00 [DBG] Getting claims for access token for subject: 2cc28999-0933-4529-9e0d-ca0ecf355ca0
2019-06-05 12:00:23.413 +02:00 [DBG] uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= not found in database
2019-06-05 12:00:23.456 +02:00 [DBG] Creating refresh token
2019-06-05 12:00:23.456 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-05 12:00:23.460 +02:00 [DBG] a9g3VSLldd1k1zhaOoXFCnDmOEBOw+TX7WrA7PpQO88= not found in database
2019-06-05 12:00:23.468 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"2cc28999-0933-4529-9e0d-ca0ecf355ca0","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****09e3","$type":"Token"},{"TokenType":"access_token","TokenValue":"****da9e","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN9JIB31F6A:00000002","TimeStamp":"2019-06-05T10:00:23.0000000Z","ProcessId":27576,"LocalIpAddress":"127.0.0.1:38846","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-05 12:00:23.469 +02:00 [DBG] Token request success.
2019-06-05 12:02:21.446 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-05 12:02:21.448 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-05 12:02:21.448 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-05 12:02:21.469 +02:00 [DBG] Start discovery request
2019-06-05 12:02:21.549 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-05 12:02:21.674 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-05 12:02:21.675 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-05 12:02:21.675 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-05 12:02:21.678 +02:00 [DBG] Start key discovery request
2019-06-05 12:02:21.800 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 12:02:21.801 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 12:02:21.801 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 12:02:21.807 +02:00 [DBG] Starting introspection request.
2019-06-05 12:02:21.811 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:02:21.811 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:02:21.812 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:02:21.812 +02:00 [DBG] Secret id found: secretapi
2019-06-05 12:02:21.848 +02:00 [DBG] Did not find secretapi API resource in database
2019-06-05 12:02:21.848 +02:00 [INF] {"ApiName":"secretapi","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9JIB31F6C:00000003","TimeStamp":"2019-06-05T10:02:21.0000000Z","ProcessId":27576,"LocalIpAddress":"127.0.0.1:38846","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 12:02:21.848 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 12:02:21.848 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 12:02:36.114 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 12:02:36.115 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 12:02:36.115 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 12:02:36.115 +02:00 [DBG] Starting introspection request.
2019-06-05 12:02:36.115 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:02:36.115 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:02:36.116 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:02:36.116 +02:00 [DBG] Secret id found: secretapi
2019-06-05 12:02:36.117 +02:00 [DBG] Did not find secretapi API resource in database
2019-06-05 12:02:36.117 +02:00 [INF] {"ApiName":"secretapi","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"Unknown API resource","ActivityId":"0HLN9JIB31F6C:00000004","TimeStamp":"2019-06-05T10:02:36.0000000Z","ProcessId":27576,"LocalIpAddress":"127.0.0.1:38846","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 12:02:36.117 +02:00 [ERR] No API resource with that name found. aborting
2019-06-05 12:02:36.117 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 12:03:11.766 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-05 12:03:11.902 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-05 12:03:11.903 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-05 12:03:11.903 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-05 12:03:11.903 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-05 12:03:11.903 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-05 12:03:11.903 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-05 12:03:12.037 +02:00 [DBG] Starting grant removal
2019-06-05 12:03:12.420 +02:00 [DBG] Login Url: /Account/Login
2019-06-05 12:03:12.422 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-05 12:03:12.422 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-05 12:03:12.422 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-05 12:03:12.422 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-05 12:03:12.422 +02:00 [DBG] Error Url: /home/error
2019-06-05 12:03:12.422 +02:00 [DBG] Error Id Parameter: errorId
2019-06-05 12:03:16.136 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-05 12:03:16.148 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-05 12:03:16.148 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-05 12:03:16.152 +02:00 [DBG] Start discovery request
2019-06-05 12:03:17.206 +02:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-06-05 12:03:17.256 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-05 12:03:17.257 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-05 12:03:17.257 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-05 12:03:17.260 +02:00 [DBG] Start key discovery request
2019-06-05 12:03:17.363 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 12:03:17.370 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 12:03:17.370 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 12:03:17.384 +02:00 [DBG] Starting introspection request.
2019-06-05 12:03:17.393 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:03:17.397 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:03:17.411 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:03:17.411 +02:00 [DBG] Secret id found: api1
2019-06-05 12:03:17.468 +02:00 [DBG] Found api1 API resource in database
2019-06-05 12:03:17.477 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:03:17.477 +02:00 [DBG] API resource validation success
2019-06-05 12:03:17.495 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLN9JK2G24EE:00000003","TimeStamp":"2019-06-05T10:03:17.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-05 12:03:17.502 +02:00 [DBG] Introspection request validation started.
2019-06-05 12:03:17.545 +02:00 [DBG] uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= found in database: true
2019-06-05 12:03:17.821 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:03:17.827 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:03:17.835 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:03:17.835 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:03:17.936 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-05 12:03:17.941 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"e66e5db4304c947c359e4f5f5fa2a3541e883284ba5fbe88a1c47380f276da9e","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559728823,"exp":1559732423,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"2cc28999-0933-4529-9e0d-ca0ecf355ca0","auth_time":1559728823,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-05 12:03:17.944 +02:00 [DBG] Introspection request validation successful.
2019-06-05 12:03:17.952 +02:00 [DBG] Creating introspection response for active token.
2019-06-05 12:03:17.955 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****da9e","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLN9JK2G24EE:00000003","TimeStamp":"2019-06-05T10:03:17.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-05 12:03:17.955 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-05 12:09:32.303 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 12:09:32.303 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 12:09:32.303 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 12:09:32.303 +02:00 [DBG] Starting introspection request.
2019-06-05 12:09:32.303 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:09:32.304 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:09:32.304 +02:00 [DBG] No secret in post body found
2019-06-05 12:09:32.304 +02:00 [DBG] Parser found no secret
2019-06-05 12:09:32.305 +02:00 [INF] {"ApiName":"unknown","Category":"Authentication","Name":"API Authentication Failure","EventType":"Failure","Id":1021,"Message":"No API id or secret found","ActivityId":"0HLN9JK2G24EF:00000001","TimeStamp":"2019-06-05T10:09:32.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"ApiAuthenticationFailureEvent"}
2019-06-05 12:09:32.305 +02:00 [ERR] No API secret found
2019-06-05 12:09:32.305 +02:00 [ERR] API unauthorized to call introspection endpoint. aborting.
2019-06-05 12:09:59.498 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 12:09:59.499 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 12:09:59.499 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 12:09:59.499 +02:00 [DBG] Starting introspection request.
2019-06-05 12:09:59.499 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:09:59.499 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:09:59.499 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:09:59.499 +02:00 [DBG] Secret id found: api1
2019-06-05 12:09:59.671 +02:00 [DBG] Found api1 API resource in database
2019-06-05 12:09:59.671 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:09:59.671 +02:00 [DBG] API resource validation success
2019-06-05 12:09:59.671 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLN9JK2G24EF:00000002","TimeStamp":"2019-06-05T10:09:59.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-05 12:09:59.672 +02:00 [DBG] Introspection request validation started.
2019-06-05 12:09:59.676 +02:00 [DBG] uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= found in database: true
2019-06-05 12:09:59.740 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:09:59.740 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:09:59.744 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:09:59.744 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:09:59.766 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-05 12:09:59.766 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"e66e5db4304c947c359e4f5f5fa2a3541e883284ba5fbe88a1c47380f276da9e","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559728823,"exp":1559732423,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"2cc28999-0933-4529-9e0d-ca0ecf355ca0","auth_time":1559728823,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-05 12:09:59.766 +02:00 [DBG] Introspection request validation successful.
2019-06-05 12:09:59.767 +02:00 [DBG] Creating introspection response for active token.
2019-06-05 12:09:59.767 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****da9e","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLN9JK2G24EF:00000002","TimeStamp":"2019-06-05T10:09:59.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-05 12:09:59.767 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-05 12:10:20.962 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-05 12:10:20.963 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-05 12:10:20.963 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-05 12:10:20.971 +02:00 [DBG] Start revocation request.
2019-06-05 12:10:20.977 +02:00 [DBG] Start client validation
2019-06-05 12:10:20.977 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:10:20.977 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:10:20.977 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:10:20.977 +02:00 [DBG] Secret id found: ro.client
2019-06-05 12:10:20.982 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:10:20.982 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:10:20.983 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:10:20.983 +02:00 [DBG] Client validation success
2019-06-05 12:10:20.983 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN9JK2G24EF:00000003","TimeStamp":"2019-06-05T10:10:20.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-05 12:10:20.985 +02:00 [DBG] Token type hint found in request: access_token
2019-06-05 12:10:20.986 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-05 12:10:20.993 +02:00 [DBG] uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= found in database: true
2019-06-05 12:10:20.993 +02:00 [DBG] Access token revoked
2019-06-05 12:10:21.006 +02:00 [DBG] removing uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= persisted grant from database
2019-06-05 12:10:21.073 +02:00 [INF] Token successfully revoked
2019-06-05 12:10:21.073 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"TokenType":"access_token","Token":"****da9e","Category":"Token","Name":"Token Revoked Success","EventType":"Success","Id":2010,"Message":null,"ActivityId":"0HLN9JK2G24EF:00000003","TimeStamp":"2019-06-05T10:10:21.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"TokenRevokedSuccessEvent"}
2019-06-05 12:10:23.859 +02:00 [DBG] Request path /connect/revocation matched to endpoint type Revocation
2019-06-05 12:10:23.859 +02:00 [DBG] Endpoint enabled: Revocation, successfully created handler: IdentityServer4.Endpoints.TokenRevocationEndpoint
2019-06-05 12:10:23.859 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenRevocationEndpoint for /connect/revocation
2019-06-05 12:10:23.859 +02:00 [DBG] Start revocation request.
2019-06-05 12:10:23.859 +02:00 [DBG] Start client validation
2019-06-05 12:10:23.859 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:10:23.859 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:10:23.859 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:10:23.860 +02:00 [DBG] Secret id found: ro.client
2019-06-05 12:10:23.864 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:10:23.864 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:10:23.864 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:10:23.864 +02:00 [DBG] Client validation success
2019-06-05 12:10:23.864 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN9JK2G24EF:00000004","TimeStamp":"2019-06-05T10:10:23.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-05 12:10:23.864 +02:00 [DBG] Token type hint found in request: access_token
2019-06-05 12:10:23.864 +02:00 [DBG] ValidateRequestAsync result: IdentityServer4.Validation.TokenRevocationRequestValidationResult
2019-06-05 12:10:23.865 +02:00 [DBG] uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= found in database: false
2019-06-05 12:10:23.866 +02:00 [DBG] reference_token grant with value: e66e5db4304c947c359e4f5f5fa2a3541e883284ba5fbe88a1c47380f276da9e not found in store.
2019-06-05 12:10:23.866 +02:00 [INF] No matching token found
2019-06-05 12:10:26.209 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 12:10:26.210 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 12:10:26.210 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 12:10:26.210 +02:00 [DBG] Starting introspection request.
2019-06-05 12:10:26.210 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:10:26.210 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:10:26.210 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:10:26.210 +02:00 [DBG] Secret id found: api1
2019-06-05 12:10:26.213 +02:00 [DBG] Found api1 API resource in database
2019-06-05 12:10:26.213 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:10:26.214 +02:00 [DBG] API resource validation success
2019-06-05 12:10:26.214 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLN9JK2G24EF:00000005","TimeStamp":"2019-06-05T10:10:26.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-05 12:10:26.214 +02:00 [DBG] Introspection request validation started.
2019-06-05 12:10:26.215 +02:00 [DBG] uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= found in database: false
2019-06-05 12:10:26.215 +02:00 [DBG] reference_token grant with value: e66e5db4304c947c359e4f5f5fa2a3541e883284ba5fbe88a1c47380f276da9e not found in store.
2019-06-05 12:10:26.215 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"e66e5db4304c947c359e4f5f5fa2a3541e883284ba5fbe88a1c47380f276da9e","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-05 12:10:26.216 +02:00 [DBG] Token is invalid.
2019-06-05 12:10:26.216 +02:00 [DBG] Creating introspection response for inactive token.
2019-06-05 12:10:26.216 +02:00 [INF] {"ApiName":"api1","IsActive":false,"Token":"****da9e","ClaimTypes":null,"TokenScopes":null,"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLN9JK2G24EF:00000005","TimeStamp":"2019-06-05T10:10:26.0000000Z","ProcessId":19880,"LocalIpAddress":"127.0.0.1:15199","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-05 12:10:26.216 +02:00 [INF] Success token introspection. Token active: false, for API name: api1
2019-06-05 12:32:56.223 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-05 12:32:56.263 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-05 12:32:56.264 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-05 12:32:56.264 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-05 12:32:56.264 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-05 12:32:56.264 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-05 12:32:56.264 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-05 12:32:56.377 +02:00 [DBG] Starting grant removal
2019-06-05 12:32:56.636 +02:00 [DBG] Login Url: /Account/Login
2019-06-05 12:32:56.638 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-05 12:32:56.638 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-05 12:32:56.638 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-05 12:32:56.638 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-05 12:32:56.638 +02:00 [DBG] Error Url: /home/error
2019-06-05 12:32:56.638 +02:00 [DBG] Error Id Parameter: errorId
2019-06-05 12:37:53.761 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-05 12:37:53.900 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-05 12:37:53.900 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-05 12:37:53.900 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-05 12:37:53.900 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-05 12:37:53.900 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-05 12:37:53.900 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-05 12:37:54.050 +02:00 [DBG] Starting grant removal
2019-06-05 12:37:54.435 +02:00 [DBG] Login Url: /Account/Login
2019-06-05 12:37:54.437 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-05 12:37:54.437 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-05 12:37:54.437 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-05 12:37:54.438 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-05 12:37:54.438 +02:00 [DBG] Error Url: /home/error
2019-06-05 12:37:54.438 +02:00 [DBG] Error Id Parameter: errorId
2019-06-05 12:40:39.702 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-05 12:40:39.732 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-05 12:40:39.732 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-05 12:40:39.744 +02:00 [DBG] Start token request.
2019-06-05 12:40:39.756 +02:00 [DBG] Start client validation
2019-06-05 12:40:39.765 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:40:39.769 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:40:39.783 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:40:39.783 +02:00 [DBG] Secret id found: ro.client
2019-06-05 12:40:40.969 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:40:40.979 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:40:40.987 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:40:40.987 +02:00 [DBG] Client validation success
2019-06-05 12:40:41.005 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000001","TimeStamp":"2019-06-05T10:40:40.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-05 12:40:41.017 +02:00 [DBG] Start token request validation
2019-06-05 12:40:41.029 +02:00 [DBG] Start resource owner password token request validation
2019-06-05 12:40:41.113 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:40:41.356 +02:00 [DBG] Found ["api1","CUSTOM_SCOPE"] API scopes in database
2019-06-05 12:40:41.369 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:40:41.372 +02:00 [DBG] Found ["api1","CUSTOM_SCOPE"] API scopes in database
2019-06-05 12:40:41.620 +02:00 [INF] Credentials validated for username: alice
2019-06-05 12:40:41.622 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000001","TimeStamp":"2019-06-05T10:40:41.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 12:40:41.628 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000001","TimeStamp":"2019-06-05T10:40:41.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 12:40:41.628 +02:00 [DBG] Resource owner password token request validation success.
2019-06-05 12:40:41.639 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-05 12:40:41.666 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-05 12:40:41.666 +02:00 [DBG] Getting claims for access token for subject: 56332a6d-d388-48cf-a7fb-5dfb5d711cc9
2019-06-05 12:40:41.788 +02:00 [DBG] igisS+WF+AfO+0dx1tfeHvET/PwGzUgPCjyJABHIDsU= not found in database
2019-06-05 12:40:41.830 +02:00 [DBG] Creating refresh token
2019-06-05 12:40:41.830 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-05 12:40:41.834 +02:00 [DBG] Aj3AsCphlDioXaARNaQ0c61V5Lz34PgIurWRlDNi+oQ= not found in database
2019-06-05 12:40:41.842 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****6b8c","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5b87","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000001","TimeStamp":"2019-06-05T10:40:41.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-05 12:40:41.844 +02:00 [DBG] Token request success.
2019-06-05 12:40:47.990 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-05 12:40:47.992 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-05 12:40:47.992 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-05 12:40:47.995 +02:00 [DBG] Start discovery request
2019-06-05 12:40:48.135 +02:00 [DBG] Found ["openid","profile","api1","CUSTOM_SCOPE"] as all scopes in database
2019-06-05 12:40:48.175 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-05 12:40:48.176 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-05 12:40:48.176 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-05 12:40:48.178 +02:00 [DBG] Start key discovery request
2019-06-05 12:40:48.284 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 12:40:48.286 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 12:40:48.286 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 12:40:48.294 +02:00 [DBG] Starting introspection request.
2019-06-05 12:40:48.300 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:40:48.301 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:40:48.301 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:40:48.301 +02:00 [DBG] Secret id found: api1
2019-06-05 12:40:48.378 +02:00 [DBG] Found api1 API resource in database
2019-06-05 12:40:48.378 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:40:48.378 +02:00 [DBG] API resource validation success
2019-06-05 12:40:48.379 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000004","TimeStamp":"2019-06-05T10:40:48.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-05 12:40:48.383 +02:00 [DBG] Introspection request validation started.
2019-06-05 12:40:48.404 +02:00 [DBG] igisS+WF+AfO+0dx1tfeHvET/PwGzUgPCjyJABHIDsU= found in database: true
2019-06-05 12:40:48.413 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:40:48.413 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:40:48.421 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:40:48.421 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:40:48.437 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-05 12:40:48.439 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"28b4eb29d2cb504d1c62d984d28066b172a812bd832da5b141471edd4f905b87","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559731241,"exp":1559734841,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","auth_time":1559731241,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-05 12:40:48.441 +02:00 [DBG] Introspection request validation successful.
2019-06-05 12:40:48.461 +02:00 [DBG] Creating introspection response for active token.
2019-06-05 12:40:48.464 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****5b87","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000004","TimeStamp":"2019-06-05T10:40:48.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-05 12:40:48.465 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-05 12:41:42.358 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-05 12:41:42.358 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-05 12:41:42.359 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-05 12:41:42.359 +02:00 [DBG] Start token request.
2019-06-05 12:41:42.359 +02:00 [DBG] Start client validation
2019-06-05 12:41:42.359 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:41:42.359 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:41:42.359 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:41:42.359 +02:00 [DBG] Secret id found: ro.client
2019-06-05 12:41:42.384 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:41:42.384 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:41:42.384 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:41:42.384 +02:00 [DBG] Client validation success
2019-06-05 12:41:42.384 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000005","TimeStamp":"2019-06-05T10:41:42.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-05 12:41:42.385 +02:00 [DBG] Start token request validation
2019-06-05 12:41:42.385 +02:00 [DBG] Start resource owner password token request validation
2019-06-05 12:41:42.426 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:41:42.523 +02:00 [DBG] Found ["api1","CUSTOM_SCOPE"] API scopes in database
2019-06-05 12:41:42.523 +02:00 [ERR] Requested scope not allowed: CUSTOM_SCOPE
2019-06-05 12:41:42.523 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile CUSTOM_SCOPE","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-05 12:41:42.525 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000005","TimeStamp":"2019-06-05T10:41:42.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-05 12:41:44.746 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-05 12:41:44.746 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-05 12:41:44.746 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-05 12:41:44.746 +02:00 [DBG] Start token request.
2019-06-05 12:41:44.746 +02:00 [DBG] Start client validation
2019-06-05 12:41:44.746 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 12:41:44.746 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 12:41:44.746 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 12:41:44.746 +02:00 [DBG] Secret id found: ro.client
2019-06-05 12:41:44.768 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:41:44.768 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:41:44.768 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 12:41:44.768 +02:00 [DBG] Client validation success
2019-06-05 12:41:44.768 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000006","TimeStamp":"2019-06-05T10:41:44.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-05 12:41:44.768 +02:00 [DBG] Start token request validation
2019-06-05 12:41:44.768 +02:00 [DBG] Start resource owner password token request validation
2019-06-05 12:41:44.778 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:41:44.852 +02:00 [DBG] Found ["api1","CUSTOM_SCOPE"] API scopes in database
2019-06-05 12:41:44.854 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:41:44.858 +02:00 [DBG] Found ["api1","CUSTOM_SCOPE"] API scopes in database
2019-06-05 12:41:44.871 +02:00 [INF] Credentials validated for username: alice
2019-06-05 12:41:44.871 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000006","TimeStamp":"2019-06-05T10:41:44.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 12:41:44.871 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000006","TimeStamp":"2019-06-05T10:41:44.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-05 12:41:44.871 +02:00 [DBG] Resource owner password token request validation success.
2019-06-05 12:41:44.871 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-05 12:41:44.872 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-05 12:41:44.872 +02:00 [DBG] Getting claims for access token for subject: 56332a6d-d388-48cf-a7fb-5dfb5d711cc9
2019-06-05 12:41:44.882 +02:00 [DBG] PATsXw6vVyG8tEf/6csZjcj4NKg7OBsF1irOySHeOus= not found in database
2019-06-05 12:41:44.885 +02:00 [DBG] Creating refresh token
2019-06-05 12:41:44.885 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-05 12:41:44.886 +02:00 [DBG] qsY02/dGoQyC+zrJ01aHlLc/02SF6U2Ip/YkHyqEN5A= not found in database
2019-06-05 12:41:44.888 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****ba0e","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8c41","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLN9K7EVPU5Q:00000006","TimeStamp":"2019-06-05T10:41:44.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-05 12:41:44.888 +02:00 [DBG] Token request success.
2019-06-05 12:42:05.755 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-05 12:42:05.756 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-05 12:42:05.756 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-05 12:42:05.762 +02:00 [DBG] Start userinfo request
2019-06-05 12:42:05.765 +02:00 [DBG] Bearer token found in header
2019-06-05 12:42:05.771 +02:00 [DBG] igisS+WF+AfO+0dx1tfeHvET/PwGzUgPCjyJABHIDsU= found in database: true
2019-06-05 12:42:05.775 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:42:05.775 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:42:05.779 +02:00 [DBG] ro.client found in database: true
2019-06-05 12:42:05.779 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-05 12:42:05.782 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-05 12:42:05.783 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"28b4eb29d2cb504d1c62d984d28066b172a812bd832da5b141471edd4f905b87","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559731241,"exp":1559734841,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","auth_time":1559731241,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-05 12:42:05.795 +02:00 [DBG] Creating userinfo response
2019-06-05 12:42:05.798 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-05 12:42:05.800 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-05 12:42:05.809 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:42:05.809 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-05 12:42:05.809 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-05 12:42:05.811 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-05 12:42:05.820 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-05 12:42:05.820 +02:00 [DBG] End userinfo request
2019-06-05 13:37:54.177 +02:00 [DBG] Removing 0 grants
2019-06-05 14:37:54.341 +02:00 [DBG] Removing 2 grants
2019-06-05 15:37:56.692 +02:00 [DBG] Removing 0 grants
2019-06-05 16:11:13.689 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-05 16:11:14.097 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-05 16:11:14.097 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-05 16:11:14.138 +02:00 [DBG] Starting introspection request.
2019-06-05 16:11:14.138 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-05 16:11:14.138 +02:00 [DBG] Start parsing for secret in post body
2019-06-05 16:11:14.238 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-05 16:11:14.238 +02:00 [DBG] Secret id found: api1
2019-06-05 16:11:15.492 +02:00 [DBG] Found api1 API resource in database
2019-06-05 16:11:15.616 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-05 16:11:15.616 +02:00 [DBG] API resource validation success
2019-06-05 16:11:15.642 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLN9K7EVPU5R:00000001","TimeStamp":"2019-06-05T14:11:15.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-05 16:11:15.679 +02:00 [DBG] Introspection request validation started.
2019-06-05 16:11:15.703 +02:00 [DBG] uRZh3tYR9TUzPvFf8ExTUcVBhvMg4Z8HjzjPV3wb5vM= found in database: false
2019-06-05 16:11:15.738 +02:00 [DBG] reference_token grant with value: e66e5db4304c947c359e4f5f5fa2a3541e883284ba5fbe88a1c47380f276da9e not found in store.
2019-06-05 16:11:15.803 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"e66e5db4304c947c359e4f5f5fa2a3541e883284ba5fbe88a1c47380f276da9e","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-05 16:11:15.803 +02:00 [DBG] Token is invalid.
2019-06-05 16:11:15.804 +02:00 [DBG] Creating introspection response for inactive token.
2019-06-05 16:11:15.822 +02:00 [INF] {"ApiName":"api1","IsActive":false,"Token":"****da9e","ClaimTypes":null,"TokenScopes":null,"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLN9K7EVPU5R:00000001","TimeStamp":"2019-06-05T14:11:15.0000000Z","ProcessId":29768,"LocalIpAddress":"127.0.0.1:19994","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-05 16:11:15.822 +02:00 [INF] Success token introspection. Token active: false, for API name: api1
2019-06-05 16:37:56.805 +02:00 [DBG] Removing 0 grants
2019-06-05 17:37:56.919 +02:00 [DBG] Removing 0 grants
2019-06-05 18:37:57.013 +02:00 [DBG] Removing 0 grants
2019-06-05 19:37:57.066 +02:00 [DBG] Removing 0 grants
2019-06-05 20:37:57.105 +02:00 [DBG] Removing 0 grants
2019-06-05 21:37:57.140 +02:00 [DBG] Removing 0 grants
2019-06-05 22:37:57.240 +02:00 [DBG] Removing 0 grants
2019-06-05 23:37:57.325 +02:00 [DBG] Removing 0 grants
2019-06-06 00:37:57.379 +02:00 [DBG] Removing 0 grants
2019-06-06 01:37:57.416 +02:00 [DBG] Removing 0 grants
2019-06-06 02:37:57.472 +02:00 [DBG] Removing 0 grants
2019-06-06 03:37:57.508 +02:00 [DBG] Removing 0 grants
2019-06-06 04:37:57.538 +02:00 [DBG] Removing 0 grants
2019-06-06 05:37:57.558 +02:00 [DBG] Removing 0 grants
2019-06-06 06:37:57.583 +02:00 [DBG] Removing 0 grants
2019-06-06 07:37:57.685 +02:00 [DBG] Removing 0 grants
2019-06-06 08:37:57.766 +02:00 [DBG] Removing 0 grants
2019-06-06 09:37:58.413 +02:00 [DBG] Removing 0 grants
2019-06-07 10:35:55.782 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-07 10:35:56.238 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-07 10:35:56.239 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-07 10:35:56.239 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-07 10:35:56.239 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-07 10:35:56.239 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-07 10:35:56.239 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-07 10:35:56.571 +02:00 [DBG] Starting grant removal
2019-06-07 10:35:57.057 +02:00 [DBG] Login Url: /Account/Login
2019-06-07 10:35:57.058 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-07 10:35:57.058 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-07 10:35:57.058 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-07 10:35:57.058 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-07 10:35:57.059 +02:00 [DBG] Error Url: /home/error
2019-06-07 10:35:57.059 +02:00 [DBG] Error Id Parameter: errorId
2019-06-07 10:36:07.574 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 10:36:07.664 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 10:36:07.664 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 10:36:07.675 +02:00 [DBG] Start token request.
2019-06-07 10:36:07.681 +02:00 [DBG] Start client validation
2019-06-07 10:36:07.685 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 10:36:07.688 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 10:36:07.719 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 10:36:07.719 +02:00 [DBG] Secret id found: ro.client
2019-06-07 10:36:19.761 +02:00 [DBG] ro.client found in database: true
2019-06-07 10:36:19.784 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 10:36:19.792 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 10:36:19.792 +02:00 [DBG] Client validation success
2019-06-07 10:36:19.815 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB4CKJHHCV:00000002","TimeStamp":"2019-06-07T08:36:19.0000000Z","ProcessId":13968,"LocalIpAddress":"127.0.0.1:43289","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 10:36:19.838 +02:00 [DBG] Start token request validation
2019-06-07 10:36:19.848 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 10:36:19.936 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 10:36:20.163 +02:00 [DBG] Found ["api1","CUSTOM_SCOPE"] API scopes in database
2019-06-07 10:36:20.175 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 10:36:20.178 +02:00 [DBG] Found ["api1","CUSTOM_SCOPE"] API scopes in database
2019-06-07 10:36:20.545 +02:00 [INF] Credentials validated for username: alice
2019-06-07 10:36:20.546 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB4CKJHHCV:00000002","TimeStamp":"2019-06-07T08:36:20.0000000Z","ProcessId":13968,"LocalIpAddress":"127.0.0.1:43289","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 10:36:20.552 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB4CKJHHCV:00000002","TimeStamp":"2019-06-07T08:36:20.0000000Z","ProcessId":13968,"LocalIpAddress":"127.0.0.1:43289","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 10:36:20.552 +02:00 [DBG] Resource owner password token request validation success.
2019-06-07 10:36:20.559 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 10:36:20.578 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-07 10:36:20.578 +02:00 [DBG] Getting claims for access token for subject: 56332a6d-d388-48cf-a7fb-5dfb5d711cc9
2019-06-07 10:36:20.778 +02:00 [DBG] HZFVP7N6mNO0fVTS9TklNrrlsQhxleiKaGPvYSoIxjo= not found in database
2019-06-07 10:36:20.850 +02:00 [DBG] Creating refresh token
2019-06-07 10:36:20.850 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-07 10:36:20.855 +02:00 [DBG] LEJnDUDalogCDeyf//dEZ29TqA6eZ0yfaMxvwBwL2qg= not found in database
2019-06-07 10:36:20.862 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****8827","$type":"Token"},{"TokenType":"access_token","TokenValue":"****30ba","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNB4CKJHHCV:00000002","TimeStamp":"2019-06-07T08:36:20.0000000Z","ProcessId":13968,"LocalIpAddress":"127.0.0.1:43289","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-07 10:36:20.863 +02:00 [DBG] Token request success.
2019-06-07 10:39:56.507 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-07 10:39:56.589 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-07 10:39:56.593 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-07 10:39:56.601 +02:00 [DBG] Start userinfo request
2019-06-07 10:39:56.604 +02:00 [DBG] Bearer token found in header
2019-06-07 10:39:56.647 +02:00 [DBG] HZFVP7N6mNO0fVTS9TklNrrlsQhxleiKaGPvYSoIxjo= found in database: true
2019-06-07 10:39:56.686 +02:00 [DBG] ro.client found in database: true
2019-06-07 10:39:56.686 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 10:39:56.701 +02:00 [DBG] ro.client found in database: true
2019-06-07 10:39:56.701 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 10:39:56.731 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-07 10:39:56.733 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"cf4fd0f2fc0820f865be51b813da6390357ee0c765e371b4e6ea99a0671630ba","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559896580,"exp":1559900180,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"56332a6d-d388-48cf-a7fb-5dfb5d711cc9","auth_time":1559896580,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-07 10:39:56.739 +02:00 [DBG] Creating userinfo response
2019-06-07 10:39:56.741 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-07 10:39:56.743 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-07 10:39:56.752 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 10:39:56.752 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-07 10:39:56.752 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-07 10:39:56.754 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 10:39:56.761 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-07 10:39:56.762 +02:00 [DBG] End userinfo request
2019-06-07 12:02:48.674 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-07 12:02:48.712 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-07 12:02:48.712 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-07 12:02:48.712 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-07 12:02:48.712 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-07 12:02:48.712 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-07 12:02:48.712 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-07 12:02:48.857 +02:00 [DBG] Starting grant removal
2019-06-07 12:02:49.293 +02:00 [DBG] Login Url: /Account/Login
2019-06-07 12:02:49.295 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-07 12:02:49.295 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-07 12:02:49.295 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-07 12:02:49.295 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-07 12:02:49.295 +02:00 [DBG] Error Url: /home/error
2019-06-07 12:02:49.295 +02:00 [DBG] Error Id Parameter: errorId
2019-06-07 12:03:02.616 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 12:03:02.638 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 12:03:02.638 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 12:03:02.644 +02:00 [DBG] Start token request.
2019-06-07 12:03:02.648 +02:00 [DBG] Start client validation
2019-06-07 12:03:02.652 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:03:02.655 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:03:02.668 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:03:02.668 +02:00 [DBG] Secret id found: ro.client
2019-06-07 12:03:02.875 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:03:02.883 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:03:02.892 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:03:02.892 +02:00 [DBG] Client validation success
2019-06-07 12:03:02.908 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB5T60AIGJ:00000002","TimeStamp":"2019-06-07T10:03:02.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 12:03:02.918 +02:00 [DBG] Start token request validation
2019-06-07 12:03:02.926 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 12:03:03.014 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:03:03.221 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:03:03.233 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:03:03.236 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:03:03.271 +02:00 [INF] Credentials validated for username: alice
2019-06-07 12:03:03.272 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB5T60AIGJ:00000002","TimeStamp":"2019-06-07T10:03:03.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 12:03:03.279 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB5T60AIGJ:00000002","TimeStamp":"2019-06-07T10:03:03.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 12:03:03.279 +02:00 [DBG] Resource owner password token request validation success.
2019-06-07 12:03:03.286 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 12:03:03.335 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-07 12:03:03.336 +02:00 [DBG] Getting claims for access token for subject: 366f70e4-80e2-4a1d-8d8f-e99891663e13
2019-06-07 12:03:03.450 +02:00 [DBG] exu6hLBqPun1voDu21lEv0o0B0QxAmhvdcKiQRF2WSM= not found in database
2019-06-07 12:03:03.466 +02:00 [DBG] Creating refresh token
2019-06-07 12:03:03.466 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-07 12:03:03.469 +02:00 [DBG] rmsGkinabjVlqnJSBBfwV0TjKhDSLJj4C9ccW6qmBi4= not found in database
2019-06-07 12:03:03.475 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****c4cc","$type":"Token"},{"TokenType":"access_token","TokenValue":"****124a","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNB5T60AIGJ:00000002","TimeStamp":"2019-06-07T10:03:03.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-07 12:03:03.476 +02:00 [DBG] Token request success.
2019-06-07 12:03:07.350 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-07 12:03:07.351 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-07 12:03:07.351 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-07 12:03:07.357 +02:00 [DBG] Start userinfo request
2019-06-07 12:03:07.360 +02:00 [DBG] Bearer token found in header
2019-06-07 12:03:07.385 +02:00 [DBG] exu6hLBqPun1voDu21lEv0o0B0QxAmhvdcKiQRF2WSM= found in database: true
2019-06-07 12:03:07.397 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:03:07.398 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:03:07.405 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:03:07.405 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:03:07.417 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-07 12:03:07.418 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"713693c9eea426affe5527c1808ef184a67448290993685961290e8d0906124a","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559901783,"exp":1559905383,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"366f70e4-80e2-4a1d-8d8f-e99891663e13","auth_time":1559901783,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-07 12:03:07.427 +02:00 [DBG] Creating userinfo response
2019-06-07 12:03:07.431 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-07 12:03:07.433 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-07 12:03:07.440 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:03:07.441 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-07 12:03:07.441 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-07 12:03:07.443 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:03:07.451 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-07 12:03:07.451 +02:00 [DBG] End userinfo request
2019-06-07 12:03:17.899 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-07 12:03:17.899 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-07 12:03:17.899 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-07 12:03:17.934 +02:00 [DBG] Start discovery request
2019-06-07 12:03:18.015 +02:00 [DBG] Found ["openid","profile","api1","api1.full_access","api1.read_only"] as all scopes in database
2019-06-07 12:03:18.070 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-07 12:03:18.071 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-07 12:03:18.071 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-07 12:03:18.074 +02:00 [DBG] Start key discovery request
2019-06-07 12:03:18.225 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-07 12:03:18.226 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-07 12:03:18.226 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-07 12:03:18.238 +02:00 [DBG] Starting introspection request.
2019-06-07 12:03:18.243 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:03:18.243 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:03:18.243 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:03:18.243 +02:00 [DBG] Secret id found: api1
2019-06-07 12:03:18.291 +02:00 [DBG] Found api1 API resource in database
2019-06-07 12:03:18.291 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:03:18.291 +02:00 [DBG] API resource validation success
2019-06-07 12:03:18.292 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNB5T60AIGJ:00000004","TimeStamp":"2019-06-07T10:03:18.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-07 12:03:18.295 +02:00 [DBG] Introspection request validation started.
2019-06-07 12:03:18.296 +02:00 [DBG] exu6hLBqPun1voDu21lEv0o0B0QxAmhvdcKiQRF2WSM= found in database: true
2019-06-07 12:03:18.299 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:03:18.299 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:03:18.302 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:03:18.302 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:03:18.306 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-07 12:03:18.306 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"713693c9eea426affe5527c1808ef184a67448290993685961290e8d0906124a","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559901783,"exp":1559905383,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"366f70e4-80e2-4a1d-8d8f-e99891663e13","auth_time":1559901783,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-07 12:03:18.308 +02:00 [DBG] Introspection request validation successful.
2019-06-07 12:03:18.318 +02:00 [DBG] Creating introspection response for active token.
2019-06-07 12:03:18.320 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****124a","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNB5T60AIGJ:00000004","TimeStamp":"2019-06-07T10:03:18.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-07 12:03:18.320 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-07 12:03:21.655 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-07 12:03:21.656 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-07 12:03:21.656 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-07 12:03:21.656 +02:00 [DBG] Starting introspection request.
2019-06-07 12:03:21.659 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:03:21.659 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:03:21.660 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:03:21.660 +02:00 [DBG] Secret id found: api1
2019-06-07 12:03:21.663 +02:00 [DBG] Found api1 API resource in database
2019-06-07 12:03:21.664 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:03:21.664 +02:00 [DBG] API resource validation success
2019-06-07 12:03:21.664 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNB5T60AIGI:00000004","TimeStamp":"2019-06-07T10:03:21.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-07 12:03:21.664 +02:00 [DBG] Introspection request validation started.
2019-06-07 12:03:21.665 +02:00 [DBG] exu6hLBqPun1voDu21lEv0o0B0QxAmhvdcKiQRF2WSM= found in database: true
2019-06-07 12:03:21.670 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:03:21.670 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:03:21.675 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:03:21.675 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:03:21.680 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-07 12:03:21.680 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"713693c9eea426affe5527c1808ef184a67448290993685961290e8d0906124a","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559901783,"exp":1559905383,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"366f70e4-80e2-4a1d-8d8f-e99891663e13","auth_time":1559901783,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-07 12:03:21.681 +02:00 [DBG] Introspection request validation successful.
2019-06-07 12:03:21.681 +02:00 [DBG] Creating introspection response for active token.
2019-06-07 12:03:21.681 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****124a","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNB5T60AIGI:00000004","TimeStamp":"2019-06-07T10:03:21.0000000Z","ProcessId":31208,"LocalIpAddress":"127.0.0.1:34946","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-07 12:03:21.681 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-07 12:09:40.178 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-07 12:09:40.261 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-07 12:09:40.261 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-07 12:09:40.261 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-07 12:09:40.261 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-07 12:09:40.261 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-07 12:09:40.261 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-07 12:09:40.327 +02:00 [DBG] Starting grant removal
2019-06-07 12:09:40.490 +02:00 [DBG] Login Url: /Account/Login
2019-06-07 12:09:40.491 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-07 12:09:40.491 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-07 12:09:40.491 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-07 12:09:40.491 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-07 12:09:40.491 +02:00 [DBG] Error Url: /home/error
2019-06-07 12:09:40.491 +02:00 [DBG] Error Id Parameter: errorId
2019-06-07 12:09:40.508 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-07 12:09:40.516 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-07 12:09:40.516 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-07 12:09:40.518 +02:00 [DBG] Start discovery request
2019-06-07 12:09:41.145 +02:00 [DBG] Found ["openid","profile","api1","api1.full_access","api1.read_only"] as all scopes in database
2019-06-07 12:09:41.194 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-07 12:09:41.195 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-07 12:09:41.195 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-07 12:09:41.197 +02:00 [DBG] Start key discovery request
2019-06-07 12:09:41.252 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-07 12:09:41.253 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-07 12:09:41.253 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-07 12:09:41.261 +02:00 [DBG] Starting introspection request.
2019-06-07 12:09:41.281 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:09:41.283 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:09:41.293 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:09:41.293 +02:00 [DBG] Secret id found: api1
2019-06-07 12:09:41.333 +02:00 [DBG] Found api1 API resource in database
2019-06-07 12:09:41.341 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:09:41.341 +02:00 [DBG] API resource validation success
2019-06-07 12:09:41.351 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNB610IQGMD:00000003","TimeStamp":"2019-06-07T10:09:41.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-07 12:09:41.359 +02:00 [DBG] Introspection request validation started.
2019-06-07 12:09:41.410 +02:00 [DBG] exu6hLBqPun1voDu21lEv0o0B0QxAmhvdcKiQRF2WSM= found in database: true
2019-06-07 12:09:41.631 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:09:41.636 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:09:41.643 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:09:41.643 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:09:41.730 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-07 12:09:41.735 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"713693c9eea426affe5527c1808ef184a67448290993685961290e8d0906124a","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1559901783,"exp":1559905383,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"366f70e4-80e2-4a1d-8d8f-e99891663e13","auth_time":1559901783,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-07 12:09:41.737 +02:00 [DBG] Introspection request validation successful.
2019-06-07 12:09:41.744 +02:00 [DBG] Creating introspection response for active token.
2019-06-07 12:09:41.746 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****124a","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNB610IQGMD:00000003","TimeStamp":"2019-06-07T10:09:41.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-07 12:09:41.747 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-07 12:56:38.065 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 12:56:38.079 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 12:56:38.079 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 12:56:38.090 +02:00 [DBG] Start token request.
2019-06-07 12:56:38.094 +02:00 [DBG] Start client validation
2019-06-07 12:56:38.095 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:56:38.095 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:56:38.096 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:56:38.096 +02:00 [DBG] Secret id found: ro.client
2019-06-07 12:56:38.173 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:56:38.173 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:56:38.174 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:56:38.174 +02:00 [DBG] Client validation success
2019-06-07 12:56:38.174 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB610IQGME:00000001","TimeStamp":"2019-06-07T10:56:38.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 12:56:38.181 +02:00 [DBG] Start token request validation
2019-06-07 12:56:38.191 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 12:56:38.259 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:56:38.303 +02:00 [DBG] Found [] API scopes in database
2019-06-07 12:56:38.305 +02:00 [ERR] Requested scope not allowed: api1role
2019-06-07 12:56:38.309 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 12:56:38.310 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNB610IQGME:00000001","TimeStamp":"2019-06-07T10:56:38.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-07 12:56:41.896 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 12:56:41.897 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 12:56:41.897 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 12:56:41.897 +02:00 [DBG] Start token request.
2019-06-07 12:56:41.897 +02:00 [DBG] Start client validation
2019-06-07 12:56:41.897 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:56:41.898 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:56:41.898 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:56:41.898 +02:00 [DBG] Secret id found: ro.client
2019-06-07 12:56:41.902 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:56:41.902 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:56:41.902 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:56:41.902 +02:00 [DBG] Client validation success
2019-06-07 12:56:41.902 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB610IQGME:00000002","TimeStamp":"2019-06-07T10:56:41.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 12:56:41.903 +02:00 [DBG] Start token request validation
2019-06-07 12:56:41.903 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 12:56:41.970 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:56:42.065 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:56:42.068 +02:00 [ERR] Requested scope not allowed: role
2019-06-07 12:56:42.068 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 12:56:42.068 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNB610IQGME:00000002","TimeStamp":"2019-06-07T10:56:42.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-07 12:56:49.034 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 12:56:49.035 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 12:56:49.035 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 12:56:49.035 +02:00 [DBG] Start token request.
2019-06-07 12:56:49.035 +02:00 [DBG] Start client validation
2019-06-07 12:56:49.035 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:56:49.035 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:56:49.035 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:56:49.035 +02:00 [DBG] Secret id found: ro.client
2019-06-07 12:56:49.039 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:56:49.039 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:56:49.039 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:56:49.039 +02:00 [DBG] Client validation success
2019-06-07 12:56:49.039 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB610IQGME:00000003","TimeStamp":"2019-06-07T10:56:49.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 12:56:49.040 +02:00 [DBG] Start token request validation
2019-06-07 12:56:49.040 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 12:56:49.047 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:56:49.161 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:56:49.167 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:56:49.169 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:56:49.211 +02:00 [INF] Credentials validated for username: alice
2019-06-07 12:56:49.212 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB610IQGME:00000003","TimeStamp":"2019-06-07T10:56:49.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 12:56:49.214 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB610IQGME:00000003","TimeStamp":"2019-06-07T10:56:49.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 12:56:49.214 +02:00 [DBG] Resource owner password token request validation success.
2019-06-07 12:56:49.216 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 12:56:49.235 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-07 12:56:49.235 +02:00 [DBG] Getting claims for access token for subject: 366f70e4-80e2-4a1d-8d8f-e99891663e13
2019-06-07 12:56:49.322 +02:00 [DBG] aZTVIejU0vHU9KOa9gQQXDx0sjvJii0hURyqBnhDR6g= not found in database
2019-06-07 12:56:49.384 +02:00 [DBG] Creating refresh token
2019-06-07 12:56:49.384 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-07 12:56:49.388 +02:00 [DBG] i4Y5Lu38GtZQO8FgbicNI6DxJ9f7YOLFSJ/r8VqNqkE= not found in database
2019-06-07 12:56:49.395 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****c228","$type":"Token"},{"TokenType":"access_token","TokenValue":"****da39","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNB610IQGME:00000003","TimeStamp":"2019-06-07T10:56:49.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-07 12:56:49.396 +02:00 [DBG] Token request success.
2019-06-07 12:57:15.764 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 12:57:15.764 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 12:57:15.764 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 12:57:15.764 +02:00 [DBG] Start token request.
2019-06-07 12:57:15.764 +02:00 [DBG] Start client validation
2019-06-07 12:57:15.764 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:57:15.764 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:57:15.764 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:57:15.765 +02:00 [DBG] Secret id found: ro.client
2019-06-07 12:57:15.787 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:57:15.787 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:57:15.787 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:57:15.787 +02:00 [DBG] Client validation success
2019-06-07 12:57:15.787 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB610IQGME:00000005","TimeStamp":"2019-06-07T10:57:15.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 12:57:15.787 +02:00 [DBG] Start token request validation
2019-06-07 12:57:15.787 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 12:57:15.794 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:57:15.856 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:57:15.858 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:57:15.860 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:57:15.872 +02:00 [INF] Credentials validated for username: alice
2019-06-07 12:57:15.872 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB610IQGME:00000005","TimeStamp":"2019-06-07T10:57:15.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 12:57:15.872 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB610IQGME:00000005","TimeStamp":"2019-06-07T10:57:15.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 12:57:15.872 +02:00 [DBG] Resource owner password token request validation success.
2019-06-07 12:57:15.872 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 12:57:15.872 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-07 12:57:15.872 +02:00 [DBG] Getting claims for access token for subject: 366f70e4-80e2-4a1d-8d8f-e99891663e13
2019-06-07 12:57:15.881 +02:00 [DBG] DUwGLHtYS29lHhryQveC8vXSAPoRYOHuFhm4l/tgHyk= not found in database
2019-06-07 12:57:15.883 +02:00 [DBG] Creating refresh token
2019-06-07 12:57:15.883 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-07 12:57:15.884 +02:00 [DBG] YkeHJ5JCNuZDGajxNk1VH6yHFu6ujj0bPP2bq5d/YQ8= not found in database
2019-06-07 12:57:15.886 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"366f70e4-80e2-4a1d-8d8f-e99891663e13","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****d35d","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ad80","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNB610IQGME:00000005","TimeStamp":"2019-06-07T10:57:15.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-07 12:57:15.886 +02:00 [DBG] Token request success.
2019-06-07 12:57:18.997 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 12:57:18.998 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 12:57:18.998 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 12:57:18.998 +02:00 [DBG] Start token request.
2019-06-07 12:57:18.998 +02:00 [DBG] Start client validation
2019-06-07 12:57:18.998 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 12:57:18.998 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 12:57:18.998 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 12:57:18.998 +02:00 [DBG] Secret id found: ro.client
2019-06-07 12:57:19.003 +02:00 [DBG] ro.client found in database: true
2019-06-07 12:57:19.003 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 12:57:19.003 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 12:57:19.003 +02:00 [DBG] Client validation success
2019-06-07 12:57:19.003 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB610IQGME:00000006","TimeStamp":"2019-06-07T10:57:19.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 12:57:19.003 +02:00 [DBG] Start token request validation
2019-06-07 12:57:19.003 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 12:57:19.011 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 12:57:19.089 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 12:57:19.089 +02:00 [ERR] Requested scope not allowed: role
2019-06-07 12:57:19.089 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 12:57:19.089 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNB610IQGME:00000006","TimeStamp":"2019-06-07T10:57:19.0000000Z","ProcessId":4388,"LocalIpAddress":"127.0.0.1:11290","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-07 14:54:52.630 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-07 14:54:52.690 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-07 14:54:52.690 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-07 14:54:52.691 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-07 14:54:52.691 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-07 14:54:52.691 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-07 14:54:52.691 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-07 14:54:52.935 +02:00 [DBG] Starting grant removal
2019-06-07 14:54:53.302 +02:00 [DBG] Login Url: /Account/Login
2019-06-07 14:54:53.311 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-07 14:54:53.311 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-07 14:54:53.311 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-07 14:54:53.311 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-07 14:54:53.311 +02:00 [DBG] Error Url: /home/error
2019-06-07 14:54:53.311 +02:00 [DBG] Error Id Parameter: errorId
2019-06-07 14:55:01.088 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 14:55:01.166 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 14:55:01.166 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 14:55:01.175 +02:00 [DBG] Start token request.
2019-06-07 14:55:01.179 +02:00 [DBG] Start client validation
2019-06-07 14:55:01.183 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 14:55:01.187 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 14:55:01.255 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 14:55:01.255 +02:00 [DBG] Secret id found: ro.client
2019-06-07 14:55:01.577 +02:00 [DBG] ro.client found in database: true
2019-06-07 14:55:01.607 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 14:55:01.646 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 14:55:01.647 +02:00 [DBG] Client validation success
2019-06-07 14:55:01.676 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB8TAOL5EP:00000002","TimeStamp":"2019-06-07T12:55:01.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 14:55:01.696 +02:00 [DBG] Start token request validation
2019-06-07 14:55:01.707 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 14:55:01.762 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 14:55:01.909 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 14:55:01.916 +02:00 [ERR] Requested scope not allowed: role
2019-06-07 14:55:01.922 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 14:55:01.925 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNB8TAOL5EP:00000002","TimeStamp":"2019-06-07T12:55:01.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-07 14:55:17.531 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 14:55:17.533 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 14:55:17.533 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 14:55:17.533 +02:00 [DBG] Start token request.
2019-06-07 14:55:17.533 +02:00 [DBG] Start client validation
2019-06-07 14:55:17.534 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 14:55:17.534 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 14:55:17.534 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 14:55:17.534 +02:00 [DBG] Secret id found: ro.client
2019-06-07 14:55:17.539 +02:00 [DBG] ro.client found in database: true
2019-06-07 14:55:17.540 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 14:55:17.540 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 14:55:17.540 +02:00 [DBG] Client validation success
2019-06-07 14:55:17.540 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB8TAOL5EQ:00000002","TimeStamp":"2019-06-07T12:55:17.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 14:55:17.540 +02:00 [DBG] Start token request validation
2019-06-07 14:55:17.540 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 14:55:17.547 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 14:55:17.610 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 14:55:17.617 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 14:55:17.620 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 14:55:17.667 +02:00 [INF] Credentials validated for username: alice
2019-06-07 14:55:17.668 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB8TAOL5EQ:00000002","TimeStamp":"2019-06-07T12:55:17.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 14:55:17.687 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNB8TAOL5EQ:00000002","TimeStamp":"2019-06-07T12:55:17.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-07 14:55:17.687 +02:00 [DBG] Resource owner password token request validation success.
2019-06-07 14:55:17.690 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 14:55:17.714 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-07 14:55:17.714 +02:00 [DBG] Getting claims for access token for subject: 527f7d0c-6630-42c5-b3bd-18d65779b528
2019-06-07 14:55:17.874 +02:00 [DBG] 09Hnz41hPmHfXIcv+u1RPXTu7MVcInHJlBCLyVYfKys= not found in database
2019-06-07 14:55:17.894 +02:00 [DBG] Creating refresh token
2019-06-07 14:55:17.894 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-07 14:55:17.899 +02:00 [DBG] HJEuCXKM2RT7UCOOl4sbu1uaqr4dcP5TZH7brng2Oq4= not found in database
2019-06-07 14:55:17.906 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****9dd8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7fe9","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNB8TAOL5EQ:00000002","TimeStamp":"2019-06-07T12:55:17.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-07 14:55:17.907 +02:00 [DBG] Token request success.
2019-06-07 14:55:21.559 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 14:55:21.559 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 14:55:21.559 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 14:55:21.559 +02:00 [DBG] Start token request.
2019-06-07 14:55:21.559 +02:00 [DBG] Start client validation
2019-06-07 14:55:21.559 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 14:55:21.559 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 14:55:21.559 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 14:55:21.559 +02:00 [DBG] Secret id found: ro.client
2019-06-07 14:55:21.581 +02:00 [DBG] ro.client found in database: true
2019-06-07 14:55:21.581 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 14:55:21.581 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 14:55:21.581 +02:00 [DBG] Client validation success
2019-06-07 14:55:21.581 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB8TAOL5EP:00000003","TimeStamp":"2019-06-07T12:55:21.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 14:55:21.581 +02:00 [DBG] Start token request validation
2019-06-07 14:55:21.582 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 14:55:21.590 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 14:55:21.659 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 14:55:21.660 +02:00 [ERR] Requested scope not allowed: role
2019-06-07 14:55:21.660 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 14:55:21.660 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNB8TAOL5EP:00000003","TimeStamp":"2019-06-07T12:55:21.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-07 14:55:25.692 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 14:55:25.693 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 14:55:25.693 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 14:55:25.693 +02:00 [DBG] Start token request.
2019-06-07 14:55:25.693 +02:00 [DBG] Start client validation
2019-06-07 14:55:25.693 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 14:55:25.693 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 14:55:25.693 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 14:55:25.693 +02:00 [DBG] Secret id found: ro.client
2019-06-07 14:55:25.716 +02:00 [DBG] ro.client found in database: true
2019-06-07 14:55:25.716 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 14:55:25.716 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 14:55:25.716 +02:00 [DBG] Client validation success
2019-06-07 14:55:25.716 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB8TAOL5EQ:00000003","TimeStamp":"2019-06-07T12:55:25.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 14:55:25.716 +02:00 [DBG] Start token request validation
2019-06-07 14:55:25.716 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 14:55:25.740 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 14:55:25.746 +02:00 [DBG] Found [] API scopes in database
2019-06-07 14:55:25.746 +02:00 [ERR] Requested scope not allowed: role
2019-06-07 14:55:25.746 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 14:55:25.746 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNB8TAOL5EQ:00000003","TimeStamp":"2019-06-07T12:55:25.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-07 14:55:28.709 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-07 14:55:28.710 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-07 14:55:28.710 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-07 14:55:28.710 +02:00 [DBG] Start token request.
2019-06-07 14:55:28.710 +02:00 [DBG] Start client validation
2019-06-07 14:55:28.710 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-07 14:55:28.710 +02:00 [DBG] Start parsing for secret in post body
2019-06-07 14:55:28.710 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-07 14:55:28.710 +02:00 [DBG] Secret id found: ro.client
2019-06-07 14:55:28.714 +02:00 [DBG] ro.client found in database: true
2019-06-07 14:55:28.715 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-07 14:55:28.715 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-07 14:55:28.715 +02:00 [DBG] Client validation success
2019-06-07 14:55:28.715 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNB8TAOL5EP:00000004","TimeStamp":"2019-06-07T12:55:28.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-07 14:55:28.715 +02:00 [DBG] Start token request validation
2019-06-07 14:55:28.715 +02:00 [DBG] Start resource owner password token request validation
2019-06-07 14:55:28.733 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-07 14:55:28.801 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-07 14:55:28.801 +02:00 [ERR] Requested scope not allowed: role
2019-06-07 14:55:28.801 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-07 14:55:28.801 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNB8TAOL5EP:00000004","TimeStamp":"2019-06-07T12:55:28.0000000Z","ProcessId":3428,"LocalIpAddress":"127.0.0.1:27307","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:28:35.572 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 13:28:37.342 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 13:28:37.342 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 13:28:37.342 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 13:28:37.342 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 13:28:37.342 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 13:28:37.342 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 13:28:41.752 +02:00 [DBG] Starting grant removal
2019-06-17 13:28:48.395 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 13:28:48.505 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 13:28:48.505 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 13:28:48.505 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 13:28:48.505 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 13:28:48.505 +02:00 [DBG] Error Url: /home/error
2019-06-17 13:28:48.505 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 13:28:52.610 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:28:53.469 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:28:53.469 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:28:53.476 +02:00 [DBG] Start token request.
2019-06-17 13:28:53.482 +02:00 [DBG] Start client validation
2019-06-17 13:28:53.489 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:28:53.492 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:28:56.099 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:28:56.099 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:29:48.645 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:29:48.647 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:29:48.647 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:29:48.647 +02:00 [DBG] Start token request.
2019-06-17 13:29:48.647 +02:00 [DBG] Start client validation
2019-06-17 13:29:48.647 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:29:48.647 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:29:48.647 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:29:48.648 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:30:04.380 +02:00 [ERR] An error occurred using the connection to database 'IdentityServer4.Combined-2.3.0' on server '(LocalDb)\MSSQLLocalDB'.
System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
2019-06-17 13:30:08.619 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
2019-06-17 13:30:08.620 +02:00 [ERR] An exception occurred in the database while iterating the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
2019-06-17 13:30:10.891 +02:00 [INF] {"Details":"System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.\r\n   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)\r\n   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)\r\n   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)\r\n   at System.Data.SqlClient.SqlConnection.Open()\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()\r\n   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at lambda_method(Closure )\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()\r\n   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)\r\n   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)\r\n   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)\r\n   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\EntityFramework.Storage\\src\\Stores\\ClientStore.cs:line 47\r\n   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Stores\\ValidatingClientStore.cs:line 52\r\n   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Extensions\\IClientStoreExtensions.cs:line 23\r\n   at IdentityServer4.Validation.ClientSecretValidator.ValidateAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Validation\\Default\\ClientSecretValidator.cs:line 67\r\n   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Endpoints\\TokenEndpoint.cs:line 78\r\n   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Endpoints\\TokenEndpoint.cs:line 70\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\\local\\identity\\server4\\IdentityServer4\\src\\IdentityServer4\\src\\Hosting\\IdentityServerMiddleware.cs:line 54","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.","ActivityId":"0HLNJ2RPOFMK1:00000003","TimeStamp":"2019-06-17T11:30:10.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2019-06-17 13:30:10.901 +02:00 [FTL] Unhandled exception: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\ValidatingClientStore.cs:line 52
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.ClientSecretValidator.ValidateAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Validation\Default\ClientSecretValidator.cs:line 67
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 78
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
2019-06-17 13:30:19.809 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at System.Data.SqlClient.SqlConnection.Open()
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnection(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.Open(Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.BufferlessMoveNext(DbContext _, Boolean buffer)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.Enumerator.MoveNext()
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at lambda_method(Closure )
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ResultEnumerable`1.GetEnumerator()
   at Microsoft.EntityFrameworkCore.Query.Internal.LinqOperatorProvider.ExceptionInterceptor`1.EnumeratorExceptionInterceptor.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Boolean& found)
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass15_1`1.<CompileQueryCore>b__0(QueryContext qc)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.Execute[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.Execute[TResult](Expression expression)
   at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source, Expression`1 predicate)
   at IdentityServer4.EntityFramework.Stores.ClientStore.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\EntityFramework.Storage\src\Stores\ClientStore.cs:line 47
   at IdentityServer4.Stores.ValidatingClientStore`1.FindClientByIdAsync(String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Stores\ValidatingClientStore.cs:line 52
   at IdentityServer4.Stores.IClientStoreExtensions.FindEnabledClientByIdAsync(IClientStore store, String clientId) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Extensions\IClientStoreExtensions.cs:line 23
   at IdentityServer4.Validation.ClientSecretValidator.ValidateAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Validation\Default\ClientSecretValidator.cs:line 67
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessTokenRequestAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 78
   at IdentityServer4.Endpoints.TokenEndpoint.ProcessAsync(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Endpoints\TokenEndpoint.cs:line 70
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 54
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\IdentityServerMiddleware.cs:line 69
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\MtlsTokenEndpointMiddleware.cs:line 60
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context) in C:\local\identity\server4\IdentityServer4\src\IdentityServer4\src\Hosting\BaseUrlMiddleware.cs:line 36
   at Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.MigrationsEndPointMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.EntityFrameworkCore.DatabaseErrorPageMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2019-06-17 13:30:28.133 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:30:28.594 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:30:28.601 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:30:28.601 +02:00 [DBG] Client validation success
2019-06-17 13:30:28.602 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ2RPOFMK0:00000002","TimeStamp":"2019-06-17T11:30:28.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:30:28.685 +02:00 [DBG] Start token request validation
2019-06-17 13:30:28.697 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:30:30.254 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:30:32.020 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:30:32.029 +02:00 [ERR] Requested scope not allowed: role
2019-06-17 13:30:32.035 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:30:32.038 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ2RPOFMK0:00000002","TimeStamp":"2019-06-17T11:30:32.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:30:57.219 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:30:57.220 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:30:57.221 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:30:57.221 +02:00 [DBG] Start token request.
2019-06-17 13:30:57.222 +02:00 [DBG] Start client validation
2019-06-17 13:30:57.222 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:30:57.223 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:30:57.224 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:30:57.224 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:30:57.234 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:30:57.234 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:30:57.234 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:30:57.234 +02:00 [DBG] Client validation success
2019-06-17 13:30:57.235 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ2RPOFMK1:00000004","TimeStamp":"2019-06-17T11:30:57.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:30:57.235 +02:00 [DBG] Start token request validation
2019-06-17 13:30:57.235 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:30:57.238 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:30:57.242 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:30:57.242 +02:00 [ERR] Requested scope not allowed: role
2019-06-17 13:30:57.242 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:30:57.242 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ2RPOFMK1:00000004","TimeStamp":"2019-06-17T11:30:57.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:35:24.830 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:35:24.831 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:35:24.831 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:35:24.831 +02:00 [DBG] Start token request.
2019-06-17 13:35:24.831 +02:00 [DBG] Start client validation
2019-06-17 13:35:24.831 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:35:24.831 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:35:24.831 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:35:24.831 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:35:24.837 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:35:24.838 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:35:24.838 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:35:24.838 +02:00 [DBG] Client validation success
2019-06-17 13:35:24.838 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ2RPOFMK3:00000001","TimeStamp":"2019-06-17T11:35:24.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:35:24.838 +02:00 [DBG] Start token request validation
2019-06-17 13:35:24.838 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:35:24.848 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:35:24.906 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:35:24.912 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:35:24.915 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:35:25.838 +02:00 [INF] Credentials validated for username: alice
2019-06-17 13:35:25.839 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ2RPOFMK3:00000001","TimeStamp":"2019-06-17T11:35:25.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:35:25.847 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ2RPOFMK3:00000001","TimeStamp":"2019-06-17T11:35:25.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:35:25.847 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 13:35:25.849 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:35:25.868 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 13:35:25.869 +02:00 [DBG] Getting claims for access token for subject: 527f7d0c-6630-42c5-b3bd-18d65779b528
2019-06-17 13:35:26.096 +02:00 [DBG] 7DbJwQRIjsOROh+sV3HvEFTXNGTZ0zr8KwkmZ5YRKVo= not found in database
2019-06-17 13:35:26.267 +02:00 [DBG] Creating refresh token
2019-06-17 13:35:26.267 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 13:35:26.271 +02:00 [DBG] 0JkIT+21s0xa16X6alXzAts3ZSRj02GRC+JazHbX608= not found in database
2019-06-17 13:35:26.304 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****879a","$type":"Token"},{"TokenType":"access_token","TokenValue":"****cb30","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ2RPOFMK3:00000001","TimeStamp":"2019-06-17T11:35:26.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 13:35:26.306 +02:00 [DBG] Token request success.
2019-06-17 13:35:41.813 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 13:35:41.815 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 13:35:41.815 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 13:35:41.823 +02:00 [DBG] Start userinfo request
2019-06-17 13:35:41.827 +02:00 [DBG] Bearer token found in header
2019-06-17 13:35:41.856 +02:00 [DBG] 7DbJwQRIjsOROh+sV3HvEFTXNGTZ0zr8KwkmZ5YRKVo= found in database: true
2019-06-17 13:35:41.916 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:35:41.916 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:35:41.923 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:35:41.923 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:35:41.935 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 13:35:41.936 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"270ec95db8a6342862d689e639533b96cc63ed82ba2d577e511242e9fc61cb30","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560771326,"exp":1560774926,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"527f7d0c-6630-42c5-b3bd-18d65779b528","auth_time":1560771325,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 13:35:41.945 +02:00 [DBG] Creating userinfo response
2019-06-17 13:35:41.949 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 13:35:41.951 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 13:35:41.959 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:35:41.959 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-17 13:35:41.959 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 13:35:41.961 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:35:41.966 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-17 13:35:41.967 +02:00 [DBG] End userinfo request
2019-06-17 13:36:01.279 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 13:36:01.280 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 13:36:01.280 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 13:36:01.283 +02:00 [DBG] Start discovery request
2019-06-17 13:36:01.366 +02:00 [DBG] Found ["openid","profile","api1","api1.full_access","api1.read_only"] as all scopes in database
2019-06-17 13:36:01.438 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 13:36:01.439 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 13:36:01.439 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 13:36:01.442 +02:00 [DBG] Start key discovery request
2019-06-17 13:36:01.544 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 13:36:01.546 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 13:36:01.546 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 13:36:01.553 +02:00 [DBG] Starting introspection request.
2019-06-17 13:36:01.561 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:36:01.561 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:36:01.561 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:36:01.561 +02:00 [DBG] Secret id found: api1
2019-06-17 13:36:01.625 +02:00 [DBG] Found api1 API resource in database
2019-06-17 13:36:01.626 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:36:01.626 +02:00 [DBG] API resource validation success
2019-06-17 13:36:01.626 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ2RPOFMK3:00000005","TimeStamp":"2019-06-17T11:36:01.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 13:36:01.629 +02:00 [DBG] Introspection request validation started.
2019-06-17 13:36:01.631 +02:00 [DBG] 7DbJwQRIjsOROh+sV3HvEFTXNGTZ0zr8KwkmZ5YRKVo= found in database: true
2019-06-17 13:36:01.635 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:36:01.635 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:36:01.638 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:36:01.638 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:36:01.641 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 13:36:01.642 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"270ec95db8a6342862d689e639533b96cc63ed82ba2d577e511242e9fc61cb30","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560771326,"exp":1560774926,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"527f7d0c-6630-42c5-b3bd-18d65779b528","auth_time":1560771325,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 13:36:01.645 +02:00 [DBG] Introspection request validation successful.
2019-06-17 13:36:01.656 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 13:36:01.659 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****cb30","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ2RPOFMK3:00000005","TimeStamp":"2019-06-17T11:36:01.0000000Z","ProcessId":28052,"LocalIpAddress":"127.0.0.1:40966","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 13:36:01.659 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 13:43:36.782 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 13:43:36.827 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 13:43:36.827 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 13:43:36.827 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 13:43:36.827 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 13:43:36.827 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 13:43:36.827 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 13:43:36.964 +02:00 [DBG] Starting grant removal
2019-06-17 13:43:37.259 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 13:43:37.261 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 13:43:37.261 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 13:43:37.261 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 13:43:37.261 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 13:43:37.261 +02:00 [DBG] Error Url: /home/error
2019-06-17 13:43:37.261 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 13:43:44.918 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:43:44.933 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:43:44.934 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:43:44.942 +02:00 [DBG] Start token request.
2019-06-17 13:43:44.948 +02:00 [DBG] Start client validation
2019-06-17 13:43:44.954 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:43:44.957 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:43:44.975 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:43:44.975 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:43:45.656 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:43:45.666 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:43:45.674 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:43:45.674 +02:00 [DBG] Client validation success
2019-06-17 13:43:45.691 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000002","TimeStamp":"2019-06-17T11:43:45.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:43:45.702 +02:00 [DBG] Start token request validation
2019-06-17 13:43:45.711 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:43:45.768 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:43:46.003 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:43:46.016 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:43:46.019 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:43:46.065 +02:00 [INF] Credentials validated for username: alice
2019-06-17 13:43:46.066 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000002","TimeStamp":"2019-06-17T11:43:46.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:43:46.074 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000002","TimeStamp":"2019-06-17T11:43:46.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:43:46.074 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 13:43:46.082 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:43:46.108 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 13:43:46.108 +02:00 [DBG] Getting claims for access token for subject: 527f7d0c-6630-42c5-b3bd-18d65779b528
2019-06-17 13:43:46.227 +02:00 [DBG] dshfXj8mmMefdJWqm4av8uMSjc8yXviHuLgVBoLsEq4= not found in database
2019-06-17 13:43:46.271 +02:00 [DBG] Creating refresh token
2019-06-17 13:43:46.271 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 13:43:46.275 +02:00 [DBG] jTC/kYJqqSQWb9NTKg16HMP/TyrpIWGw7JD6s6LgkXQ= not found in database
2019-06-17 13:43:46.296 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****9b02","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fd43","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000002","TimeStamp":"2019-06-17T11:43:46.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 13:43:46.298 +02:00 [DBG] Token request success.
2019-06-17 13:44:06.704 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:44:06.705 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:44:06.705 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:44:06.705 +02:00 [DBG] Start token request.
2019-06-17 13:44:06.705 +02:00 [DBG] Start client validation
2019-06-17 13:44:06.705 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:44:06.705 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:44:06.707 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:44:06.707 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:44:06.713 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:44:06.713 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:44:06.713 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:44:06.713 +02:00 [DBG] Client validation success
2019-06-17 13:44:06.714 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000002","TimeStamp":"2019-06-17T11:44:06.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:44:06.714 +02:00 [DBG] Start token request validation
2019-06-17 13:44:06.714 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:44:06.726 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:06.816 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:44:06.816 +02:00 [ERR] Requested scope not allowed: role
2019-06-17 13:44:06.816 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:44:06.819 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000002","TimeStamp":"2019-06-17T11:44:06.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:44:09.179 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:44:09.180 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:44:09.180 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:44:09.180 +02:00 [DBG] Start token request.
2019-06-17 13:44:09.180 +02:00 [DBG] Start client validation
2019-06-17 13:44:09.180 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:44:09.180 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:44:09.180 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:44:09.180 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:44:09.185 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:44:09.185 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:44:09.185 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:44:09.185 +02:00 [DBG] Client validation success
2019-06-17 13:44:09.185 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000003","TimeStamp":"2019-06-17T11:44:09.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:44:09.185 +02:00 [DBG] Start token request validation
2019-06-17 13:44:09.185 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:44:09.188 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:09.192 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:44:09.194 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:09.197 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:44:09.209 +02:00 [INF] Credentials validated for username: alice
2019-06-17 13:44:09.209 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000003","TimeStamp":"2019-06-17T11:44:09.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:44:09.209 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000003","TimeStamp":"2019-06-17T11:44:09.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:44:09.209 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 13:44:09.209 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:44:09.209 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 13:44:09.209 +02:00 [DBG] Getting claims for access token for subject: 527f7d0c-6630-42c5-b3bd-18d65779b528
2019-06-17 13:44:09.217 +02:00 [DBG] XqQvsSZL/ou/361ocSt+FLJS5zHtXrwBMv5JWyqWZoA= not found in database
2019-06-17 13:44:09.220 +02:00 [DBG] Creating refresh token
2019-06-17 13:44:09.221 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 13:44:09.221 +02:00 [DBG] Y+Rck6UclToIL8nGq6hWGeXivYWZ1VE7UyZo9bP2+VM= not found in database
2019-06-17 13:44:09.254 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****8505","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7b93","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000003","TimeStamp":"2019-06-17T11:44:09.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 13:44:09.254 +02:00 [DBG] Token request success.
2019-06-17 13:44:39.181 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:44:39.181 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:44:39.181 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:44:39.181 +02:00 [DBG] Start token request.
2019-06-17 13:44:39.182 +02:00 [DBG] Start client validation
2019-06-17 13:44:39.182 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:44:39.182 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:44:39.182 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:44:39.182 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:44:39.186 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:44:39.186 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:44:39.186 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:44:39.186 +02:00 [DBG] Client validation success
2019-06-17 13:44:39.186 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000003","TimeStamp":"2019-06-17T11:44:39.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:44:39.187 +02:00 [DBG] Start token request validation
2019-06-17 13:44:39.187 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:44:39.194 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:39.199 +02:00 [DBG] Found [] API scopes in database
2019-06-17 13:44:39.199 +02:00 [ERR] Requested scope not allowed: api.read
2019-06-17 13:44:39.199 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api.read","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:44:39.199 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000003","TimeStamp":"2019-06-17T11:44:39.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:44:45.690 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:44:45.690 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:44:45.690 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:44:45.690 +02:00 [DBG] Start token request.
2019-06-17 13:44:45.690 +02:00 [DBG] Start client validation
2019-06-17 13:44:45.690 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:44:45.690 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:44:45.691 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:44:45.691 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:44:45.694 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:44:45.694 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:44:45.694 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:44:45.694 +02:00 [DBG] Client validation success
2019-06-17 13:44:45.695 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000004","TimeStamp":"2019-06-17T11:44:45.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:44:45.695 +02:00 [DBG] Start token request validation
2019-06-17 13:44:45.695 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:44:45.703 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:45.706 +02:00 [DBG] Found [] API scopes in database
2019-06-17 13:44:45.707 +02:00 [ERR] Requested scope not allowed: api1.read
2019-06-17 13:44:45.707 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1.read","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:44:45.707 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000004","TimeStamp":"2019-06-17T11:44:45.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:44:49.357 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:44:49.358 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:44:49.358 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:44:49.358 +02:00 [DBG] Start token request.
2019-06-17 13:44:49.358 +02:00 [DBG] Start client validation
2019-06-17 13:44:49.358 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:44:49.358 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:44:49.358 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:44:49.358 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:44:49.362 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:44:49.362 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:44:49.362 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:44:49.362 +02:00 [DBG] Client validation success
2019-06-17 13:44:49.362 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000004","TimeStamp":"2019-06-17T11:44:49.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:44:49.362 +02:00 [DBG] Start token request validation
2019-06-17 13:44:49.362 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:44:49.369 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:49.376 +02:00 [DBG] Found [] API scopes in database
2019-06-17 13:44:49.376 +02:00 [ERR] Requested scope not allowed: api
2019-06-17 13:44:49.376 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:44:49.376 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000004","TimeStamp":"2019-06-17T11:44:49.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:44:52.539 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:44:52.539 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:44:52.539 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:44:52.539 +02:00 [DBG] Start token request.
2019-06-17 13:44:52.539 +02:00 [DBG] Start client validation
2019-06-17 13:44:52.539 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:44:52.539 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:44:52.539 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:44:52.539 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:44:52.543 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:44:52.543 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:44:52.544 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:44:52.544 +02:00 [DBG] Client validation success
2019-06-17 13:44:52.544 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000005","TimeStamp":"2019-06-17T11:44:52.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:44:52.544 +02:00 [DBG] Start token request validation
2019-06-17 13:44:52.544 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:44:52.546 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:52.549 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:44:52.551 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:44:52.555 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:44:52.565 +02:00 [INF] Credentials validated for username: alice
2019-06-17 13:44:52.565 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000005","TimeStamp":"2019-06-17T11:44:52.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:44:52.565 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000005","TimeStamp":"2019-06-17T11:44:52.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:44:52.565 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 13:44:52.565 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:44:52.565 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 13:44:52.565 +02:00 [DBG] Getting claims for access token for subject: 527f7d0c-6630-42c5-b3bd-18d65779b528
2019-06-17 13:44:52.570 +02:00 [DBG] tk7wjlaaLmBuJ5FFQdGHjYau+pV/6/sm/WopyDaKixQ= not found in database
2019-06-17 13:44:52.579 +02:00 [DBG] Creating refresh token
2019-06-17 13:44:52.579 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 13:44:52.581 +02:00 [DBG] XxxKeFUZGIkP0u3sDDicUqCyi0xEAUSWJhZ2AjMnOg4= not found in database
2019-06-17 13:44:52.584 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****f133","$type":"Token"},{"TokenType":"access_token","TokenValue":"****c446","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000005","TimeStamp":"2019-06-17T11:44:52.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 13:44:52.584 +02:00 [DBG] Token request success.
2019-06-17 13:45:11.697 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:45:11.697 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:45:11.697 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:45:11.697 +02:00 [DBG] Start token request.
2019-06-17 13:45:11.697 +02:00 [DBG] Start client validation
2019-06-17 13:45:11.697 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:45:11.697 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:45:11.699 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:45:11.699 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:45:11.703 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:45:11.703 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:45:11.703 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:45:11.703 +02:00 [DBG] Client validation success
2019-06-17 13:45:11.703 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000005","TimeStamp":"2019-06-17T11:45:11.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:45:11.703 +02:00 [DBG] Start token request validation
2019-06-17 13:45:11.703 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:45:11.712 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:45:11.794 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:45:11.794 +02:00 [ERR] Requested scope not allowed: api1.write
2019-06-17 13:45:11.794 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 api1.write","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:45:11.794 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ344GR8VN:00000005","TimeStamp":"2019-06-17T11:45:11.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 13:45:15.554 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:45:15.554 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:45:15.554 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:45:15.554 +02:00 [DBG] Start token request.
2019-06-17 13:45:15.554 +02:00 [DBG] Start client validation
2019-06-17 13:45:15.554 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:45:15.554 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:45:15.555 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:45:15.555 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:45:15.559 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:45:15.559 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:45:15.559 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:45:15.559 +02:00 [DBG] Client validation success
2019-06-17 13:45:15.559 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000006","TimeStamp":"2019-06-17T11:45:15.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:45:15.559 +02:00 [DBG] Start token request validation
2019-06-17 13:45:15.559 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:45:15.561 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:45:15.563 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:45:15.565 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:45:15.568 +02:00 [DBG] Found ["api1","api1.full_access","api1.read_only"] API scopes in database
2019-06-17 13:45:15.579 +02:00 [INF] Credentials validated for username: alice
2019-06-17 13:45:15.579 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000006","TimeStamp":"2019-06-17T11:45:15.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:45:15.579 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000006","TimeStamp":"2019-06-17T11:45:15.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:45:15.579 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 13:45:15.579 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:45:15.579 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 13:45:15.579 +02:00 [DBG] Getting claims for access token for subject: 527f7d0c-6630-42c5-b3bd-18d65779b528
2019-06-17 13:45:15.584 +02:00 [DBG] bhTfIjQsZAZdMFUcsatKMqwmb2uWqWUCGTicEZ1Av0c= not found in database
2019-06-17 13:45:15.599 +02:00 [DBG] Creating refresh token
2019-06-17 13:45:15.599 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 13:45:15.600 +02:00 [DBG] Yu7mrC+qYmifR/OWzx7fPamZYRxWeT4yN+76L+YnGkU= not found in database
2019-06-17 13:45:15.602 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"527f7d0c-6630-42c5-b3bd-18d65779b528","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****f619","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2ca9","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ344GR8VO:00000006","TimeStamp":"2019-06-17T11:45:15.0000000Z","ProcessId":28028,"LocalIpAddress":"127.0.0.1:20743","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 13:45:15.602 +02:00 [DBG] Token request success.
2019-06-17 13:45:21.504 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 13:45:21.506 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 13:45:21.506 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 13:45:21.513 +02:00 [DBG] Start userinfo request
2019-06-17 13:45:21.517 +02:00 [DBG] Bearer token found in header
2019-06-17 13:45:21.546 +02:00 [DBG] bhTfIjQsZAZdMFUcsatKMqwmb2uWqWUCGTicEZ1Av0c= found in database: true
2019-06-17 13:45:21.555 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:45:21.555 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:45:21.562 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:45:21.562 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:45:21.574 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 13:45:21.576 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"c1e06f4bba7c60af9356b6747e62cdd38f26e0a8d57e6902da503fa5744d2ca9","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560771915,"exp":1560775515,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"527f7d0c-6630-42c5-b3bd-18d65779b528","auth_time":1560771915,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 13:45:21.586 +02:00 [DBG] Creating userinfo response
2019-06-17 13:45:21.589 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 13:45:21.592 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 13:45:21.600 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:45:21.600 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-17 13:45:21.600 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 13:45:21.602 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:45:21.608 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-17 13:45:21.608 +02:00 [DBG] End userinfo request
2019-06-17 13:53:58.109 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 13:53:58.151 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 13:53:58.151 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 13:53:58.151 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 13:53:58.151 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 13:53:58.151 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 13:53:58.151 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 13:53:58.262 +02:00 [DBG] Starting grant removal
2019-06-17 13:53:58.520 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 13:53:58.522 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 13:53:58.522 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 13:53:58.522 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 13:53:58.522 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 13:53:58.522 +02:00 [DBG] Error Url: /home/error
2019-06-17 13:53:58.522 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 13:54:10.012 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 13:54:10.134 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 13:54:10.135 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 13:54:10.140 +02:00 [DBG] Start userinfo request
2019-06-17 13:54:10.143 +02:00 [DBG] Bearer token found in header
2019-06-17 13:54:10.170 +02:00 [DBG] bhTfIjQsZAZdMFUcsatKMqwmb2uWqWUCGTicEZ1Av0c= found in database: false
2019-06-17 13:54:10.175 +02:00 [DBG] reference_token grant with value: c1e06f4bba7c60af9356b6747e62cdd38f26e0a8d57e6902da503fa5744d2ca9 not found in store.
2019-06-17 13:54:10.181 +02:00 [ERR] Invalid reference token.
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"c1e06f4bba7c60af9356b6747e62cdd38f26e0a8d57e6902da503fa5744d2ca9","JwtId":null,"Claims":null,"$type":"TokenValidationLog"}
2019-06-17 13:54:13.424 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 13:54:13.429 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 13:54:13.429 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 13:54:13.437 +02:00 [DBG] Start token request.
2019-06-17 13:54:13.443 +02:00 [DBG] Start client validation
2019-06-17 13:54:13.449 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:54:13.453 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:54:13.471 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:54:13.471 +02:00 [DBG] Secret id found: ro.client
2019-06-17 13:54:13.678 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:54:13.687 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:54:13.700 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:54:13.700 +02:00 [DBG] Client validation success
2019-06-17 13:54:13.721 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ39TLLG0I:00000002","TimeStamp":"2019-06-17T11:54:13.0000000Z","ProcessId":10784,"LocalIpAddress":"127.0.0.1:40994","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 13:54:13.730 +02:00 [DBG] Start token request validation
2019-06-17 13:54:13.743 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 13:54:13.828 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:54:13.989 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 13:54:14.002 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 13:54:14.005 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 13:54:14.041 +02:00 [INF] Credentials validated for username: alice
2019-06-17 13:54:14.042 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"17244ac7-df9c-46e8-b945-85773cbd4214","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ39TLLG0I:00000002","TimeStamp":"2019-06-17T11:54:14.0000000Z","ProcessId":10784,"LocalIpAddress":"127.0.0.1:40994","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:54:14.052 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"17244ac7-df9c-46e8-b945-85773cbd4214","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ39TLLG0I:00000002","TimeStamp":"2019-06-17T11:54:14.0000000Z","ProcessId":10784,"LocalIpAddress":"127.0.0.1:40994","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 13:54:14.052 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 13:54:14.062 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 13:54:14.087 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 13:54:14.087 +02:00 [DBG] Getting claims for access token for subject: 17244ac7-df9c-46e8-b945-85773cbd4214
2019-06-17 13:54:14.183 +02:00 [DBG] kC9dAaBjB2AzOjjO7KMZ6l/x1JX+3/4CMBMjiw3F4MQ= not found in database
2019-06-17 13:54:14.202 +02:00 [DBG] Creating refresh token
2019-06-17 13:54:14.202 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 13:54:14.206 +02:00 [DBG] vZP9MmtYQBiKvKuLde8C6UTLoVBxF9kC7Y1QEoO7qrM= not found in database
2019-06-17 13:54:14.212 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"17244ac7-df9c-46e8-b945-85773cbd4214","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****24d7","$type":"Token"},{"TokenType":"access_token","TokenValue":"****567e","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ39TLLG0I:00000002","TimeStamp":"2019-06-17T11:54:14.0000000Z","ProcessId":10784,"LocalIpAddress":"127.0.0.1:40994","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 13:54:14.213 +02:00 [DBG] Token request success.
2019-06-17 13:54:19.355 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 13:54:19.356 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 13:54:19.356 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 13:54:19.360 +02:00 [DBG] Start discovery request
2019-06-17 13:54:19.424 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 13:54:19.462 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 13:54:19.462 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 13:54:19.462 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 13:54:19.466 +02:00 [DBG] Start key discovery request
2019-06-17 13:54:19.562 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 13:54:19.563 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 13:54:19.563 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 13:54:19.570 +02:00 [DBG] Starting introspection request.
2019-06-17 13:54:19.576 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:54:19.576 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:54:19.577 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:54:19.577 +02:00 [DBG] Secret id found: api1
2019-06-17 13:54:19.617 +02:00 [DBG] Found api1 API resource in database
2019-06-17 13:54:19.617 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:54:19.617 +02:00 [DBG] API resource validation success
2019-06-17 13:54:19.618 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ39TLLG0J:00000004","TimeStamp":"2019-06-17T11:54:19.0000000Z","ProcessId":10784,"LocalIpAddress":"127.0.0.1:40994","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 13:54:19.621 +02:00 [DBG] Introspection request validation started.
2019-06-17 13:54:19.627 +02:00 [DBG] kC9dAaBjB2AzOjjO7KMZ6l/x1JX+3/4CMBMjiw3F4MQ= found in database: true
2019-06-17 13:54:19.636 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:54:19.636 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:54:19.643 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:54:19.644 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:54:19.657 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 13:54:19.657 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"029bea13661f752a5ab325f211276f794ef2e188574368064a47c11dfe54567e","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560772454,"exp":1560776054,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"17244ac7-df9c-46e8-b945-85773cbd4214","auth_time":1560772454,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 13:54:19.659 +02:00 [DBG] Introspection request validation successful.
2019-06-17 13:54:19.667 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 13:54:19.670 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****567e","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ39TLLG0J:00000004","TimeStamp":"2019-06-17T11:54:19.0000000Z","ProcessId":10784,"LocalIpAddress":"127.0.0.1:40994","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 13:54:19.670 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 13:54:47.961 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 13:54:48.105 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 13:54:48.105 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 13:54:48.105 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 13:54:48.105 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 13:54:48.106 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 13:54:48.106 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 13:54:48.284 +02:00 [DBG] Starting grant removal
2019-06-17 13:54:48.550 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 13:54:48.553 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 13:54:48.553 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 13:54:48.553 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 13:54:48.553 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 13:54:48.553 +02:00 [DBG] Error Url: /home/error
2019-06-17 13:54:48.553 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 13:54:54.583 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 13:54:54.596 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 13:54:54.596 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 13:54:54.600 +02:00 [DBG] Start discovery request
2019-06-17 13:54:55.760 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 13:54:55.809 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 13:54:55.810 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 13:54:55.811 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 13:54:55.813 +02:00 [DBG] Start key discovery request
2019-06-17 13:54:55.924 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 13:54:55.926 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 13:54:55.926 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 13:54:55.933 +02:00 [DBG] Starting introspection request.
2019-06-17 13:54:55.941 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 13:54:55.944 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 13:54:55.957 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 13:54:55.957 +02:00 [DBG] Secret id found: api1
2019-06-17 13:54:56.008 +02:00 [DBG] Found api1 API resource in database
2019-06-17 13:54:56.014 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 13:54:56.014 +02:00 [DBG] API resource validation success
2019-06-17 13:54:56.033 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ3ACIFUH4:00000003","TimeStamp":"2019-06-17T11:54:56.0000000Z","ProcessId":9720,"LocalIpAddress":"127.0.0.1:38896","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 13:54:56.039 +02:00 [DBG] Introspection request validation started.
2019-06-17 13:54:56.085 +02:00 [DBG] kC9dAaBjB2AzOjjO7KMZ6l/x1JX+3/4CMBMjiw3F4MQ= found in database: true
2019-06-17 13:54:56.334 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:54:56.340 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:54:56.348 +02:00 [DBG] ro.client found in database: true
2019-06-17 13:54:56.348 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 13:54:56.455 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 13:54:56.460 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"029bea13661f752a5ab325f211276f794ef2e188574368064a47c11dfe54567e","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560772454,"exp":1560776054,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"17244ac7-df9c-46e8-b945-85773cbd4214","auth_time":1560772454,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 13:54:56.463 +02:00 [DBG] Introspection request validation successful.
2019-06-17 13:54:56.472 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 13:54:56.475 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****567e","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ3ACIFUH4:00000003","TimeStamp":"2019-06-17T11:54:56.0000000Z","ProcessId":9720,"LocalIpAddress":"127.0.0.1:38896","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 13:54:56.476 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 14:49:47.909 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 14:49:47.947 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 14:49:47.947 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 14:49:47.947 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 14:49:47.947 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 14:49:47.947 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 14:49:47.947 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 14:49:48.066 +02:00 [DBG] Starting grant removal
2019-06-17 14:49:48.383 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 14:49:48.386 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 14:49:48.386 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 14:49:48.386 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 14:49:48.386 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 14:49:48.386 +02:00 [DBG] Error Url: /home/error
2019-06-17 14:49:48.386 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 14:49:53.818 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 14:49:53.833 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 14:49:53.833 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 14:49:53.840 +02:00 [DBG] Start token request.
2019-06-17 14:49:53.848 +02:00 [DBG] Start client validation
2019-06-17 14:49:53.854 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 14:49:53.857 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 14:49:53.870 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 14:49:53.870 +02:00 [DBG] Secret id found: ro.client
2019-06-17 14:49:54.116 +02:00 [DBG] ro.client found in database: true
2019-06-17 14:49:54.125 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 14:49:54.132 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 14:49:54.132 +02:00 [DBG] Client validation success
2019-06-17 14:49:54.150 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ4940HLV7:00000002","TimeStamp":"2019-06-17T12:49:54.0000000Z","ProcessId":32384,"LocalIpAddress":"127.0.0.1:1352","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 14:49:54.160 +02:00 [DBG] Start token request validation
2019-06-17 14:49:54.170 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 14:49:54.295 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 14:49:54.446 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 14:49:54.457 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 14:49:54.461 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 14:49:54.495 +02:00 [INF] Credentials validated for username: alice
2019-06-17 14:49:54.496 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4940HLV7:00000002","TimeStamp":"2019-06-17T12:49:54.0000000Z","ProcessId":32384,"LocalIpAddress":"127.0.0.1:1352","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 14:49:54.502 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4940HLV7:00000002","TimeStamp":"2019-06-17T12:49:54.0000000Z","ProcessId":32384,"LocalIpAddress":"127.0.0.1:1352","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 14:49:54.502 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 14:49:54.509 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 14:49:54.528 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 14:49:54.528 +02:00 [DBG] Getting claims for access token for subject: 204f1136-d999-4ebd-8bac-bb8d0479b924
2019-06-17 14:49:54.631 +02:00 [DBG] aWr93Qnw+NaEnISM75xocWvb+7CNCQxwNtvIRIHER4k= not found in database
2019-06-17 14:49:54.648 +02:00 [DBG] Creating refresh token
2019-06-17 14:49:54.648 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 14:49:54.652 +02:00 [DBG] e4sTv/KEnyTIjkv5BFnG5TwZO2oOwfjBT9LIKojSeVY= not found in database
2019-06-17 14:49:54.658 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****17d1","$type":"Token"},{"TokenType":"access_token","TokenValue":"****fc69","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ4940HLV7:00000002","TimeStamp":"2019-06-17T12:49:54.0000000Z","ProcessId":32384,"LocalIpAddress":"127.0.0.1:1352","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 14:49:54.659 +02:00 [DBG] Token request success.
2019-06-17 14:49:59.387 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 14:49:59.389 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 14:49:59.389 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 14:49:59.393 +02:00 [DBG] Start discovery request
2019-06-17 14:49:59.461 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 14:49:59.490 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 14:49:59.491 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 14:49:59.491 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 14:49:59.494 +02:00 [DBG] Start key discovery request
2019-06-17 14:49:59.589 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 14:49:59.591 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 14:49:59.591 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 14:49:59.597 +02:00 [DBG] Starting introspection request.
2019-06-17 14:49:59.601 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 14:49:59.601 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 14:49:59.601 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 14:49:59.601 +02:00 [DBG] Secret id found: api1
2019-06-17 14:49:59.642 +02:00 [DBG] Found api1 API resource in database
2019-06-17 14:49:59.642 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 14:49:59.642 +02:00 [DBG] API resource validation success
2019-06-17 14:49:59.643 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ4940HLV6:00000003","TimeStamp":"2019-06-17T12:49:59.0000000Z","ProcessId":32384,"LocalIpAddress":"127.0.0.1:1352","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 14:49:59.646 +02:00 [DBG] Introspection request validation started.
2019-06-17 14:49:59.667 +02:00 [DBG] aWr93Qnw+NaEnISM75xocWvb+7CNCQxwNtvIRIHER4k= found in database: true
2019-06-17 14:49:59.675 +02:00 [DBG] ro.client found in database: true
2019-06-17 14:49:59.676 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 14:49:59.683 +02:00 [DBG] ro.client found in database: true
2019-06-17 14:49:59.683 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 14:49:59.695 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 14:49:59.697 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"34770f29ad0bf947081f043f3b5052fbda83ab58e3fc7975268db251dcd5fc69","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560775794,"exp":1560779394,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560775794,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 14:49:59.699 +02:00 [DBG] Introspection request validation successful.
2019-06-17 14:49:59.708 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 14:49:59.710 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****fc69","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ4940HLV6:00000003","TimeStamp":"2019-06-17T12:49:59.0000000Z","ProcessId":32384,"LocalIpAddress":"127.0.0.1:1352","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 14:49:59.710 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 14:56:21.560 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 14:56:21.711 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 14:56:21.711 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 14:56:21.711 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 14:56:21.711 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 14:56:21.711 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 14:56:21.711 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 14:56:21.840 +02:00 [DBG] Starting grant removal
2019-06-17 14:56:22.102 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 14:56:22.104 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 14:56:22.104 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 14:56:22.104 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 14:56:22.104 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 14:56:22.104 +02:00 [DBG] Error Url: /home/error
2019-06-17 14:56:22.104 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 14:56:29.670 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 14:56:29.688 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 14:56:29.688 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 14:56:29.696 +02:00 [DBG] Start token request.
2019-06-17 14:56:29.701 +02:00 [DBG] Start client validation
2019-06-17 14:56:29.705 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 14:56:29.711 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 14:56:29.733 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 14:56:29.733 +02:00 [DBG] Secret id found: ro.client
2019-06-17 14:56:30.853 +02:00 [DBG] ro.client found in database: true
2019-06-17 14:56:30.863 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 14:56:30.871 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 14:56:30.871 +02:00 [DBG] Client validation success
2019-06-17 14:56:30.886 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ4CPB8C7S:00000002","TimeStamp":"2019-06-17T12:56:30.0000000Z","ProcessId":30284,"LocalIpAddress":"127.0.0.1:8457","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 14:56:30.897 +02:00 [DBG] Start token request validation
2019-06-17 14:56:30.906 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 14:56:30.983 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 14:56:31.195 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 14:56:31.206 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 14:56:31.209 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 14:56:31.347 +02:00 [INF] Credentials validated for username: alice
2019-06-17 14:56:31.348 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4CPB8C7S:00000002","TimeStamp":"2019-06-17T12:56:31.0000000Z","ProcessId":30284,"LocalIpAddress":"127.0.0.1:8457","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 14:56:31.356 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4CPB8C7S:00000002","TimeStamp":"2019-06-17T12:56:31.0000000Z","ProcessId":30284,"LocalIpAddress":"127.0.0.1:8457","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 14:56:31.356 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 14:56:31.363 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 14:56:31.382 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 14:56:31.382 +02:00 [DBG] Getting claims for access token for subject: 204f1136-d999-4ebd-8bac-bb8d0479b924
2019-06-17 14:56:31.500 +02:00 [DBG] Q7ytrcks6zctMIJaxA3vcD8NNpTseTJ/p0CRMnbS4nU= not found in database
2019-06-17 14:56:31.542 +02:00 [DBG] Creating refresh token
2019-06-17 14:56:31.542 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 14:56:31.546 +02:00 [DBG] VF3INSHNYpKbs4yxuNqHLJKzMbv6qberwOsNxPh1xJw= not found in database
2019-06-17 14:56:31.567 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3f18","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dac5","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ4CPB8C7S:00000002","TimeStamp":"2019-06-17T12:56:31.0000000Z","ProcessId":30284,"LocalIpAddress":"127.0.0.1:8457","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 14:56:31.568 +02:00 [DBG] Token request success.
2019-06-17 14:56:37.673 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 14:56:37.674 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 14:56:37.674 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 14:56:37.678 +02:00 [DBG] Start discovery request
2019-06-17 14:56:37.746 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 14:56:37.778 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 14:56:37.779 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 14:56:37.780 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 14:56:37.783 +02:00 [DBG] Start key discovery request
2019-06-17 14:56:37.877 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 14:56:37.878 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 14:56:37.878 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 14:56:37.884 +02:00 [DBG] Starting introspection request.
2019-06-17 14:56:37.889 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 14:56:37.889 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 14:56:37.889 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 14:56:37.889 +02:00 [DBG] Secret id found: api1
2019-06-17 14:56:37.926 +02:00 [DBG] Found api1 API resource in database
2019-06-17 14:56:37.926 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 14:56:37.926 +02:00 [DBG] API resource validation success
2019-06-17 14:56:37.927 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ4CPB8C7T:00000003","TimeStamp":"2019-06-17T12:56:37.0000000Z","ProcessId":30284,"LocalIpAddress":"127.0.0.1:8457","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 14:56:37.930 +02:00 [DBG] Introspection request validation started.
2019-06-17 14:56:37.950 +02:00 [DBG] Q7ytrcks6zctMIJaxA3vcD8NNpTseTJ/p0CRMnbS4nU= found in database: true
2019-06-17 14:56:37.958 +02:00 [DBG] ro.client found in database: true
2019-06-17 14:56:37.958 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 14:56:37.964 +02:00 [DBG] ro.client found in database: true
2019-06-17 14:56:37.964 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 14:56:37.975 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 14:56:37.977 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"09c918cb9bf4b421e73ac1c1548cb8da91a6dc1a1c05f1376b6f9eeafc00dac5","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560776191,"exp":1560779791,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560776191,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 14:56:37.978 +02:00 [DBG] Introspection request validation successful.
2019-06-17 14:56:37.986 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 14:56:37.988 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****dac5","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ4CPB8C7T:00000003","TimeStamp":"2019-06-17T12:56:37.0000000Z","ProcessId":30284,"LocalIpAddress":"127.0.0.1:8457","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 14:56:37.988 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:13:24.476 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 15:13:24.597 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 15:13:24.597 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 15:13:24.597 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 15:13:24.597 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 15:13:24.597 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 15:13:24.597 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 15:13:24.724 +02:00 [DBG] Starting grant removal
2019-06-17 15:13:25.081 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 15:13:25.083 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 15:13:25.083 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 15:13:25.083 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 15:13:25.083 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 15:13:25.083 +02:00 [DBG] Error Url: /home/error
2019-06-17 15:13:25.083 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 15:13:30.117 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 15:13:30.128 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 15:13:30.128 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 15:13:30.131 +02:00 [DBG] Start discovery request
2019-06-17 15:13:31.215 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 15:13:31.259 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 15:13:31.263 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 15:13:31.263 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 15:13:31.265 +02:00 [DBG] Start key discovery request
2019-06-17 15:13:31.372 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 15:13:31.374 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 15:13:31.374 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 15:13:31.381 +02:00 [DBG] Starting introspection request.
2019-06-17 15:13:31.391 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:13:31.394 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:13:31.409 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:13:31.409 +02:00 [DBG] Secret id found: api1
2019-06-17 15:13:31.455 +02:00 [DBG] Found api1 API resource in database
2019-06-17 15:13:31.462 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:13:31.462 +02:00 [DBG] API resource validation success
2019-06-17 15:13:31.477 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ4MA74ERE:00000003","TimeStamp":"2019-06-17T13:13:31.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 15:13:31.482 +02:00 [DBG] Introspection request validation started.
2019-06-17 15:13:31.533 +02:00 [DBG] Q7ytrcks6zctMIJaxA3vcD8NNpTseTJ/p0CRMnbS4nU= found in database: true
2019-06-17 15:13:31.777 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:13:31.782 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:13:31.789 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:13:31.789 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:13:31.886 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 15:13:31.890 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"09c918cb9bf4b421e73ac1c1548cb8da91a6dc1a1c05f1376b6f9eeafc00dac5","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560776191,"exp":1560779791,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560776191,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 15:13:31.893 +02:00 [DBG] Introspection request validation successful.
2019-06-17 15:13:31.900 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 15:13:31.904 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****dac5","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ4MA74ERE:00000003","TimeStamp":"2019-06-17T13:13:31.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 15:13:31.904 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:13:46.909 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:13:46.913 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:13:46.913 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:13:46.919 +02:00 [DBG] Start token request.
2019-06-17 15:13:46.924 +02:00 [DBG] Start client validation
2019-06-17 15:13:46.924 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:13:46.924 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:13:46.924 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:13:46.925 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:13:46.930 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:13:46.930 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:13:46.931 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:13:46.931 +02:00 [DBG] Client validation success
2019-06-17 15:13:46.931 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000003","TimeStamp":"2019-06-17T13:13:46.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:13:46.938 +02:00 [DBG] Start token request validation
2019-06-17 15:13:46.947 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:13:46.986 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:13:47.023 +02:00 [DBG] Found [] API scopes in database
2019-06-17 15:13:47.029 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:13:47.031 +02:00 [DBG] Found [] API scopes in database
2019-06-17 15:13:47.088 +02:00 [INF] Credentials validated for username: alice
2019-06-17 15:13:47.090 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000003","TimeStamp":"2019-06-17T13:13:47.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:13:47.093 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000003","TimeStamp":"2019-06-17T13:13:47.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:13:47.093 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 15:13:47.098 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:13:47.124 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 15:13:47.125 +02:00 [DBG] Getting claims for access token for subject: 204f1136-d999-4ebd-8bac-bb8d0479b924
2019-06-17 15:13:47.218 +02:00 [DBG] 1V8soFsVA8SPl82Wijot++v3PbM02vNiic3mcLVirUg= not found in database
2019-06-17 15:13:47.256 +02:00 [DBG] Creating refresh token
2019-06-17 15:13:47.256 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 15:13:47.259 +02:00 [DBG] LwsC7E+sbhtFgf6BLfVy2a8nqKAqHXGTyNLVLk2bP6Y= not found in database
2019-06-17 15:13:47.267 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","Scopes":"openid profile offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****4e02","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b006","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000003","TimeStamp":"2019-06-17T13:13:47.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 15:13:47.267 +02:00 [DBG] Token request success.
2019-06-17 15:13:53.025 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 15:13:53.026 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 15:13:53.026 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 15:13:53.026 +02:00 [DBG] Starting introspection request.
2019-06-17 15:13:53.026 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:13:53.026 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:13:53.026 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:13:53.026 +02:00 [DBG] Secret id found: api1
2019-06-17 15:13:53.029 +02:00 [DBG] Found api1 API resource in database
2019-06-17 15:13:53.029 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:13:53.029 +02:00 [DBG] API resource validation success
2019-06-17 15:13:53.030 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ4MA74ERE:00000004","TimeStamp":"2019-06-17T13:13:53.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 15:13:53.030 +02:00 [DBG] Introspection request validation started.
2019-06-17 15:13:53.031 +02:00 [DBG] 1V8soFsVA8SPl82Wijot++v3PbM02vNiic3mcLVirUg= found in database: true
2019-06-17 15:13:53.035 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:13:53.035 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:13:53.038 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:13:53.038 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:13:53.042 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 15:13:53.042 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"2549b8984c24c48b5f91c970be6a4f6ca804ae2fb21d64e2f4b32e9d04c3b006","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560777227,"exp":1560780827,"aud":"http://localhost:5000/resources","client_id":"ro.client","scope":["openid","profile","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560777227,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 15:13:53.042 +02:00 [DBG] Introspection request validation successful.
2019-06-17 15:13:53.043 +02:00 [ERR] Expected scope ["api1","api1.write","api1.read"] is missing in token
2019-06-17 15:13:53.045 +02:00 [INF] {"ApiName":"api1","Token":"****b006","ApiScopes":["api1","api1.write","api1.read"],"TokenScopes":["openid","profile","offline_access"],"Category":"Token","Name":"Token Introspection Failure","EventType":"Failure","Id":2021,"Message":"Expected scopes are missing","ActivityId":"0HLNJ4MA74ERE:00000004","TimeStamp":"2019-06-17T13:13:53.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"TokenIntrospectionFailureEvent"}
2019-06-17 15:13:53.046 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:14:01.713 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:14:01.713 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:14:01.713 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:14:01.714 +02:00 [DBG] Start token request.
2019-06-17 15:14:01.714 +02:00 [DBG] Start client validation
2019-06-17 15:14:01.714 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:14:01.714 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:14:01.714 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:14:01.714 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:14:01.738 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:14:01.738 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:14:01.738 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:14:01.738 +02:00 [DBG] Client validation success
2019-06-17 15:14:01.738 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000004","TimeStamp":"2019-06-17T13:14:01.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:14:01.738 +02:00 [DBG] Start token request validation
2019-06-17 15:14:01.738 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:14:01.746 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:14:01.829 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:14:01.835 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:14:01.837 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:14:01.848 +02:00 [INF] Credentials validated for username: alice
2019-06-17 15:14:01.848 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000004","TimeStamp":"2019-06-17T13:14:01.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:14:01.848 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000004","TimeStamp":"2019-06-17T13:14:01.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:14:01.848 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 15:14:01.849 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:14:01.849 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 15:14:01.849 +02:00 [DBG] Getting claims for access token for subject: 204f1136-d999-4ebd-8bac-bb8d0479b924
2019-06-17 15:14:01.856 +02:00 [DBG] RPHdDnycb0HQYjW8wLQQFWLsAn6dC0ZN1y5WgIF9CmQ= not found in database
2019-06-17 15:14:01.858 +02:00 [DBG] Creating refresh token
2019-06-17 15:14:01.858 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 15:14:01.859 +02:00 [DBG] fdpIZdDWzPDaIJHQ5drGckZbaavmPKGN0jdTbNJDKco= not found in database
2019-06-17 15:14:01.861 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3b79","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8309","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ4MA74ERD:00000004","TimeStamp":"2019-06-17T13:14:01.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 15:14:01.861 +02:00 [DBG] Token request success.
2019-06-17 15:14:07.750 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 15:14:07.751 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 15:14:07.751 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 15:14:07.751 +02:00 [DBG] Starting introspection request.
2019-06-17 15:14:07.751 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:14:07.751 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:14:07.751 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:14:07.751 +02:00 [DBG] Secret id found: api1
2019-06-17 15:14:07.762 +02:00 [DBG] Found api1 API resource in database
2019-06-17 15:14:07.763 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:14:07.763 +02:00 [DBG] API resource validation success
2019-06-17 15:14:07.763 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ4MA74ERE:00000005","TimeStamp":"2019-06-17T13:14:07.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 15:14:07.763 +02:00 [DBG] Introspection request validation started.
2019-06-17 15:14:07.764 +02:00 [DBG] RPHdDnycb0HQYjW8wLQQFWLsAn6dC0ZN1y5WgIF9CmQ= found in database: true
2019-06-17 15:14:07.767 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:14:07.767 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:14:07.770 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:14:07.770 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:14:07.774 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 15:14:07.774 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"08de1f1e0446be14af6cc085df421d1d4d3a81b94112338deaf7617c84348309","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560777241,"exp":1560780841,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560777241,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 15:14:07.774 +02:00 [DBG] Introspection request validation successful.
2019-06-17 15:14:07.774 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 15:14:07.774 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****8309","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ4MA74ERE:00000005","TimeStamp":"2019-06-17T13:14:07.0000000Z","ProcessId":33528,"LocalIpAddress":"127.0.0.1:47456","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 15:14:07.774 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:43:47.706 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 15:43:47.852 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 15:43:47.852 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 15:43:47.852 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 15:43:47.852 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 15:43:47.852 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 15:43:47.852 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 15:43:48.012 +02:00 [DBG] Starting grant removal
2019-06-17 15:43:48.315 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 15:43:48.316 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 15:43:48.316 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 15:43:48.317 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 15:43:48.317 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 15:43:48.317 +02:00 [DBG] Error Url: /home/error
2019-06-17 15:43:48.317 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 15:43:50.744 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:43:50.758 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:43:50.758 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:43:50.765 +02:00 [DBG] Start token request.
2019-06-17 15:43:50.769 +02:00 [DBG] Start client validation
2019-06-17 15:43:50.775 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:43:50.779 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:43:50.794 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:43:50.794 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:43:51.804 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:43:51.814 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:43:51.822 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:43:51.822 +02:00 [DBG] Client validation success
2019-06-17 15:43:51.837 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ579IRO9P:00000002","TimeStamp":"2019-06-17T13:43:51.0000000Z","ProcessId":14816,"LocalIpAddress":"127.0.0.1:31750","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:43:51.848 +02:00 [DBG] Start token request validation
2019-06-17 15:43:51.861 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:43:51.933 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:43:52.176 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:43:52.189 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:43:52.193 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:43:52.345 +02:00 [INF] Credentials validated for username: alice
2019-06-17 15:43:52.346 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ579IRO9P:00000002","TimeStamp":"2019-06-17T13:43:52.0000000Z","ProcessId":14816,"LocalIpAddress":"127.0.0.1:31750","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:43:52.353 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ579IRO9P:00000002","TimeStamp":"2019-06-17T13:43:52.0000000Z","ProcessId":14816,"LocalIpAddress":"127.0.0.1:31750","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:43:52.353 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 15:43:52.360 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:43:52.380 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 15:43:52.381 +02:00 [DBG] Getting claims for access token for subject: 204f1136-d999-4ebd-8bac-bb8d0479b924
2019-06-17 15:43:52.516 +02:00 [DBG] GDASgM8WA1p4ESW0mklmasdlzvHRaDCaoutz63PL/yc= not found in database
2019-06-17 15:43:52.575 +02:00 [DBG] Creating refresh token
2019-06-17 15:43:52.575 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 15:43:52.580 +02:00 [DBG] /7YoaAQHrwxG4mk/8DvMO1w/xMWOfws9Tect+nBEKl0= not found in database
2019-06-17 15:43:52.587 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"204f1136-d999-4ebd-8bac-bb8d0479b924","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****771a","$type":"Token"},{"TokenType":"access_token","TokenValue":"****0464","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ579IRO9P:00000002","TimeStamp":"2019-06-17T13:43:52.0000000Z","ProcessId":14816,"LocalIpAddress":"127.0.0.1:31750","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 15:43:52.588 +02:00 [DBG] Token request success.
2019-06-17 15:44:05.540 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 15:44:05.541 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 15:44:05.542 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 15:44:05.544 +02:00 [DBG] Start discovery request
2019-06-17 15:44:05.609 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 15:44:05.642 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 15:44:05.642 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 15:44:05.642 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 15:44:05.645 +02:00 [DBG] Start key discovery request
2019-06-17 15:44:05.754 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 15:44:05.756 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 15:44:05.756 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 15:44:05.765 +02:00 [DBG] Starting introspection request.
2019-06-17 15:44:05.770 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:44:05.770 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:44:05.770 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:44:05.770 +02:00 [DBG] Secret id found: api1
2019-06-17 15:44:05.821 +02:00 [DBG] Found api1 API resource in database
2019-06-17 15:44:05.822 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:44:05.822 +02:00 [DBG] API resource validation success
2019-06-17 15:44:05.822 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ579IRO9O:00000003","TimeStamp":"2019-06-17T13:44:05.0000000Z","ProcessId":14816,"LocalIpAddress":"127.0.0.1:31750","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 15:44:05.826 +02:00 [DBG] Introspection request validation started.
2019-06-17 15:44:05.849 +02:00 [DBG] GDASgM8WA1p4ESW0mklmasdlzvHRaDCaoutz63PL/yc= found in database: true
2019-06-17 15:44:05.868 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:44:05.868 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:44:05.875 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:44:05.876 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:44:05.886 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 15:44:05.887 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"0951f3b56e6831b52097647e7843a1f98e8190d1cc647556725f0cd584630464","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560779032,"exp":1560782632,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560779032,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 15:44:05.889 +02:00 [DBG] Introspection request validation successful.
2019-06-17 15:44:05.897 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 15:44:05.899 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****0464","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ579IRO9O:00000003","TimeStamp":"2019-06-17T13:44:05.0000000Z","ProcessId":14816,"LocalIpAddress":"127.0.0.1:31750","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 15:44:05.900 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:45:08.350 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 15:45:08.477 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 15:45:08.477 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 15:45:08.477 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 15:45:08.477 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 15:45:08.477 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 15:45:08.478 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 15:45:08.628 +02:00 [DBG] Starting grant removal
2019-06-17 15:45:08.845 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 15:45:08.847 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 15:45:08.847 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 15:45:08.848 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 15:45:08.848 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 15:45:08.848 +02:00 [DBG] Error Url: /home/error
2019-06-17 15:45:08.848 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 15:45:19.237 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 15:45:19.251 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 15:45:19.251 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 15:45:19.254 +02:00 [DBG] Start discovery request
2019-06-17 15:45:20.243 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 15:45:20.288 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 15:45:20.289 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 15:45:20.289 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 15:45:20.292 +02:00 [DBG] Start key discovery request
2019-06-17 15:45:20.403 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 15:45:20.406 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 15:45:20.406 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 15:45:20.415 +02:00 [DBG] Starting introspection request.
2019-06-17 15:45:20.424 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:45:20.427 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:45:20.441 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:45:20.441 +02:00 [DBG] Secret id found: api1
2019-06-17 15:45:20.506 +02:00 [DBG] Found api1 API resource in database
2019-06-17 15:45:20.513 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:45:20.513 +02:00 [DBG] API resource validation success
2019-06-17 15:45:20.527 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ581IRAH8:00000003","TimeStamp":"2019-06-17T13:45:20.0000000Z","ProcessId":10840,"LocalIpAddress":"127.0.0.1:19370","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 15:45:20.533 +02:00 [DBG] Introspection request validation started.
2019-06-17 15:45:20.571 +02:00 [DBG] GDASgM8WA1p4ESW0mklmasdlzvHRaDCaoutz63PL/yc= found in database: true
2019-06-17 15:45:20.781 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:45:20.787 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:45:20.794 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:45:20.794 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:45:20.890 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 15:45:20.894 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"0951f3b56e6831b52097647e7843a1f98e8190d1cc647556725f0cd584630464","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560779032,"exp":1560782632,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560779032,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 15:45:20.897 +02:00 [DBG] Introspection request validation successful.
2019-06-17 15:45:20.905 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 15:45:20.908 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****0464","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ581IRAH8:00000003","TimeStamp":"2019-06-17T13:45:20.0000000Z","ProcessId":10840,"LocalIpAddress":"127.0.0.1:19370","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 15:45:20.908 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:46:04.089 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 15:46:04.220 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 15:46:04.220 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 15:46:04.220 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 15:46:04.220 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 15:46:04.220 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 15:46:04.220 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 15:46:04.337 +02:00 [DBG] Starting grant removal
2019-06-17 15:46:04.557 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 15:46:04.559 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 15:46:04.559 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 15:46:04.559 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 15:46:04.559 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 15:46:04.559 +02:00 [DBG] Error Url: /home/error
2019-06-17 15:46:04.559 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 15:46:07.599 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 15:46:07.610 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 15:46:07.610 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 15:46:07.613 +02:00 [DBG] Start discovery request
2019-06-17 15:46:08.604 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 15:46:08.657 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 15:46:08.658 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 15:46:08.659 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 15:46:08.661 +02:00 [DBG] Start key discovery request
2019-06-17 15:46:08.776 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 15:46:08.779 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 15:46:08.779 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 15:46:08.786 +02:00 [DBG] Starting introspection request.
2019-06-17 15:46:08.795 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:46:08.798 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:46:08.810 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:46:08.811 +02:00 [DBG] Secret id found: api1
2019-06-17 15:46:08.869 +02:00 [DBG] Found api1 API resource in database
2019-06-17 15:46:08.876 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:46:08.876 +02:00 [DBG] API resource validation success
2019-06-17 15:46:08.893 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ58I63DNI:00000003","TimeStamp":"2019-06-17T13:46:08.0000000Z","ProcessId":11428,"LocalIpAddress":"127.0.0.1:18817","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 15:46:08.900 +02:00 [DBG] Introspection request validation started.
2019-06-17 15:46:08.946 +02:00 [DBG] GDASgM8WA1p4ESW0mklmasdlzvHRaDCaoutz63PL/yc= found in database: true
2019-06-17 15:46:09.216 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:46:09.224 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:46:09.231 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:46:09.231 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:46:09.353 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 15:46:09.359 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"0951f3b56e6831b52097647e7843a1f98e8190d1cc647556725f0cd584630464","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560779032,"exp":1560782632,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"204f1136-d999-4ebd-8bac-bb8d0479b924","auth_time":1560779032,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 15:46:09.362 +02:00 [DBG] Introspection request validation successful.
2019-06-17 15:46:09.369 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 15:46:09.372 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****0464","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ58I63DNI:00000003","TimeStamp":"2019-06-17T13:46:09.0000000Z","ProcessId":11428,"LocalIpAddress":"127.0.0.1:18817","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 15:46:09.373 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:48:40.970 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 15:48:41.007 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 15:48:41.007 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 15:48:41.007 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 15:48:41.007 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 15:48:41.007 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 15:48:41.007 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 15:48:41.101 +02:00 [DBG] Starting grant removal
2019-06-17 15:48:41.469 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 15:48:41.471 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 15:48:41.471 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 15:48:41.471 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 15:48:41.471 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 15:48:41.471 +02:00 [DBG] Error Url: /home/error
2019-06-17 15:48:41.471 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 15:49:00.795 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:49:00.808 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:49:00.808 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:49:00.815 +02:00 [DBG] Start token request.
2019-06-17 15:49:00.819 +02:00 [DBG] Start client validation
2019-06-17 15:49:00.823 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:49:00.826 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:49:00.840 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:49:00.840 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:49:01.092 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:49:01.103 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:49:01.114 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:49:01.114 +02:00 [DBG] Client validation success
2019-06-17 15:49:01.131 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5A0UPMHT:00000002","TimeStamp":"2019-06-17T13:49:01.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:49:01.142 +02:00 [DBG] Start token request validation
2019-06-17 15:49:01.150 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:49:01.198 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:49:01.723 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:49:01.742 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:49:01.802 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:49:01.844 +02:00 [INF] Credentials validated for username: alice
2019-06-17 15:49:01.845 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"5bf1333a-e51a-421a-b3b3-513ef9c7bfdc","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5A0UPMHT:00000002","TimeStamp":"2019-06-17T13:49:01.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:49:01.853 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"5bf1333a-e51a-421a-b3b3-513ef9c7bfdc","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5A0UPMHT:00000002","TimeStamp":"2019-06-17T13:49:01.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 15:49:01.853 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 15:49:01.863 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:49:01.890 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 15:49:01.890 +02:00 [DBG] Getting claims for access token for subject: 5bf1333a-e51a-421a-b3b3-513ef9c7bfdc
2019-06-17 15:49:02.006 +02:00 [DBG] Mfr0i53+eRkgD2TQlveiUTHFC1QsIXk+B46Dqp+R7ek= not found in database
2019-06-17 15:49:02.025 +02:00 [DBG] Creating refresh token
2019-06-17 15:49:02.025 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 15:49:02.029 +02:00 [DBG] lhOjs6u7cAqwZYz4C9X0QzPk8yoAtlvtITh3TCjrUSo= not found in database
2019-06-17 15:49:02.040 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"5bf1333a-e51a-421a-b3b3-513ef9c7bfdc","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****c0f5","$type":"Token"},{"TokenType":"access_token","TokenValue":"****3fc6","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5A0UPMHT:00000002","TimeStamp":"2019-06-17T13:49:02.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 15:49:02.041 +02:00 [DBG] Token request success.
2019-06-17 15:49:06.353 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 15:49:06.354 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 15:49:06.354 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 15:49:06.358 +02:00 [DBG] Start discovery request
2019-06-17 15:49:06.415 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 15:49:06.448 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 15:49:06.449 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 15:49:06.449 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 15:49:06.452 +02:00 [DBG] Start key discovery request
2019-06-17 15:49:06.554 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 15:49:06.556 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 15:49:06.556 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 15:49:06.564 +02:00 [DBG] Starting introspection request.
2019-06-17 15:49:06.570 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:49:06.570 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:49:06.571 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:49:06.571 +02:00 [DBG] Secret id found: api1
2019-06-17 15:49:06.616 +02:00 [DBG] Found api1 API resource in database
2019-06-17 15:49:06.616 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:49:06.616 +02:00 [DBG] API resource validation success
2019-06-17 15:49:06.616 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5A0UPMHU:00000003","TimeStamp":"2019-06-17T13:49:06.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 15:49:06.620 +02:00 [DBG] Introspection request validation started.
2019-06-17 15:49:06.639 +02:00 [DBG] Mfr0i53+eRkgD2TQlveiUTHFC1QsIXk+B46Dqp+R7ek= found in database: true
2019-06-17 15:49:06.659 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:49:06.659 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:49:06.665 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:49:06.665 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:49:06.676 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 15:49:06.678 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"1a71c167a66d52da37bd8e18ebabb41f2767b9f1ad62d3511e42b4d394b23fc6","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560779341,"exp":1560782941,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"5bf1333a-e51a-421a-b3b3-513ef9c7bfdc","auth_time":1560779341,"idp":"local","amr":"pwd","role":"Admin"},"$type":"TokenValidationLog"}
2019-06-17 15:49:06.679 +02:00 [DBG] Introspection request validation successful.
2019-06-17 15:49:06.687 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 15:49:06.689 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****3fc6","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5A0UPMHU:00000003","TimeStamp":"2019-06-17T13:49:06.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 15:49:06.690 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 15:55:46.682 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:55:46.683 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:55:46.683 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:55:46.683 +02:00 [DBG] Start token request.
2019-06-17 15:55:46.683 +02:00 [DBG] Start client validation
2019-06-17 15:55:46.683 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:55:46.683 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:55:46.683 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:55:46.683 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:55:46.727 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:55:46.727 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:55:46.727 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:55:46.727 +02:00 [DBG] Client validation success
2019-06-17 15:55:46.728 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5A0UPMHV:00000001","TimeStamp":"2019-06-17T13:55:46.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:55:46.730 +02:00 [DBG] Start token request validation
2019-06-17 15:55:46.730 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:55:46.736 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:55:46.798 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:55:46.798 +02:00 [ERR] Requested scope not allowed: role
2019-06-17 15:55:46.798 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:55:46.800 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ5A0UPMHV:00000001","TimeStamp":"2019-06-17T13:55:46.0000000Z","ProcessId":14928,"LocalIpAddress":"127.0.0.1:17931","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 15:56:08.967 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 15:56:09.114 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 15:56:09.114 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 15:56:09.114 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 15:56:09.114 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 15:56:09.114 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 15:56:09.114 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 15:56:09.236 +02:00 [DBG] Starting grant removal
2019-06-17 15:56:09.577 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 15:56:09.578 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 15:56:09.578 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 15:56:09.578 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 15:56:09.578 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 15:56:09.578 +02:00 [DBG] Error Url: /home/error
2019-06-17 15:56:09.578 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 15:57:36.730 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:57:36.746 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:57:36.747 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:57:36.753 +02:00 [DBG] Start token request.
2019-06-17 15:57:36.758 +02:00 [DBG] Start client validation
2019-06-17 15:57:36.764 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:57:36.768 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:57:36.780 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:57:36.781 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:57:37.567 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:57:37.575 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:57:37.582 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:57:37.582 +02:00 [DBG] Client validation success
2019-06-17 15:57:37.597 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5E6G0J0C:00000001","TimeStamp":"2019-06-17T13:57:37.0000000Z","ProcessId":31968,"LocalIpAddress":"127.0.0.1:38125","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:57:37.606 +02:00 [DBG] Start token request validation
2019-06-17 15:57:37.615 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:57:37.663 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:57:37.891 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:57:37.898 +02:00 [ERR] Requested scope not allowed: api1.write
2019-06-17 15:57:37.905 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 api1.write","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:57:37.907 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ5E6G0J0C:00000001","TimeStamp":"2019-06-17T13:57:37.0000000Z","ProcessId":31968,"LocalIpAddress":"127.0.0.1:38125","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 15:58:51.042 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 15:58:51.177 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 15:58:51.177 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 15:58:51.177 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 15:58:51.177 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 15:58:51.178 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 15:58:51.178 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 15:58:51.301 +02:00 [DBG] Starting grant removal
2019-06-17 15:58:51.461 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 15:58:51.463 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 15:58:51.463 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 15:58:51.463 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 15:58:51.463 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 15:58:51.463 +02:00 [DBG] Error Url: /home/error
2019-06-17 15:58:51.463 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 15:58:54.189 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:58:54.210 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:58:54.210 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:58:54.216 +02:00 [DBG] Start token request.
2019-06-17 15:58:54.221 +02:00 [DBG] Start client validation
2019-06-17 15:58:54.226 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:58:54.229 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:58:54.241 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:58:54.242 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:58:55.085 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:58:55.096 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:58:55.103 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:58:55.103 +02:00 [DBG] Client validation success
2019-06-17 15:58:55.120 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5FMO102V:00000002","TimeStamp":"2019-06-17T13:58:55.0000000Z","ProcessId":15448,"LocalIpAddress":"127.0.0.1:44598","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:58:55.131 +02:00 [DBG] Start token request validation
2019-06-17 15:58:55.140 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:58:55.190 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:58:55.339 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:58:55.345 +02:00 [ERR] Requested scope not allowed: api1.write
2019-06-17 15:58:55.351 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 api1.write","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:58:55.353 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ5FMO102V:00000002","TimeStamp":"2019-06-17T13:58:55.0000000Z","ProcessId":15448,"LocalIpAddress":"127.0.0.1:44598","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 15:58:59.879 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 15:58:59.886 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 15:58:59.886 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 15:58:59.886 +02:00 [DBG] Start token request.
2019-06-17 15:58:59.886 +02:00 [DBG] Start client validation
2019-06-17 15:58:59.886 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 15:58:59.886 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 15:58:59.887 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 15:58:59.887 +02:00 [DBG] Secret id found: ro.client
2019-06-17 15:58:59.920 +02:00 [DBG] ro.client found in database: true
2019-06-17 15:58:59.920 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 15:58:59.920 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 15:58:59.920 +02:00 [DBG] Client validation success
2019-06-17 15:58:59.920 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5FMO102U:00000002","TimeStamp":"2019-06-17T13:58:59.0000000Z","ProcessId":15448,"LocalIpAddress":"127.0.0.1:44598","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 15:58:59.920 +02:00 [DBG] Start token request validation
2019-06-17 15:58:59.920 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 15:58:59.927 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 15:59:00.004 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 15:59:00.004 +02:00 [ERR] Requested scope not allowed: api1.write
2019-06-17 15:59:00.005 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1.write","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 15:59:00.005 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ5FMO102U:00000002","TimeStamp":"2019-06-17T13:59:00.0000000Z","ProcessId":15448,"LocalIpAddress":"127.0.0.1:44598","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 16:00:40.156 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:00:40.195 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:00:40.195 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:00:40.195 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:00:40.195 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:00:40.195 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:00:40.195 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:00:40.288 +02:00 [DBG] Starting grant removal
2019-06-17 16:00:40.619 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:00:40.620 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:00:40.620 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:00:40.621 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:00:40.621 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:00:40.621 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:00:40.621 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:03:23.546 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:03:23.553 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:03:23.553 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:03:23.560 +02:00 [DBG] Start token request.
2019-06-17 16:03:23.566 +02:00 [DBG] Start client validation
2019-06-17 16:03:23.571 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:03:23.574 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:03:23.588 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:03:23.588 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:03:23.764 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:03:23.773 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:03:23.780 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:03:23.781 +02:00 [DBG] Client validation success
2019-06-17 16:03:23.798 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5GN93KLK:00000001","TimeStamp":"2019-06-17T14:03:23.0000000Z","ProcessId":21816,"LocalIpAddress":"127.0.0.1:32251","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:03:23.808 +02:00 [DBG] Start token request validation
2019-06-17 16:03:23.818 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:03:23.869 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:03:24.049 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:03:24.061 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:03:24.063 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:03:24.095 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:03:24.096 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"c9108633-c827-4e49-9682-fa66b1ed5aff","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5GN93KLK:00000001","TimeStamp":"2019-06-17T14:03:24.0000000Z","ProcessId":21816,"LocalIpAddress":"127.0.0.1:32251","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:03:24.102 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"c9108633-c827-4e49-9682-fa66b1ed5aff","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5GN93KLK:00000001","TimeStamp":"2019-06-17T14:03:24.0000000Z","ProcessId":21816,"LocalIpAddress":"127.0.0.1:32251","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:03:24.102 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:03:24.109 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1.write offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1.write","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:03:24.128 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:03:24.129 +02:00 [DBG] Getting claims for access token for subject: c9108633-c827-4e49-9682-fa66b1ed5aff
2019-06-17 16:03:24.228 +02:00 [DBG] T8IxgbU/xlpOu04yevy/6cWpA/gyxBI6UlXwJdm2Z+A= not found in database
2019-06-17 16:03:24.245 +02:00 [DBG] Creating refresh token
2019-06-17 16:03:24.245 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:03:24.249 +02:00 [DBG] zGye3S65BCvNI0QkMg2JUxiCefjeh7FX/QNsq6VYAoQ= not found in database
2019-06-17 16:03:24.256 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"c9108633-c827-4e49-9682-fa66b1ed5aff","Scopes":"openid profile api1.write offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****f002","$type":"Token"},{"TokenType":"access_token","TokenValue":"****00db","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5GN93KLK:00000001","TimeStamp":"2019-06-17T14:03:24.0000000Z","ProcessId":21816,"LocalIpAddress":"127.0.0.1:32251","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:03:24.257 +02:00 [DBG] Token request success.
2019-06-17 16:03:31.483 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 16:03:31.484 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 16:03:31.484 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 16:03:31.488 +02:00 [DBG] Start discovery request
2019-06-17 16:03:31.558 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 16:03:31.592 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 16:03:31.592 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 16:03:31.592 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 16:03:31.594 +02:00 [DBG] Start key discovery request
2019-06-17 16:03:31.685 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:03:31.687 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:03:31.687 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:03:31.693 +02:00 [DBG] Starting introspection request.
2019-06-17 16:03:31.697 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:03:31.697 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:03:31.698 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:03:31.698 +02:00 [DBG] Secret id found: api1
2019-06-17 16:03:31.738 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:03:31.738 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:03:31.738 +02:00 [DBG] API resource validation success
2019-06-17 16:03:31.738 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5GN93KLK:00000004","TimeStamp":"2019-06-17T14:03:31.0000000Z","ProcessId":21816,"LocalIpAddress":"127.0.0.1:32251","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:03:31.741 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:03:31.762 +02:00 [DBG] T8IxgbU/xlpOu04yevy/6cWpA/gyxBI6UlXwJdm2Z+A= found in database: true
2019-06-17 16:03:31.771 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:03:31.771 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:03:31.777 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:03:31.777 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:03:31.788 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:03:31.789 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"e9a7b20ae1b65d127e4dd018ba7f11993b6410202102dc5c3effc6c408a000db","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560780204,"exp":1560783804,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1.write","offline_access"],"sub":"c9108633-c827-4e49-9682-fa66b1ed5aff","auth_time":1560780204,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:03:31.791 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:03:31.798 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:03:31.800 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****00db","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1.write","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5GN93KLK:00000004","TimeStamp":"2019-06-17T14:03:31.0000000Z","ProcessId":21816,"LocalIpAddress":"127.0.0.1:32251","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:03:31.801 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:08:48.883 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:08:49.103 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:08:49.104 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:08:49.105 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:08:49.105 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:08:49.105 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:08:49.105 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:08:49.224 +02:00 [DBG] Starting grant removal
2019-06-17 16:08:49.559 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:08:49.561 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:08:49.561 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:08:49.561 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:08:49.561 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:08:49.561 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:08:49.561 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:09:27.504 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:09:27.543 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:09:27.543 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:09:27.543 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:09:27.543 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:09:27.543 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:09:27.543 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:09:27.636 +02:00 [DBG] Starting grant removal
2019-06-17 16:09:27.967 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:09:27.969 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:09:27.969 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:09:27.969 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:09:27.969 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:09:27.969 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:09:27.969 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:12:28.881 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:12:28.970 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:12:28.970 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:12:28.970 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:12:28.970 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:12:28.970 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:12:28.970 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:12:29.040 +02:00 [DBG] Starting grant removal
2019-06-17 16:12:29.152 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:12:29.154 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:12:29.154 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:12:29.154 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:12:29.154 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:12:29.154 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:12:29.154 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:13:20.200 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:13:20.328 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:13:20.328 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:13:20.328 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:13:20.328 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:13:20.328 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:13:20.328 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:13:20.456 +02:00 [DBG] Starting grant removal
2019-06-17 16:13:20.722 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:13:20.724 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:13:20.724 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:13:20.724 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:13:20.724 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:13:20.724 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:13:20.724 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:13:26.243 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:13:26.260 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:13:26.260 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:13:26.268 +02:00 [DBG] Start token request.
2019-06-17 16:13:26.276 +02:00 [DBG] Start client validation
2019-06-17 16:13:26.280 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:13:26.284 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:13:26.300 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:13:26.300 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:13:27.359 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:13:27.367 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:13:27.375 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:13:27.375 +02:00 [DBG] Client validation success
2019-06-17 16:13:27.389 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5NPPND4M:00000002","TimeStamp":"2019-06-17T14:13:27.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:13:27.400 +02:00 [DBG] Start token request validation
2019-06-17 16:13:27.409 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:13:27.464 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:13:27.667 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:13:27.674 +02:00 [ERR] Requested scope not allowed: api1.write
2019-06-17 16:13:27.680 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1.write","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:13:27.683 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ5NPPND4M:00000002","TimeStamp":"2019-06-17T14:13:27.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 16:13:29.800 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:13:29.801 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:13:29.801 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:13:29.801 +02:00 [DBG] Start token request.
2019-06-17 16:13:29.801 +02:00 [DBG] Start client validation
2019-06-17 16:13:29.802 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:13:29.802 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:13:29.803 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:13:29.803 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:13:29.817 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:13:29.817 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:13:29.817 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:13:29.817 +02:00 [DBG] Client validation success
2019-06-17 16:13:29.817 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5NPPND4N:00000002","TimeStamp":"2019-06-17T14:13:29.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:13:29.817 +02:00 [DBG] Start token request validation
2019-06-17 16:13:29.817 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:13:29.826 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:13:29.911 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:13:29.920 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:13:29.923 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:13:30.082 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:13:30.083 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"8d5f4c53-7ee7-4b72-8a4f-fb82569689d5","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5NPPND4N:00000002","TimeStamp":"2019-06-17T14:13:30.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:13:30.090 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"8d5f4c53-7ee7-4b72-8a4f-fb82569689d5","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5NPPND4N:00000002","TimeStamp":"2019-06-17T14:13:30.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:13:30.090 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:13:30.092 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:13:30.112 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:13:30.112 +02:00 [DBG] Getting claims for access token for subject: 8d5f4c53-7ee7-4b72-8a4f-fb82569689d5
2019-06-17 16:13:30.238 +02:00 [DBG] wa2fck+QFeKAdEJFRwns1k+f+uLszqxPjgt9my0+/WQ= not found in database
2019-06-17 16:13:30.279 +02:00 [DBG] Creating refresh token
2019-06-17 16:13:30.279 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:13:30.283 +02:00 [DBG] PwEmfVi4iixoZ/Epz5GE/6nBtJ5cucujLrZyL0Q3n+Q= not found in database
2019-06-17 16:13:30.290 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"8d5f4c53-7ee7-4b72-8a4f-fb82569689d5","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3fb9","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bcf8","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5NPPND4N:00000002","TimeStamp":"2019-06-17T14:13:30.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:13:30.290 +02:00 [DBG] Token request success.
2019-06-17 16:13:34.876 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 16:13:34.877 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 16:13:34.877 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 16:13:34.880 +02:00 [DBG] Start discovery request
2019-06-17 16:13:34.946 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 16:13:34.977 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 16:13:34.978 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 16:13:34.978 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 16:13:34.980 +02:00 [DBG] Start key discovery request
2019-06-17 16:13:35.077 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:13:35.078 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:13:35.078 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:13:35.085 +02:00 [DBG] Starting introspection request.
2019-06-17 16:13:35.090 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:13:35.091 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:13:35.091 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:13:35.091 +02:00 [DBG] Secret id found: api1
2019-06-17 16:13:35.137 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:13:35.137 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:13:35.137 +02:00 [DBG] API resource validation success
2019-06-17 16:13:35.137 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5NPPND4M:00000004","TimeStamp":"2019-06-17T14:13:35.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:13:35.140 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:13:35.161 +02:00 [DBG] wa2fck+QFeKAdEJFRwns1k+f+uLszqxPjgt9my0+/WQ= found in database: true
2019-06-17 16:13:35.169 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:13:35.169 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:13:35.177 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:13:35.177 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:13:35.189 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:13:35.191 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"517045c34a6fd2a842a2cf8f5080dea17d322bab7520292e7c90e7238721bcf8","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560780810,"exp":1560784410,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"8d5f4c53-7ee7-4b72-8a4f-fb82569689d5","auth_time":1560780810,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:13:35.193 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:13:35.201 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:13:35.203 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bcf8","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5NPPND4M:00000004","TimeStamp":"2019-06-17T14:13:35.0000000Z","ProcessId":32140,"LocalIpAddress":"127.0.0.1:12706","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:13:35.203 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:15:36.478 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:15:36.514 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:15:36.514 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:15:36.514 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:15:36.514 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:15:36.514 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:15:36.514 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:15:36.606 +02:00 [DBG] Starting grant removal
2019-06-17 16:15:36.804 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:15:36.805 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:15:36.805 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:15:36.805 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:15:36.805 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:15:36.805 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:15:36.805 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:15:41.990 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:15:42.004 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:15:42.004 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:15:42.011 +02:00 [DBG] Start token request.
2019-06-17 16:15:42.015 +02:00 [DBG] Start client validation
2019-06-17 16:15:42.019 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:15:42.021 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:15:42.035 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:15:42.035 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:15:42.206 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:15:42.215 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:15:42.222 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:15:42.222 +02:00 [DBG] Client validation success
2019-06-17 16:15:42.238 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5P2BOGTF:00000002","TimeStamp":"2019-06-17T14:15:42.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:15:42.248 +02:00 [DBG] Start token request validation
2019-06-17 16:15:42.257 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:15:42.338 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:15:42.510 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:15:42.524 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:15:42.529 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:15:42.566 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:15:42.567 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTF:00000002","TimeStamp":"2019-06-17T14:15:42.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:15:42.573 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTF:00000002","TimeStamp":"2019-06-17T14:15:42.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:15:42.574 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:15:42.581 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:15:42.601 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:15:42.602 +02:00 [DBG] Getting claims for access token for subject: 7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c
2019-06-17 16:15:42.744 +02:00 [DBG] PZN9j8s8xQfLDe9QYoNMw7OOhgtMG2waeZ6KKG3hVIU= not found in database
2019-06-17 16:15:42.760 +02:00 [DBG] Creating refresh token
2019-06-17 16:15:42.760 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:15:42.764 +02:00 [DBG] re6+aHAH7r2U3+6jT3ZJcra/mPpYzLjdz7qKjFIXbC4= not found in database
2019-06-17 16:15:42.771 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a164","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5aeb","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5P2BOGTF:00000002","TimeStamp":"2019-06-17T14:15:42.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:15:42.772 +02:00 [DBG] Token request success.
2019-06-17 16:15:47.144 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 16:15:47.146 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 16:15:47.146 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 16:15:47.150 +02:00 [DBG] Start discovery request
2019-06-17 16:15:47.211 +02:00 [DBG] Found ["openid","profile","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 16:15:47.241 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 16:15:47.242 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 16:15:47.242 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 16:15:47.244 +02:00 [DBG] Start key discovery request
2019-06-17 16:15:47.332 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:15:47.333 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:15:47.333 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:15:47.338 +02:00 [DBG] Starting introspection request.
2019-06-17 16:15:47.342 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:15:47.342 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:15:47.343 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:15:47.343 +02:00 [DBG] Secret id found: api1
2019-06-17 16:15:47.380 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:15:47.380 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:15:47.380 +02:00 [DBG] API resource validation success
2019-06-17 16:15:47.380 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5P2BOGTE:00000003","TimeStamp":"2019-06-17T14:15:47.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:15:47.383 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:15:47.402 +02:00 [DBG] PZN9j8s8xQfLDe9QYoNMw7OOhgtMG2waeZ6KKG3hVIU= found in database: true
2019-06-17 16:15:47.411 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:15:47.411 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:15:47.417 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:15:47.417 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:15:47.427 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:15:47.429 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"946f09dbf9061bae23914d462359961ebec3c9b4c8ccbb1c8d55f31e9e455aeb","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560780942,"exp":1560784542,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","auth_time":1560780942,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:15:47.431 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:15:47.438 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:15:47.441 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****5aeb","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5P2BOGTE:00000003","TimeStamp":"2019-06-17T14:15:47.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:15:47.441 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:29:24.452 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:29:24.454 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:29:24.454 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:29:24.454 +02:00 [DBG] Start token request.
2019-06-17 16:29:24.454 +02:00 [DBG] Start client validation
2019-06-17 16:29:24.454 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:29:24.454 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:29:24.455 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:29:24.455 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:29:24.810 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:29:24.810 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:29:24.810 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:29:24.810 +02:00 [DBG] Client validation success
2019-06-17 16:29:24.810 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000001","TimeStamp":"2019-06-17T14:29:24.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:29:24.810 +02:00 [DBG] Start token request validation
2019-06-17 16:29:24.810 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:29:24.841 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:29:24.901 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:29:24.903 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:29:24.906 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:29:24.927 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:29:24.927 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000001","TimeStamp":"2019-06-17T14:29:24.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:29:24.927 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000001","TimeStamp":"2019-06-17T14:29:24.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:29:24.927 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:29:24.928 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:29:24.928 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:29:24.928 +02:00 [DBG] Getting claims for access token for subject: 7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c
2019-06-17 16:29:24.937 +02:00 [DBG] TdWMG6+dNE+pGv5niiaJMA1EEIHq4aZufvFFkl8a6/w= not found in database
2019-06-17 16:29:24.941 +02:00 [DBG] Creating refresh token
2019-06-17 16:29:24.941 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:29:24.941 +02:00 [DBG] o77+hZrb5B6/nnK+mgeS+mX7t+nPdbYSEBBiR69jITo= not found in database
2019-06-17 16:29:24.943 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****35c4","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b480","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000001","TimeStamp":"2019-06-17T14:29:24.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:29:24.944 +02:00 [DBG] Token request success.
2019-06-17 16:29:33.878 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:29:33.878 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:29:33.879 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:29:33.879 +02:00 [DBG] Start token request.
2019-06-17 16:29:33.879 +02:00 [DBG] Start client validation
2019-06-17 16:29:33.879 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:29:33.879 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:29:33.879 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:29:33.879 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:29:33.883 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:29:33.883 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:29:33.883 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:29:33.883 +02:00 [DBG] Client validation success
2019-06-17 16:29:33.883 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000002","TimeStamp":"2019-06-17T14:29:33.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:29:33.883 +02:00 [DBG] Start token request validation
2019-06-17 16:29:33.883 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:29:33.884 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:29:33.888 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:29:33.889 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:29:33.892 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:29:33.901 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:29:33.902 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000002","TimeStamp":"2019-06-17T14:29:33.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:29:33.902 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000002","TimeStamp":"2019-06-17T14:29:33.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:29:33.902 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:29:33.902 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:29:33.902 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:29:33.902 +02:00 [DBG] Getting claims for access token for subject: 7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c
2019-06-17 16:29:33.906 +02:00 [DBG] thMD5GJylcOP5WM7Zoho/6lqo0tp/XV6CNSR0ISBVEs= not found in database
2019-06-17 16:29:33.912 +02:00 [DBG] Creating refresh token
2019-06-17 16:29:33.912 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:29:33.914 +02:00 [DBG] Ds6hDJ4YPVUdice5q+4dQIvWxCEECOysRUpn1esysRI= not found in database
2019-06-17 16:29:33.916 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****0171","$type":"Token"},{"TokenType":"access_token","TokenValue":"****6e19","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000002","TimeStamp":"2019-06-17T14:29:33.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:29:33.916 +02:00 [DBG] Token request success.
2019-06-17 16:29:39.127 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:29:39.127 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:29:39.127 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:29:39.128 +02:00 [DBG] Starting introspection request.
2019-06-17 16:29:39.128 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:29:39.128 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:29:39.128 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:29:39.128 +02:00 [DBG] Secret id found: api1
2019-06-17 16:29:39.149 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:29:39.149 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:29:39.149 +02:00 [DBG] API resource validation success
2019-06-17 16:29:39.149 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000003","TimeStamp":"2019-06-17T14:29:39.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:29:39.149 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:29:39.151 +02:00 [DBG] thMD5GJylcOP5WM7Zoho/6lqo0tp/XV6CNSR0ISBVEs= found in database: true
2019-06-17 16:29:39.156 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:29:39.156 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:29:39.158 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:29:39.158 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:29:39.161 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:29:39.161 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"c7a487b13f8f86b06b74c3279f92890e405f068163f31d466262b24bea336e19","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560781773,"exp":1560785373,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","auth_time":1560781773,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:29:39.161 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:29:39.161 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:29:39.161 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****6e19","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000003","TimeStamp":"2019-06-17T14:29:39.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:29:39.161 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:29:55.222 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:29:55.222 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:29:55.222 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:29:55.222 +02:00 [DBG] Start token request.
2019-06-17 16:29:55.222 +02:00 [DBG] Start client validation
2019-06-17 16:29:55.223 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:29:55.223 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:29:55.223 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:29:55.223 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:29:55.227 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:29:55.227 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:29:55.227 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:29:55.227 +02:00 [DBG] Client validation success
2019-06-17 16:29:55.227 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000004","TimeStamp":"2019-06-17T14:29:55.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:29:55.227 +02:00 [DBG] Start token request validation
2019-06-17 16:29:55.227 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:29:55.235 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:29:55.298 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:29:55.298 +02:00 [ERR] Requested scope not allowed: role
2019-06-17 16:29:55.298 +02:00 [ERR] {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":null,"AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 role","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:29:55.300 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":null,"GrantType":"password","Error":"invalid_scope","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000004","TimeStamp":"2019-06-17T14:29:55.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-06-17 16:30:01.288 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:30:01.289 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:30:01.289 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:30:01.289 +02:00 [DBG] Start token request.
2019-06-17 16:30:01.289 +02:00 [DBG] Start client validation
2019-06-17 16:30:01.289 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:30:01.289 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:30:01.289 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:30:01.289 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:30:01.308 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:30:01.308 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:30:01.308 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:30:01.308 +02:00 [DBG] Client validation success
2019-06-17 16:30:01.309 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000005","TimeStamp":"2019-06-17T14:30:01.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:30:01.309 +02:00 [DBG] Start token request validation
2019-06-17 16:30:01.309 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:30:01.315 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:30:01.383 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:30:01.386 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:30:01.390 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:30:01.400 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:30:01.400 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000005","TimeStamp":"2019-06-17T14:30:01.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:30:01.400 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000005","TimeStamp":"2019-06-17T14:30:01.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:30:01.400 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:30:01.401 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:30:01.401 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:30:01.401 +02:00 [DBG] Getting claims for access token for subject: 7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c
2019-06-17 16:30:01.408 +02:00 [DBG] m2ipP2KFcNGADLELRxIEbPv18Q853L9R+sN5+WsA12k= not found in database
2019-06-17 16:30:01.410 +02:00 [DBG] Creating refresh token
2019-06-17 16:30:01.410 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:30:01.411 +02:00 [DBG] Pq0ESM+ZEHypiHODgoVB9k57fax7wmLmxpbWWRFTwgo= not found in database
2019-06-17 16:30:01.414 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****ffe3","$type":"Token"},{"TokenType":"access_token","TokenValue":"****1994","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000005","TimeStamp":"2019-06-17T14:30:01.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:30:01.414 +02:00 [DBG] Token request success.
2019-06-17 16:30:06.645 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:30:06.646 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:30:06.646 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:30:06.646 +02:00 [DBG] Starting introspection request.
2019-06-17 16:30:06.646 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:30:06.646 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:30:06.646 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:30:06.646 +02:00 [DBG] Secret id found: api1
2019-06-17 16:30:06.659 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:30:06.659 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:30:06.659 +02:00 [DBG] API resource validation success
2019-06-17 16:30:06.659 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000006","TimeStamp":"2019-06-17T14:30:06.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:30:06.659 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:30:06.661 +02:00 [DBG] m2ipP2KFcNGADLELRxIEbPv18Q853L9R+sN5+WsA12k= found in database: true
2019-06-17 16:30:06.664 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:30:06.664 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:30:06.668 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:30:06.668 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:30:06.671 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:30:06.671 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"0620b15ccc87000a80a6c5ca9f0404bb5132dcd6aeeb79cbb55581977be91994","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560781801,"exp":1560785401,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","auth_time":1560781801,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:30:06.671 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:30:06.671 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:30:06.672 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****1994","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000006","TimeStamp":"2019-06-17T14:30:06.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:30:06.672 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:30:31.842 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:30:31.843 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:30:31.843 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:30:31.843 +02:00 [DBG] Start token request.
2019-06-17 16:30:31.843 +02:00 [DBG] Start client validation
2019-06-17 16:30:31.843 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:30:31.843 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:30:31.843 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:30:31.843 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:30:31.847 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:30:31.847 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:30:31.848 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:30:31.848 +02:00 [DBG] Client validation success
2019-06-17 16:30:31.848 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000007","TimeStamp":"2019-06-17T14:30:31.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:30:31.848 +02:00 [DBG] Start token request validation
2019-06-17 16:30:31.848 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:30:31.850 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:30:31.853 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:30:31.855 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:30:31.859 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:30:31.868 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:30:31.869 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000007","TimeStamp":"2019-06-17T14:30:31.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:30:31.869 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000007","TimeStamp":"2019-06-17T14:30:31.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:30:31.869 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:30:31.869 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:30:31.869 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:30:31.869 +02:00 [DBG] Getting claims for access token for subject: 7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c
2019-06-17 16:30:31.876 +02:00 [DBG] Zjynn7TRCDZGIRcU38fBZBET0vzT5cL65UdLQz8bEMU= not found in database
2019-06-17 16:30:31.894 +02:00 [DBG] Creating refresh token
2019-06-17 16:30:31.895 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:30:31.895 +02:00 [DBG] 2/dJhx+yjUmh/0wV0chb9MwsZbKzuR6cDANPc3hr9VM= not found in database
2019-06-17 16:30:31.897 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****1b10","$type":"Token"},{"TokenType":"access_token","TokenValue":"****9b3f","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000007","TimeStamp":"2019-06-17T14:30:31.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:30:31.897 +02:00 [DBG] Token request success.
2019-06-17 16:30:54.813 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:30:54.813 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:30:54.813 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:30:54.813 +02:00 [DBG] Start token request.
2019-06-17 16:30:54.813 +02:00 [DBG] Start client validation
2019-06-17 16:30:54.814 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:30:54.814 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:30:54.814 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:30:54.814 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:30:54.817 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:30:54.817 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:30:54.817 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:30:54.817 +02:00 [DBG] Client validation success
2019-06-17 16:30:54.818 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000008","TimeStamp":"2019-06-17T14:30:54.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:30:54.818 +02:00 [DBG] Start token request validation
2019-06-17 16:30:54.818 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:30:54.819 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:30:54.822 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:30:54.823 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:30:54.826 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:30:54.835 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:30:54.835 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000008","TimeStamp":"2019-06-17T14:30:54.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:30:54.835 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000008","TimeStamp":"2019-06-17T14:30:54.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:30:54.835 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:30:54.835 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:30:54.835 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:30:54.835 +02:00 [DBG] Getting claims for access token for subject: 7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c
2019-06-17 16:30:54.841 +02:00 [DBG] lG+IsSOgaUXc8xFkeBcj38RCVvI7W4HgNkH5f95nulI= not found in database
2019-06-17 16:30:54.846 +02:00 [DBG] Creating refresh token
2019-06-17 16:30:54.846 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:30:54.847 +02:00 [DBG] jYHWN2kr6RgcxbOqDn4LJfDy/KWet5yPCYrGbg6B2B8= not found in database
2019-06-17 16:30:54.848 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****d907","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8cb7","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000008","TimeStamp":"2019-06-17T14:30:54.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:30:54.848 +02:00 [DBG] Token request success.
2019-06-17 16:31:04.969 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:31:04.969 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:31:04.969 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:31:04.969 +02:00 [DBG] Starting introspection request.
2019-06-17 16:31:04.969 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:31:04.969 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:31:04.969 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:31:04.969 +02:00 [DBG] Secret id found: api1
2019-06-17 16:31:04.981 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:31:04.981 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:31:04.981 +02:00 [DBG] API resource validation success
2019-06-17 16:31:04.981 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000009","TimeStamp":"2019-06-17T14:31:04.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:31:04.981 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:31:04.983 +02:00 [DBG] lG+IsSOgaUXc8xFkeBcj38RCVvI7W4HgNkH5f95nulI= found in database: true
2019-06-17 16:31:04.999 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:31:04.999 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:31:05.002 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:31:05.002 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:31:05.005 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:31:05.005 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"db4d6c9b18d9d499e4591a2d3357bb1c2c19eec666c8c228151d509204bc8cb7","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560781854,"exp":1560785454,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","auth_time":1560781854,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:31:05.005 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:31:05.005 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:31:05.005 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****8cb7","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:00000009","TimeStamp":"2019-06-17T14:31:05.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:31:05.005 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:31:27.054 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:31:27.054 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:31:27.054 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:31:27.054 +02:00 [DBG] Starting introspection request.
2019-06-17 16:31:27.054 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:31:27.054 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:31:27.054 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:31:27.054 +02:00 [DBG] Secret id found: api1
2019-06-17 16:31:27.068 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:31:27.068 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:31:27.068 +02:00 [DBG] API resource validation success
2019-06-17 16:31:27.068 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:0000000A","TimeStamp":"2019-06-17T14:31:27.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:31:27.068 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:31:27.070 +02:00 [DBG] lG+IsSOgaUXc8xFkeBcj38RCVvI7W4HgNkH5f95nulI= found in database: true
2019-06-17 16:31:27.089 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:31:27.089 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:31:27.093 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:31:27.093 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:31:27.096 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:31:27.096 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"db4d6c9b18d9d499e4591a2d3357bb1c2c19eec666c8c228151d509204bc8cb7","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560781854,"exp":1560785454,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","auth_time":1560781854,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:31:27.096 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:31:27.096 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:31:27.096 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****8cb7","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5P2BOGTG:0000000A","TimeStamp":"2019-06-17T14:31:27.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:31:27.096 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:32:41.443 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 16:32:41.444 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 16:32:41.445 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 16:32:41.451 +02:00 [DBG] Start userinfo request
2019-06-17 16:32:41.455 +02:00 [DBG] Bearer token found in header
2019-06-17 16:32:41.462 +02:00 [DBG] lG+IsSOgaUXc8xFkeBcj38RCVvI7W4HgNkH5f95nulI= found in database: true
2019-06-17 16:32:41.479 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:32:41.480 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:32:41.483 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:32:41.483 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:32:41.486 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:32:41.486 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"db4d6c9b18d9d499e4591a2d3357bb1c2c19eec666c8c228151d509204bc8cb7","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560781854,"exp":1560785454,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","auth_time":1560781854,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:32:41.495 +02:00 [DBG] Creating userinfo response
2019-06-17 16:32:41.498 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 16:32:41.500 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 16:32:41.510 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:32:41.510 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-17 16:32:41.510 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 16:32:41.512 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:32:41.517 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-17 16:32:41.517 +02:00 [DBG] End userinfo request
2019-06-17 16:32:53.137 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:32:53.137 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:32:53.137 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:32:53.137 +02:00 [DBG] Starting introspection request.
2019-06-17 16:32:53.137 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:32:53.137 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:32:53.138 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:32:53.138 +02:00 [DBG] Secret id found: api1
2019-06-17 16:32:53.151 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:32:53.151 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:32:53.151 +02:00 [DBG] API resource validation success
2019-06-17 16:32:53.151 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ5P2BOGTH:00000002","TimeStamp":"2019-06-17T14:32:53.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:32:53.151 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:32:53.152 +02:00 [DBG] lG+IsSOgaUXc8xFkeBcj38RCVvI7W4HgNkH5f95nulI= found in database: true
2019-06-17 16:32:53.156 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:32:53.156 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:32:53.160 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:32:53.160 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:32:53.164 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:32:53.164 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"db4d6c9b18d9d499e4591a2d3357bb1c2c19eec666c8c228151d509204bc8cb7","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560781854,"exp":1560785454,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"7deb68bd-b9f4-4347-a6ba-5a1c1efc1c0c","auth_time":1560781854,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:32:53.164 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:32:53.164 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:32:53.164 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****8cb7","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ5P2BOGTH:00000002","TimeStamp":"2019-06-17T14:32:53.0000000Z","ProcessId":12492,"LocalIpAddress":"127.0.0.1:5951","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:32:53.164 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:43:21.959 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:43:22.051 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:43:22.051 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:43:22.051 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:43:22.051 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:43:22.051 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:43:22.051 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:43:22.122 +02:00 [DBG] Starting grant removal
2019-06-17 16:43:22.243 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:43:22.245 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:43:22.245 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:43:22.245 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:43:22.245 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:43:22.245 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:43:22.245 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:44:10.242 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:44:10.378 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:44:10.378 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:44:10.378 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:44:10.378 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:44:10.378 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:44:10.378 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:44:10.513 +02:00 [DBG] Starting grant removal
2019-06-17 16:44:10.687 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:44:10.688 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:44:10.688 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:44:10.688 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:44:10.688 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:44:10.688 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:44:10.688 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:44:21.263 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:21.280 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:21.281 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:21.286 +02:00 [DBG] Start token request.
2019-06-17 16:44:21.291 +02:00 [DBG] Start client validation
2019-06-17 16:44:21.295 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:21.298 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:21.312 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:21.312 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:22.281 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:22.291 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:22.298 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:22.298 +02:00 [DBG] Client validation success
2019-06-17 16:44:22.316 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000002","TimeStamp":"2019-06-17T14:44:22.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:22.326 +02:00 [DBG] Start token request validation
2019-06-17 16:44:22.335 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:22.391 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:44:22.591 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:22.603 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:44:22.606 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:22.750 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:22.751 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000002","TimeStamp":"2019-06-17T14:44:22.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:22.757 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000002","TimeStamp":"2019-06-17T14:44:22.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:22.757 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:22.764 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:22.782 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:22.783 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:22.917 +02:00 [DBG] UeUUgXEZGvuDC9VO7gESTlAH58nKWHDiwz8pXB6cNSQ= not found in database
2019-06-17 16:44:22.967 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:22.968 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:22.971 +02:00 [DBG] Z5OY5Fppqb54beK0qWpvXDJtKMVUcazva2EnALl5k1A= not found in database
2019-06-17 16:44:22.979 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a64f","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7bb1","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000002","TimeStamp":"2019-06-17T14:44:22.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:22.980 +02:00 [DBG] Token request success.
2019-06-17 16:44:28.395 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 16:44:28.397 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 16:44:28.397 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 16:44:28.402 +02:00 [DBG] Start userinfo request
2019-06-17 16:44:28.405 +02:00 [DBG] Bearer token found in header
2019-06-17 16:44:28.430 +02:00 [DBG] UeUUgXEZGvuDC9VO7gESTlAH58nKWHDiwz8pXB6cNSQ= found in database: true
2019-06-17 16:44:28.438 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:28.438 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:28.445 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:28.445 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:28.457 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:44:28.458 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"2464edbee3db25b7f93451a6903a4efc9e557cd34851a5da02eef2c11ff77bb1","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782662,"exp":1560786262,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782662,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:44:28.467 +02:00 [DBG] Creating userinfo response
2019-06-17 16:44:28.470 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 16:44:28.472 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 16:44:28.479 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:44:28.479 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-17 16:44:28.479 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 16:44:28.481 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:44:28.486 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-17 16:44:28.486 +02:00 [DBG] End userinfo request
2019-06-17 16:44:32.089 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 16:44:32.089 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 16:44:32.089 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 16:44:32.092 +02:00 [DBG] Start discovery request
2019-06-17 16:44:32.157 +02:00 [DBG] Found ["openid","profile","roles","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 16:44:32.186 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 16:44:32.186 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 16:44:32.186 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 16:44:32.189 +02:00 [DBG] Start key discovery request
2019-06-17 16:44:32.287 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:44:32.289 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:44:32.289 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:44:32.295 +02:00 [DBG] Starting introspection request.
2019-06-17 16:44:32.300 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:32.301 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:32.301 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:32.301 +02:00 [DBG] Secret id found: api1
2019-06-17 16:44:32.345 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:44:32.345 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:32.345 +02:00 [DBG] API resource validation success
2019-06-17 16:44:32.345 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000004","TimeStamp":"2019-06-17T14:44:32.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:44:32.348 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:44:32.349 +02:00 [DBG] UeUUgXEZGvuDC9VO7gESTlAH58nKWHDiwz8pXB6cNSQ= found in database: true
2019-06-17 16:44:32.352 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:32.352 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:32.355 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:32.355 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:32.358 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:44:32.358 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"2464edbee3db25b7f93451a6903a4efc9e557cd34851a5da02eef2c11ff77bb1","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782662,"exp":1560786262,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782662,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:44:32.361 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:44:32.368 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:44:32.370 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****7bb1","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000004","TimeStamp":"2019-06-17T14:44:32.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:44:32.371 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:44:41.105 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:41.105 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:41.105 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:41.105 +02:00 [DBG] Start token request.
2019-06-17 16:44:41.105 +02:00 [DBG] Start client validation
2019-06-17 16:44:41.105 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:41.105 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:41.106 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:41.106 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:41.110 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:41.110 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:41.110 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:41.110 +02:00 [DBG] Client validation success
2019-06-17 16:44:41.110 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000004","TimeStamp":"2019-06-17T14:44:41.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:41.110 +02:00 [DBG] Start token request validation
2019-06-17 16:44:41.110 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:41.118 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:41.184 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:41.185 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:41.189 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:41.202 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:41.202 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000004","TimeStamp":"2019-06-17T14:44:41.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:41.203 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000004","TimeStamp":"2019-06-17T14:44:41.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:41.203 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:41.203 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:41.203 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:41.203 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:41.208 +02:00 [DBG] 5kmzm3nDATCwF2KRPXCwh0XP1GrAiSiCxp3tdDjAGx0= not found in database
2019-06-17 16:44:41.210 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:41.210 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:41.210 +02:00 [DBG] Gzz0RWu3p7+CiIwIOz4ig/mci+PdeFg8Tv7jUJaJDeI= not found in database
2019-06-17 16:44:41.211 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****af35","$type":"Token"},{"TokenType":"access_token","TokenValue":"****b850","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000004","TimeStamp":"2019-06-17T14:44:41.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:41.212 +02:00 [DBG] Token request success.
2019-06-17 16:44:46.641 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:44:46.642 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:44:46.642 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:44:46.643 +02:00 [DBG] Starting introspection request.
2019-06-17 16:44:46.643 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:46.643 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:46.643 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:46.643 +02:00 [DBG] Secret id found: api1
2019-06-17 16:44:46.646 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:44:46.646 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:46.646 +02:00 [DBG] API resource validation success
2019-06-17 16:44:46.646 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000005","TimeStamp":"2019-06-17T14:44:46.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:44:46.646 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:44:46.647 +02:00 [DBG] 5kmzm3nDATCwF2KRPXCwh0XP1GrAiSiCxp3tdDjAGx0= found in database: true
2019-06-17 16:44:46.650 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:46.650 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:46.655 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:46.655 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:46.658 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:44:46.658 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"a17c8563d13c379a4056871af62ad06729a182f47ec56fadac19a3eed147b850","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782681,"exp":1560786281,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782681,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:44:46.658 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:44:46.658 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:44:46.658 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****b850","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000005","TimeStamp":"2019-06-17T14:44:46.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:44:46.658 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:44:54.849 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:54.849 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:54.849 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:54.849 +02:00 [DBG] Start token request.
2019-06-17 16:44:54.849 +02:00 [DBG] Start client validation
2019-06-17 16:44:54.849 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:54.849 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:54.850 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:54.850 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:54.853 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:54.853 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:54.853 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:54.853 +02:00 [DBG] Client validation success
2019-06-17 16:44:54.853 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000005","TimeStamp":"2019-06-17T14:44:54.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:54.853 +02:00 [DBG] Start token request validation
2019-06-17 16:44:54.853 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:54.855 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:54.859 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:54.860 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:54.863 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:54.872 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:54.872 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000005","TimeStamp":"2019-06-17T14:44:54.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:54.872 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000005","TimeStamp":"2019-06-17T14:44:54.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:54.872 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:54.872 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:54.872 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:54.873 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:54.877 +02:00 [DBG] Q0sTS9g0vLCQcdy0VcEe6Rtb+Sl3vwXAmrkkqRhiQfM= not found in database
2019-06-17 16:44:54.882 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:54.882 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:54.883 +02:00 [DBG] 7tjyug4nytqWS89TdPsczW0n3nHzn6Czd4SRMEixEoA= not found in database
2019-06-17 16:44:54.884 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****1ace","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5067","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000005","TimeStamp":"2019-06-17T14:44:54.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:54.884 +02:00 [DBG] Token request success.
2019-06-17 16:44:55.757 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:55.757 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:55.757 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:55.757 +02:00 [DBG] Start token request.
2019-06-17 16:44:55.757 +02:00 [DBG] Start client validation
2019-06-17 16:44:55.757 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:55.757 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:55.758 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:55.758 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:55.762 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:55.762 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:55.762 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:55.762 +02:00 [DBG] Client validation success
2019-06-17 16:44:55.762 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000006","TimeStamp":"2019-06-17T14:44:55.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:55.762 +02:00 [DBG] Start token request validation
2019-06-17 16:44:55.762 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:55.764 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:55.767 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:55.769 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:55.772 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:55.782 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:55.782 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000006","TimeStamp":"2019-06-17T14:44:55.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:55.782 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000006","TimeStamp":"2019-06-17T14:44:55.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:55.782 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:55.782 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:55.782 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:55.783 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:55.788 +02:00 [DBG] Kier0mozhSM78pbfbhhWXAK0Veq0pq5iz5E+6ptxUL8= not found in database
2019-06-17 16:44:55.798 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:55.799 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:55.799 +02:00 [DBG] 6e/vAox2kPLu/WFwOmDG0x2ExcoT36CLovmN+1h1Z5U= not found in database
2019-06-17 16:44:55.801 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****9da9","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7eb7","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000006","TimeStamp":"2019-06-17T14:44:55.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:55.801 +02:00 [DBG] Token request success.
2019-06-17 16:44:56.550 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:56.551 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:56.551 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:56.551 +02:00 [DBG] Start token request.
2019-06-17 16:44:56.551 +02:00 [DBG] Start client validation
2019-06-17 16:44:56.551 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:56.551 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:56.551 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:56.551 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:56.556 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:56.556 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:56.556 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:56.556 +02:00 [DBG] Client validation success
2019-06-17 16:44:56.556 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000006","TimeStamp":"2019-06-17T14:44:56.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:56.556 +02:00 [DBG] Start token request validation
2019-06-17 16:44:56.556 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:56.558 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:56.561 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:56.562 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:56.565 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:56.575 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:56.575 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000006","TimeStamp":"2019-06-17T14:44:56.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:56.575 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000006","TimeStamp":"2019-06-17T14:44:56.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:56.575 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:56.576 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:56.576 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:56.576 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:56.582 +02:00 [DBG] 7XH5qfYDigprQxoCpjC7kkQFcOmFssR4eamhpzU3igA= not found in database
2019-06-17 16:44:56.583 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:56.583 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:56.584 +02:00 [DBG] LFS4LEBcVLT7TlBMhQ9AIPEfI/2FIzuncJXNHHQ6j30= not found in database
2019-06-17 16:44:56.586 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****0687","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2ec1","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000006","TimeStamp":"2019-06-17T14:44:56.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:56.586 +02:00 [DBG] Token request success.
2019-06-17 16:44:57.307 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:57.308 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:57.308 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:57.308 +02:00 [DBG] Start token request.
2019-06-17 16:44:57.308 +02:00 [DBG] Start client validation
2019-06-17 16:44:57.308 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:57.308 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:57.308 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:57.308 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:57.312 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:57.312 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:57.312 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:57.312 +02:00 [DBG] Client validation success
2019-06-17 16:44:57.313 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000007","TimeStamp":"2019-06-17T14:44:57.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:57.313 +02:00 [DBG] Start token request validation
2019-06-17 16:44:57.313 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:57.314 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:57.317 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:57.319 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:57.322 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:57.335 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:57.335 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000007","TimeStamp":"2019-06-17T14:44:57.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:57.335 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000007","TimeStamp":"2019-06-17T14:44:57.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:57.335 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:57.335 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:57.335 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:57.335 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:57.340 +02:00 [DBG] ALQ0nKewFt360Qh7vsG4ob5wRnn3WUUm6oVRAhsyfUQ= not found in database
2019-06-17 16:44:57.349 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:57.349 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:57.350 +02:00 [DBG] Yyyq+R3NBGf4IcIBAfKDWrpWrH5AAMseeTTiUXUgJ2E= not found in database
2019-06-17 16:44:57.352 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****13c6","$type":"Token"},{"TokenType":"access_token","TokenValue":"****07d7","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000007","TimeStamp":"2019-06-17T14:44:57.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:57.352 +02:00 [DBG] Token request success.
2019-06-17 16:44:58.954 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:58.954 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:58.954 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:58.954 +02:00 [DBG] Start token request.
2019-06-17 16:44:58.954 +02:00 [DBG] Start client validation
2019-06-17 16:44:58.954 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:58.954 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:58.954 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:58.954 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:58.958 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:58.958 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:58.958 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:58.958 +02:00 [DBG] Client validation success
2019-06-17 16:44:58.958 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000007","TimeStamp":"2019-06-17T14:44:58.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:58.958 +02:00 [DBG] Start token request validation
2019-06-17 16:44:58.958 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:58.960 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:58.963 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:58.964 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:58.967 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:58.976 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:58.976 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000007","TimeStamp":"2019-06-17T14:44:58.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:58.977 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000007","TimeStamp":"2019-06-17T14:44:58.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:58.977 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:58.977 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:58.977 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:58.977 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:58.983 +02:00 [DBG] x7hjSesXok03nWUjYoM4S0NvM8zA8AulzOgggVMk0Ro= not found in database
2019-06-17 16:44:58.992 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:58.992 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:58.993 +02:00 [DBG] T2FKBuNw1XsgOppY9PyF476ceNsrgTXrDalPc++og0A= not found in database
2019-06-17 16:44:58.994 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****0f6a","$type":"Token"},{"TokenType":"access_token","TokenValue":"****e7a1","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000007","TimeStamp":"2019-06-17T14:44:58.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:58.995 +02:00 [DBG] Token request success.
2019-06-17 16:44:59.838 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:44:59.838 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:44:59.838 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:44:59.838 +02:00 [DBG] Start token request.
2019-06-17 16:44:59.838 +02:00 [DBG] Start client validation
2019-06-17 16:44:59.838 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:44:59.838 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:44:59.839 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:44:59.839 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:44:59.843 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:44:59.843 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:44:59.843 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:44:59.843 +02:00 [DBG] Client validation success
2019-06-17 16:44:59.843 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000008","TimeStamp":"2019-06-17T14:44:59.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:44:59.843 +02:00 [DBG] Start token request validation
2019-06-17 16:44:59.843 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:44:59.844 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:59.849 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:59.850 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:44:59.854 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:44:59.864 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:44:59.864 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000008","TimeStamp":"2019-06-17T14:44:59.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:59.864 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000008","TimeStamp":"2019-06-17T14:44:59.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:44:59.864 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:44:59.864 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:44:59.864 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:44:59.864 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:44:59.869 +02:00 [DBG] fXtVWZBAnwrCHc+Oz8Ydasxdr1tLhfN7ixwX7yy7Yio= not found in database
2019-06-17 16:44:59.875 +02:00 [DBG] Creating refresh token
2019-06-17 16:44:59.875 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:44:59.876 +02:00 [DBG] aouEx/H/gey6ZoyPc6/HpxsuzY8dARyQuF81wjI9yAU= not found in database
2019-06-17 16:44:59.878 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****cbba","$type":"Token"},{"TokenType":"access_token","TokenValue":"****9447","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000008","TimeStamp":"2019-06-17T14:44:59.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:44:59.878 +02:00 [DBG] Token request success.
2019-06-17 16:45:02.826 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:45:02.826 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:45:02.826 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:45:02.826 +02:00 [DBG] Start token request.
2019-06-17 16:45:02.826 +02:00 [DBG] Start client validation
2019-06-17 16:45:02.826 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:45:02.826 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:45:02.827 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:45:02.827 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:45:02.830 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:02.830 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:02.830 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:45:02.830 +02:00 [DBG] Client validation success
2019-06-17 16:45:02.830 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000008","TimeStamp":"2019-06-17T14:45:02.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:45:02.830 +02:00 [DBG] Start token request validation
2019-06-17 16:45:02.830 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:45:02.832 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:45:02.835 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:45:02.836 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:45:02.838 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:45:02.848 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:45:02.848 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000008","TimeStamp":"2019-06-17T14:45:02.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:45:02.848 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000008","TimeStamp":"2019-06-17T14:45:02.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:45:02.848 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:45:02.848 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:45:02.848 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:45:02.848 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:45:02.854 +02:00 [DBG] xH9zeUN0hJSwUXCu9zYG+8TJQZQeGQfoQCv7zznsYaY= not found in database
2019-06-17 16:45:02.860 +02:00 [DBG] Creating refresh token
2019-06-17 16:45:02.860 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:45:02.861 +02:00 [DBG] Tj7xAx6S9+kipRdcymXiDYYAO72pkGRJH39VkTib5KQ= not found in database
2019-06-17 16:45:02.862 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****876a","$type":"Token"},{"TokenType":"access_token","TokenValue":"****cdf9","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000008","TimeStamp":"2019-06-17T14:45:02.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:45:02.863 +02:00 [DBG] Token request success.
2019-06-17 16:45:08.004 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:45:08.004 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:45:08.004 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:45:08.004 +02:00 [DBG] Starting introspection request.
2019-06-17 16:45:08.004 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:45:08.004 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:45:08.004 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:45:08.004 +02:00 [DBG] Secret id found: api1
2019-06-17 16:45:08.007 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:45:08.007 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:45:08.007 +02:00 [DBG] API resource validation success
2019-06-17 16:45:08.007 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000009","TimeStamp":"2019-06-17T14:45:08.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:45:08.007 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:45:08.008 +02:00 [DBG] xH9zeUN0hJSwUXCu9zYG+8TJQZQeGQfoQCv7zznsYaY= found in database: true
2019-06-17 16:45:08.012 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:08.012 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:08.015 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:08.016 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:08.019 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:45:08.019 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"8e28cff7f425f5f8448969b9842d1f62d3010562a0e1753306a04c03d883cdf9","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782702,"exp":1560786302,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782702,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:45:08.019 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:45:08.019 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:45:08.019 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****cdf9","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6914IRBL:00000009","TimeStamp":"2019-06-17T14:45:08.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:45:08.019 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:45:14.386 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:45:14.386 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:45:14.386 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:45:14.386 +02:00 [DBG] Start token request.
2019-06-17 16:45:14.386 +02:00 [DBG] Start client validation
2019-06-17 16:45:14.386 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:45:14.386 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:45:14.387 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:45:14.387 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:45:14.391 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:14.391 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:14.391 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:45:14.391 +02:00 [DBG] Client validation success
2019-06-17 16:45:14.391 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000009","TimeStamp":"2019-06-17T14:45:14.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:45:14.391 +02:00 [DBG] Start token request validation
2019-06-17 16:45:14.391 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:45:14.393 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:45:14.396 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:45:14.398 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:45:14.401 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:45:14.411 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:45:14.411 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000009","TimeStamp":"2019-06-17T14:45:14.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:45:14.411 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000009","TimeStamp":"2019-06-17T14:45:14.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:45:14.411 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:45:14.411 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:45:14.411 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:45:14.412 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:45:14.416 +02:00 [DBG] l0Qb/Gjb3daaAA+EMAbsxfspmme5TOWjU0H7SniGcTw= not found in database
2019-06-17 16:45:14.448 +02:00 [DBG] Creating refresh token
2019-06-17 16:45:14.448 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:45:14.450 +02:00 [DBG] /uuEBRc3S4IfUnWwo3cOfBqbhddYv0Dnm+vygZW7vuc= not found in database
2019-06-17 16:45:14.452 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****0d56","$type":"Token"},{"TokenType":"access_token","TokenValue":"****a197","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6914IRBM:00000009","TimeStamp":"2019-06-17T14:45:14.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:45:14.452 +02:00 [DBG] Token request success.
2019-06-17 16:45:18.945 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:45:18.946 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:45:18.946 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:45:18.946 +02:00 [DBG] Starting introspection request.
2019-06-17 16:45:18.946 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:45:18.946 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:45:18.946 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:45:18.946 +02:00 [DBG] Secret id found: api1
2019-06-17 16:45:18.962 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:45:18.962 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:45:18.962 +02:00 [DBG] API resource validation success
2019-06-17 16:45:18.962 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6914IRBL:0000000A","TimeStamp":"2019-06-17T14:45:18.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:45:18.962 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:45:18.965 +02:00 [DBG] l0Qb/Gjb3daaAA+EMAbsxfspmme5TOWjU0H7SniGcTw= found in database: true
2019-06-17 16:45:18.994 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:18.994 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:19.016 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:19.016 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:19.019 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:45:19.019 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"84716a12fb443b9d2fe92369b97644fcd4265296169acb83157823328ff6a197","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782714,"exp":1560786314,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782714,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:45:19.019 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:45:19.019 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:45:19.020 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****a197","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6914IRBL:0000000A","TimeStamp":"2019-06-17T14:45:19.0000000Z","ProcessId":17432,"LocalIpAddress":"127.0.0.1:20438","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:45:19.020 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:45:45.968 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:45:46.059 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:45:46.059 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:45:46.059 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:45:46.059 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:45:46.060 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:45:46.060 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:45:46.125 +02:00 [DBG] Starting grant removal
2019-06-17 16:45:46.281 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:45:46.283 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:45:46.283 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:45:46.283 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:45:46.283 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:45:46.283 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:45:46.283 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:45:46.303 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:45:46.313 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:45:46.314 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:45:46.320 +02:00 [DBG] Starting introspection request.
2019-06-17 16:45:46.327 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:45:46.330 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:45:46.342 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:45:46.343 +02:00 [DBG] Secret id found: api1
2019-06-17 16:45:46.951 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:45:47.188 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:45:47.189 +02:00 [DBG] API resource validation success
2019-06-17 16:45:47.201 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000001","TimeStamp":"2019-06-17T14:45:47.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:45:47.214 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:45:47.267 +02:00 [DBG] l0Qb/Gjb3daaAA+EMAbsxfspmme5TOWjU0H7SniGcTw= found in database: true
2019-06-17 16:45:47.522 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:47.528 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:47.534 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:45:47.534 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:45:47.632 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:45:47.637 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"84716a12fb443b9d2fe92369b97644fcd4265296169acb83157823328ff6a197","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782714,"exp":1560786314,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782714,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:45:47.641 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:45:47.650 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:45:47.653 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****a197","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000001","TimeStamp":"2019-06-17T14:45:47.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:45:47.653 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:46:00.545 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:46:00.546 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:46:00.546 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:46:00.546 +02:00 [DBG] Starting introspection request.
2019-06-17 16:46:00.547 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:46:00.547 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:46:00.550 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:46:00.551 +02:00 [DBG] Secret id found: api1
2019-06-17 16:46:00.554 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:46:00.554 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:46:00.554 +02:00 [DBG] API resource validation success
2019-06-17 16:46:00.554 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000003","TimeStamp":"2019-06-17T14:46:00.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:46:00.555 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:46:00.556 +02:00 [DBG] l0Qb/Gjb3daaAA+EMAbsxfspmme5TOWjU0H7SniGcTw= found in database: true
2019-06-17 16:46:00.560 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:00.560 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:00.564 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:00.565 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:00.571 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:46:00.571 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"84716a12fb443b9d2fe92369b97644fcd4265296169acb83157823328ff6a197","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782714,"exp":1560786314,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782714,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:46:00.572 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:46:00.572 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:46:00.572 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****a197","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000003","TimeStamp":"2019-06-17T14:46:00.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:46:00.572 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:46:09.447 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:46:09.451 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:46:09.451 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:46:09.458 +02:00 [DBG] Start token request.
2019-06-17 16:46:09.463 +02:00 [DBG] Start client validation
2019-06-17 16:46:09.464 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:46:09.464 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:46:09.464 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:46:09.464 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:46:09.467 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:09.467 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:09.468 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:46:09.468 +02:00 [DBG] Client validation success
2019-06-17 16:46:09.468 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000004","TimeStamp":"2019-06-17T14:46:09.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:46:09.474 +02:00 [DBG] Start token request validation
2019-06-17 16:46:09.488 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:46:09.561 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:46:09.675 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:46:09.687 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:46:09.690 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:46:09.741 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:46:09.742 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000004","TimeStamp":"2019-06-17T14:46:09.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:46:09.745 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000004","TimeStamp":"2019-06-17T14:46:09.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:46:09.745 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:46:09.749 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:46:09.767 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:46:09.767 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:46:09.890 +02:00 [DBG] R4bhLxgcvmF3fqQRDBk2z+SqOimivCGH8QQDBrxOSck= not found in database
2019-06-17 16:46:09.942 +02:00 [DBG] Creating refresh token
2019-06-17 16:46:09.942 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:46:09.946 +02:00 [DBG] 1gl9k8q8Biu67gvdRGuhcFNRB+Cszyqe2BvT2Uy0X84= not found in database
2019-06-17 16:46:09.953 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****7862","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5219","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000004","TimeStamp":"2019-06-17T14:46:09.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:46:09.954 +02:00 [DBG] Token request success.
2019-06-17 16:46:14.265 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:46:14.265 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:46:14.265 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:46:14.265 +02:00 [DBG] Starting introspection request.
2019-06-17 16:46:14.265 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:46:14.266 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:46:14.266 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:46:14.266 +02:00 [DBG] Secret id found: api1
2019-06-17 16:46:14.269 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:46:14.269 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:46:14.269 +02:00 [DBG] API resource validation success
2019-06-17 16:46:14.269 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000005","TimeStamp":"2019-06-17T14:46:14.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:46:14.269 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:46:14.270 +02:00 [DBG] R4bhLxgcvmF3fqQRDBk2z+SqOimivCGH8QQDBrxOSck= found in database: true
2019-06-17 16:46:14.274 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:14.274 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:14.277 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:14.277 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:14.280 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:46:14.280 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"5084a51ad0cb96f9d74b5b350028106ad5545764d74b1e889f147abcd47e5219","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782769,"exp":1560786369,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782769,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:46:14.280 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:46:14.280 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:46:14.280 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****5219","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000005","TimeStamp":"2019-06-17T14:46:14.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:46:14.280 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:46:27.965 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:46:27.966 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:46:27.966 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:46:27.966 +02:00 [DBG] Start token request.
2019-06-17 16:46:27.966 +02:00 [DBG] Start client validation
2019-06-17 16:46:27.966 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:46:27.966 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:46:27.966 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:46:27.966 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:46:27.989 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:27.989 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:27.989 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:46:27.989 +02:00 [DBG] Client validation success
2019-06-17 16:46:27.989 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000006","TimeStamp":"2019-06-17T14:46:27.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:46:27.989 +02:00 [DBG] Start token request validation
2019-06-17 16:46:27.989 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:46:27.998 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:46:28.062 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:46:28.063 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:46:28.066 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:46:28.075 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:46:28.075 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000006","TimeStamp":"2019-06-17T14:46:28.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:46:28.075 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000006","TimeStamp":"2019-06-17T14:46:28.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:46:28.075 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:46:28.075 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:46:28.075 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:46:28.075 +02:00 [DBG] Getting claims for access token for subject: ebd8ba14-750a-4692-9620-9c83cfe81333
2019-06-17 16:46:28.082 +02:00 [DBG] tVpu0R0okpD2TeSpVK0LGsEcU6EPX5huRZ7X1vodsnE= not found in database
2019-06-17 16:46:28.085 +02:00 [DBG] Creating refresh token
2019-06-17 16:46:28.085 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:46:28.100 +02:00 [DBG] JEUqd0f36S172WIjdZvGmM5y8bDD2tbgXT2ykyCoxsw= not found in database
2019-06-17 16:46:28.102 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"ebd8ba14-750a-4692-9620-9c83cfe81333","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****c826","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bf11","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000006","TimeStamp":"2019-06-17T14:46:28.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:46:28.102 +02:00 [DBG] Token request success.
2019-06-17 16:46:33.613 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:46:33.613 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:46:33.613 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:46:33.614 +02:00 [DBG] Starting introspection request.
2019-06-17 16:46:33.614 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:46:33.614 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:46:33.614 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:46:33.614 +02:00 [DBG] Secret id found: api1
2019-06-17 16:46:33.626 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:46:33.626 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:46:33.626 +02:00 [DBG] API resource validation success
2019-06-17 16:46:33.627 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000007","TimeStamp":"2019-06-17T14:46:33.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:46:33.627 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:46:33.629 +02:00 [DBG] tVpu0R0okpD2TeSpVK0LGsEcU6EPX5huRZ7X1vodsnE= found in database: true
2019-06-17 16:46:33.633 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:33.633 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:33.637 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:46:33.637 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:46:33.641 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:46:33.641 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"65dbb4a2243926049724bf0cee5d2b23db54a52be18a4f916adb592ffb86bf11","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782788,"exp":1560786388,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"ebd8ba14-750a-4692-9620-9c83cfe81333","auth_time":1560782788,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 16:46:33.641 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:46:33.641 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:46:33.641 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bf11","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ69TKPL8C:00000007","TimeStamp":"2019-06-17T14:46:33.0000000Z","ProcessId":10848,"LocalIpAddress":"127.0.0.1:4399","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:46:33.641 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:47:54.373 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:47:54.410 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:47:54.410 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:47:54.410 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:47:54.410 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:47:54.410 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:47:54.410 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:47:54.504 +02:00 [DBG] Starting grant removal
2019-06-17 16:47:54.745 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:47:54.747 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:47:54.747 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:47:54.747 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:47:54.747 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:47:54.747 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:47:54.747 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:47:59.793 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:47:59.807 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:47:59.807 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:47:59.814 +02:00 [DBG] Start token request.
2019-06-17 16:47:59.819 +02:00 [DBG] Start client validation
2019-06-17 16:47:59.823 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:47:59.827 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:47:59.842 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:47:59.842 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:48:00.024 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:48:00.033 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:48:00.040 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:48:00.040 +02:00 [DBG] Client validation success
2019-06-17 16:48:00.057 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000002","TimeStamp":"2019-06-17T14:48:00.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:48:00.067 +02:00 [DBG] Start token request validation
2019-06-17 16:48:00.077 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:48:00.177 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:48:00.324 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:48:00.336 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:48:00.338 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:48:00.372 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:48:00.373 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000002","TimeStamp":"2019-06-17T14:48:00.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:48:00.380 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000002","TimeStamp":"2019-06-17T14:48:00.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:48:00.380 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:48:00.387 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:48:00.405 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:48:00.405 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 16:48:00.511 +02:00 [DBG] CjC9UVbvW8OeuePtLiC+mNo1FMcsk5mA66+eEY+Bgh4= not found in database
2019-06-17 16:48:00.562 +02:00 [DBG] Creating refresh token
2019-06-17 16:48:00.562 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:48:00.566 +02:00 [DBG] tCuq9unt2a/b4P0NCfDTQR6lHk58GJgBZkrKwi3mBJw= not found in database
2019-06-17 16:48:00.574 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****c836","$type":"Token"},{"TokenType":"access_token","TokenValue":"****96b2","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000002","TimeStamp":"2019-06-17T14:48:00.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:48:00.575 +02:00 [DBG] Token request success.
2019-06-17 16:48:06.506 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:48:06.508 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:48:06.508 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:48:06.514 +02:00 [DBG] Starting introspection request.
2019-06-17 16:48:06.519 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:48:06.519 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:48:06.520 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:48:06.520 +02:00 [DBG] Secret id found: api1
2019-06-17 16:48:06.559 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:48:06.559 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:48:06.559 +02:00 [DBG] API resource validation success
2019-06-17 16:48:06.559 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6B3TE2DE:00000002","TimeStamp":"2019-06-17T14:48:06.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:48:06.562 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:48:06.585 +02:00 [DBG] CjC9UVbvW8OeuePtLiC+mNo1FMcsk5mA66+eEY+Bgh4= found in database: true
2019-06-17 16:48:06.597 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:48:06.597 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:48:06.605 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:48:06.605 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:48:06.618 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:48:06.621 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"fa090484a7f407cab0c3c82d47f20481d32a43153ba9be807a76a812cf8f96b2","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782880,"exp":1560786480,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560782880,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:48:06.623 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:48:06.634 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:48:06.636 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****96b2","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6B3TE2DE:00000002","TimeStamp":"2019-06-17T14:48:06.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:48:06.637 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:48:18.947 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:48:18.948 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:48:18.948 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:48:18.948 +02:00 [DBG] Start token request.
2019-06-17 16:48:18.948 +02:00 [DBG] Start client validation
2019-06-17 16:48:18.948 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:48:18.948 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:48:18.949 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:48:18.949 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:48:18.952 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:48:18.953 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:48:18.953 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:48:18.953 +02:00 [DBG] Client validation success
2019-06-17 16:48:18.953 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000003","TimeStamp":"2019-06-17T14:48:18.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:48:18.953 +02:00 [DBG] Start token request validation
2019-06-17 16:48:18.953 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:48:18.964 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:48:19.062 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:48:19.064 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:48:19.070 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:48:19.081 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:48:19.081 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000003","TimeStamp":"2019-06-17T14:48:19.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:48:19.081 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000003","TimeStamp":"2019-06-17T14:48:19.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:48:19.081 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:48:19.081 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:48:19.081 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:48:19.081 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 16:48:19.088 +02:00 [DBG] Onk/UJ9NlA69uZqWOvSmJItW+ER0+Xr9YkGxBUyHtwg= not found in database
2019-06-17 16:48:19.090 +02:00 [DBG] Creating refresh token
2019-06-17 16:48:19.090 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:48:19.091 +02:00 [DBG] D4IByfg/S2Nfvk0c+pbcliCgBzSets/19JJfGrW/l3I= not found in database
2019-06-17 16:48:19.092 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****aee9","$type":"Token"},{"TokenType":"access_token","TokenValue":"****05d5","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6B3TE2DF:00000003","TimeStamp":"2019-06-17T14:48:19.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:48:19.092 +02:00 [DBG] Token request success.
2019-06-17 16:48:22.961 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:48:22.961 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:48:22.961 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:48:22.961 +02:00 [DBG] Starting introspection request.
2019-06-17 16:48:22.961 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:48:22.962 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:48:22.962 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:48:22.962 +02:00 [DBG] Secret id found: api1
2019-06-17 16:48:22.965 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:48:22.965 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:48:22.965 +02:00 [DBG] API resource validation success
2019-06-17 16:48:22.965 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6B3TE2DE:00000003","TimeStamp":"2019-06-17T14:48:22.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:48:22.965 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:48:22.966 +02:00 [DBG] Onk/UJ9NlA69uZqWOvSmJItW+ER0+Xr9YkGxBUyHtwg= found in database: true
2019-06-17 16:48:22.970 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:48:22.970 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:48:22.974 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:48:22.974 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:48:22.977 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:48:22.979 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"019af8742566d782f41182488b334eccac66213d9d6759d0d18b3c68a56a05d5","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560782899,"exp":1560786499,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560782899,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:48:22.979 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:48:22.980 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:48:22.980 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****05d5","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6B3TE2DE:00000003","TimeStamp":"2019-06-17T14:48:22.0000000Z","ProcessId":33720,"LocalIpAddress":"127.0.0.1:21102","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:48:22.980 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:55:08.100 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:55:08.218 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:55:08.218 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:55:08.218 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:55:08.218 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:55:08.218 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:55:08.218 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:55:08.330 +02:00 [DBG] Starting grant removal
2019-06-17 16:55:08.619 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:55:08.621 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:55:08.621 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:55:08.621 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:55:08.621 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:55:08.621 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:55:08.622 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:55:14.056 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:55:14.072 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:55:14.072 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:55:14.080 +02:00 [DBG] Start token request.
2019-06-17 16:55:14.085 +02:00 [DBG] Start client validation
2019-06-17 16:55:14.089 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:55:14.093 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:55:14.108 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:55:14.109 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:55:14.992 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:55:15.001 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:55:15.007 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:55:15.007 +02:00 [DBG] Client validation success
2019-06-17 16:55:15.023 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6F56VJ71:00000002","TimeStamp":"2019-06-17T14:55:15.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:55:15.034 +02:00 [DBG] Start token request validation
2019-06-17 16:55:15.042 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:55:15.094 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:55:15.290 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:55:15.302 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 16:55:15.304 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:55:15.429 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:55:15.430 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6F56VJ71:00000002","TimeStamp":"2019-06-17T14:55:15.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:55:15.438 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6F56VJ71:00000002","TimeStamp":"2019-06-17T14:55:15.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:55:15.438 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:55:15.446 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:55:15.466 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:55:15.466 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 16:55:15.610 +02:00 [DBG] X1/dINIWL1Cf3+r1qchc7hkfou2+bdwv6wKH3FbbXKk= not found in database
2019-06-17 16:55:15.651 +02:00 [DBG] Creating refresh token
2019-06-17 16:55:15.651 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:55:15.656 +02:00 [DBG] 10m4/4RgVg3ICnbhAAPbBancsY+pDIZa2UEtiwTQ3Mg= not found in database
2019-06-17 16:55:15.665 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****11e8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****2d59","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6F56VJ71:00000002","TimeStamp":"2019-06-17T14:55:15.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:55:15.666 +02:00 [DBG] Token request success.
2019-06-17 16:55:18.088 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 16:55:18.090 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 16:55:18.090 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 16:55:18.090 +02:00 [DBG] Start token request.
2019-06-17 16:55:18.090 +02:00 [DBG] Start client validation
2019-06-17 16:55:18.090 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:55:18.090 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:55:18.091 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:55:18.091 +02:00 [DBG] Secret id found: ro.client
2019-06-17 16:55:18.096 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:55:18.096 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:55:18.096 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:55:18.096 +02:00 [DBG] Client validation success
2019-06-17 16:55:18.096 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6F56VJ72:00000002","TimeStamp":"2019-06-17T14:55:18.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 16:55:18.096 +02:00 [DBG] Start token request validation
2019-06-17 16:55:18.096 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 16:55:18.104 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:55:18.168 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:55:18.170 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 16:55:18.172 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 16:55:18.183 +02:00 [INF] Credentials validated for username: alice
2019-06-17 16:55:18.183 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6F56VJ72:00000002","TimeStamp":"2019-06-17T14:55:18.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:55:18.184 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6F56VJ72:00000002","TimeStamp":"2019-06-17T14:55:18.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 16:55:18.184 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 16:55:18.185 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 16:55:18.186 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 16:55:18.186 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 16:55:18.197 +02:00 [DBG] vIUyvc4rntHWfJjmg4fgO/zOkagLHdBxiQUH/eu5pa8= not found in database
2019-06-17 16:55:18.198 +02:00 [DBG] Creating refresh token
2019-06-17 16:55:18.198 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 16:55:18.199 +02:00 [DBG] /PlAtNcivmcm8C34kXejQh8GQ/fKHKYImX34xTzND0g= not found in database
2019-06-17 16:55:18.201 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****021b","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bc72","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6F56VJ72:00000002","TimeStamp":"2019-06-17T14:55:18.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 16:55:18.201 +02:00 [DBG] Token request success.
2019-06-17 16:55:28.360 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 16:55:28.361 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 16:55:28.361 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 16:55:28.364 +02:00 [DBG] Start discovery request
2019-06-17 16:55:28.434 +02:00 [DBG] Found ["openid","profile","roles","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 16:55:28.464 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 16:55:28.464 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 16:55:28.464 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 16:55:28.467 +02:00 [DBG] Start key discovery request
2019-06-17 16:55:28.563 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:55:28.564 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:55:28.564 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:55:28.570 +02:00 [DBG] Starting introspection request.
2019-06-17 16:55:28.574 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:55:28.574 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:55:28.574 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:55:28.574 +02:00 [DBG] Secret id found: api1
2019-06-17 16:55:28.613 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:55:28.613 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:55:28.613 +02:00 [DBG] API resource validation success
2019-06-17 16:55:28.614 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6F56VJ71:00000004","TimeStamp":"2019-06-17T14:55:28.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:55:28.617 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:55:28.635 +02:00 [DBG] vIUyvc4rntHWfJjmg4fgO/zOkagLHdBxiQUH/eu5pa8= found in database: true
2019-06-17 16:55:28.644 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:55:28.644 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:55:28.651 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:55:28.651 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:55:28.662 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:55:28.663 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"c18edd9fde2955603667ecbc19eff5587c980f6c36aa5d0f8245d59cc793bc72","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783318,"exp":1560786918,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783318,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:55:28.665 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:55:28.672 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:55:28.675 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bc72","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6F56VJ71:00000004","TimeStamp":"2019-06-17T14:55:28.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:55:28.675 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:56:56.754 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:56:56.754 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:56:56.755 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:56:56.757 +02:00 [DBG] Starting introspection request.
2019-06-17 16:56:56.757 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:56:56.757 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:56:56.757 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:56:56.757 +02:00 [DBG] Secret id found: api1
2019-06-17 16:56:56.777 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:56:56.777 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:56:56.777 +02:00 [DBG] API resource validation success
2019-06-17 16:56:56.777 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6F56VJ73:00000001","TimeStamp":"2019-06-17T14:56:56.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:56:56.777 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:56:56.779 +02:00 [DBG] vIUyvc4rntHWfJjmg4fgO/zOkagLHdBxiQUH/eu5pa8= found in database: true
2019-06-17 16:56:56.795 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:56:56.795 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:56:56.798 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:56:56.798 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:56:56.802 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:56:56.803 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"c18edd9fde2955603667ecbc19eff5587c980f6c36aa5d0f8245d59cc793bc72","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783318,"exp":1560786918,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783318,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:56:56.803 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:56:56.803 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:56:56.803 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bc72","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6F56VJ73:00000001","TimeStamp":"2019-06-17T14:56:56.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:56:56.803 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:57:29.210 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:57:29.210 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:57:29.210 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:57:29.210 +02:00 [DBG] Starting introspection request.
2019-06-17 16:57:29.210 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:57:29.210 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:57:29.211 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:57:29.211 +02:00 [DBG] Secret id found: api1
2019-06-17 16:57:29.214 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:57:29.214 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:57:29.214 +02:00 [DBG] API resource validation success
2019-06-17 16:57:29.214 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6F56VJ73:00000002","TimeStamp":"2019-06-17T14:57:29.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:57:29.214 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:57:29.217 +02:00 [DBG] vIUyvc4rntHWfJjmg4fgO/zOkagLHdBxiQUH/eu5pa8= found in database: true
2019-06-17 16:57:29.220 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:57:29.220 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:57:29.223 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:57:29.223 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:57:29.226 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:57:29.226 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"c18edd9fde2955603667ecbc19eff5587c980f6c36aa5d0f8245d59cc793bc72","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783318,"exp":1560786918,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783318,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:57:29.226 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:57:29.226 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:57:29.226 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bc72","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6F56VJ73:00000002","TimeStamp":"2019-06-17T14:57:29.0000000Z","ProcessId":31904,"LocalIpAddress":"127.0.0.1:1659","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:57:29.226 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:58:58.739 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 16:58:58.865 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 16:58:58.865 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 16:58:58.865 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 16:58:58.865 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 16:58:58.865 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 16:58:58.865 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 16:58:58.991 +02:00 [DBG] Starting grant removal
2019-06-17 16:58:59.185 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 16:58:59.186 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 16:58:59.186 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 16:58:59.186 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 16:58:59.186 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 16:58:59.186 +02:00 [DBG] Error Url: /home/error
2019-06-17 16:58:59.186 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 16:59:05.074 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 16:59:05.085 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 16:59:05.085 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 16:59:05.088 +02:00 [DBG] Start discovery request
2019-06-17 16:59:05.904 +02:00 [DBG] Found ["openid","profile","roles","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 16:59:05.950 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 16:59:05.951 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 16:59:05.951 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 16:59:05.954 +02:00 [DBG] Start key discovery request
2019-06-17 16:59:06.051 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:59:06.053 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:59:06.053 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:59:06.060 +02:00 [DBG] Starting introspection request.
2019-06-17 16:59:06.068 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:59:06.072 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:59:06.086 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:59:06.086 +02:00 [DBG] Secret id found: api1
2019-06-17 16:59:06.145 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:59:06.153 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:59:06.153 +02:00 [DBG] API resource validation success
2019-06-17 16:59:06.171 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6H9TT027:00000003","TimeStamp":"2019-06-17T14:59:06.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:59:06.176 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:59:06.225 +02:00 [DBG] vIUyvc4rntHWfJjmg4fgO/zOkagLHdBxiQUH/eu5pa8= found in database: true
2019-06-17 16:59:06.443 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:59:06.448 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:59:06.456 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:59:06.456 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:59:06.548 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:59:06.554 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"c18edd9fde2955603667ecbc19eff5587c980f6c36aa5d0f8245d59cc793bc72","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783318,"exp":1560786918,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783318,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:59:06.556 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:59:06.563 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:59:06.566 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bc72","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6H9TT027:00000003","TimeStamp":"2019-06-17T14:59:06.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:59:06.566 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 16:59:57.550 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 16:59:57.551 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 16:59:57.551 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 16:59:57.551 +02:00 [DBG] Starting introspection request.
2019-06-17 16:59:57.552 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 16:59:57.552 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 16:59:57.552 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 16:59:57.552 +02:00 [DBG] Secret id found: api1
2019-06-17 16:59:57.556 +02:00 [DBG] Found api1 API resource in database
2019-06-17 16:59:57.556 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 16:59:57.556 +02:00 [DBG] API resource validation success
2019-06-17 16:59:57.557 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6H9TT028:00000003","TimeStamp":"2019-06-17T14:59:57.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 16:59:57.557 +02:00 [DBG] Introspection request validation started.
2019-06-17 16:59:57.558 +02:00 [DBG] vIUyvc4rntHWfJjmg4fgO/zOkagLHdBxiQUH/eu5pa8= found in database: true
2019-06-17 16:59:57.562 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:59:57.562 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:59:57.566 +02:00 [DBG] ro.client found in database: true
2019-06-17 16:59:57.566 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 16:59:57.575 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 16:59:57.575 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"c18edd9fde2955603667ecbc19eff5587c980f6c36aa5d0f8245d59cc793bc72","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783318,"exp":1560786918,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783318,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 16:59:57.575 +02:00 [DBG] Introspection request validation successful.
2019-06-17 16:59:57.575 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 16:59:57.575 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bc72","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6H9TT028:00000003","TimeStamp":"2019-06-17T14:59:57.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 16:59:57.575 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 17:00:28.039 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 17:00:28.039 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 17:00:28.039 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 17:00:28.039 +02:00 [DBG] Starting introspection request.
2019-06-17 17:00:28.039 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:00:28.039 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:00:28.040 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:00:28.040 +02:00 [DBG] Secret id found: api1
2019-06-17 17:00:28.061 +02:00 [DBG] Found api1 API resource in database
2019-06-17 17:00:28.061 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:00:28.061 +02:00 [DBG] API resource validation success
2019-06-17 17:00:28.061 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6H9TT028:00000004","TimeStamp":"2019-06-17T15:00:28.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 17:00:28.061 +02:00 [DBG] Introspection request validation started.
2019-06-17 17:00:28.063 +02:00 [DBG] vIUyvc4rntHWfJjmg4fgO/zOkagLHdBxiQUH/eu5pa8= found in database: true
2019-06-17 17:00:28.077 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:00:28.077 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:00:28.080 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:00:28.080 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:00:28.082 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:00:28.083 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"c18edd9fde2955603667ecbc19eff5587c980f6c36aa5d0f8245d59cc793bc72","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783318,"exp":1560786918,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783318,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 17:00:28.083 +02:00 [DBG] Introspection request validation successful.
2019-06-17 17:00:28.083 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 17:00:28.083 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****bc72","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr","role"],"TokenScopes":["openid","profile","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6H9TT028:00000004","TimeStamp":"2019-06-17T15:00:28.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 17:00:28.083 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 17:04:54.631 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 17:04:54.638 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 17:04:54.638 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 17:04:54.645 +02:00 [DBG] Start token request.
2019-06-17 17:04:54.650 +02:00 [DBG] Start client validation
2019-06-17 17:04:54.651 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:04:54.651 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:04:54.651 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:04:54.651 +02:00 [DBG] Secret id found: ro.client
2019-06-17 17:04:54.675 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:04:54.675 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:04:54.676 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:04:54.676 +02:00 [DBG] Client validation success
2019-06-17 17:04:54.676 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000001","TimeStamp":"2019-06-17T15:04:54.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 17:04:54.681 +02:00 [DBG] Start token request validation
2019-06-17 17:04:54.690 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 17:04:54.732 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:04:54.830 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:04:54.841 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:04:54.844 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:04:54.901 +02:00 [INF] Credentials validated for username: alice
2019-06-17 17:04:54.902 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000001","TimeStamp":"2019-06-17T15:04:54.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:04:54.905 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000001","TimeStamp":"2019-06-17T15:04:54.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:04:54.905 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 17:04:54.911 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 17:04:54.933 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 17:04:54.934 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 17:04:55.047 +02:00 [DBG] tqZ3hoy84JVKsejNSExgYvSOgsptgV5Z0xXvbba/zNk= not found in database
2019-06-17 17:04:55.081 +02:00 [DBG] Creating refresh token
2019-06-17 17:04:55.081 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 17:04:55.085 +02:00 [DBG] ASFMToKj0AzRmT2c6UpXLgEZjOZtLBMUxm1aAR+oBhU= not found in database
2019-06-17 17:04:55.093 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****a7f5","$type":"Token"},{"TokenType":"access_token","TokenValue":"****eef0","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000001","TimeStamp":"2019-06-17T15:04:55.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 17:04:55.094 +02:00 [DBG] Token request success.
2019-06-17 17:05:02.356 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 17:05:02.357 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 17:05:02.357 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 17:05:02.362 +02:00 [DBG] Start userinfo request
2019-06-17 17:05:02.365 +02:00 [DBG] Bearer token found in header
2019-06-17 17:05:02.370 +02:00 [DBG] tqZ3hoy84JVKsejNSExgYvSOgsptgV5Z0xXvbba/zNk= found in database: true
2019-06-17 17:05:02.373 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:02.373 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:02.377 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:02.377 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:02.380 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:05:02.380 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"a3e6d2d8879bc6df7fc49879edf76df120e640f9254c5758e3f7636380bbeef0","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783895,"exp":1560787495,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783894,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 17:05:02.389 +02:00 [DBG] Creating userinfo response
2019-06-17 17:05:02.392 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 17:05:02.394 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 17:05:02.400 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:05:02.400 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-17 17:05:02.400 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 17:05:02.401 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:05:02.411 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-17 17:05:02.411 +02:00 [DBG] End userinfo request
2019-06-17 17:05:08.212 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 17:05:08.213 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 17:05:08.213 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 17:05:08.213 +02:00 [DBG] Start token request.
2019-06-17 17:05:08.214 +02:00 [DBG] Start client validation
2019-06-17 17:05:08.214 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:05:08.214 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:05:08.214 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:05:08.214 +02:00 [DBG] Secret id found: ro.client
2019-06-17 17:05:08.218 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:08.218 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:08.218 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:05:08.218 +02:00 [DBG] Client validation success
2019-06-17 17:05:08.218 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000003","TimeStamp":"2019-06-17T15:05:08.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 17:05:08.218 +02:00 [DBG] Start token request validation
2019-06-17 17:05:08.218 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 17:05:08.225 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:08.302 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:05:08.304 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:08.308 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:05:08.317 +02:00 [INF] Credentials validated for username: alice
2019-06-17 17:05:08.317 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000003","TimeStamp":"2019-06-17T15:05:08.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:05:08.317 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000003","TimeStamp":"2019-06-17T15:05:08.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:05:08.317 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 17:05:08.318 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 17:05:08.318 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 17:05:08.318 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 17:05:08.324 +02:00 [DBG] uTTc9nF2K3zrPy8OQ8H0pRx0ItD6EqMVDcrCaMClo9Y= not found in database
2019-06-17 17:05:08.325 +02:00 [DBG] Creating refresh token
2019-06-17 17:05:08.325 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 17:05:08.325 +02:00 [DBG] 5P047uetjmYs+ZJYZvUg7HmASF1EY26ofqRB0JnILzQ= not found in database
2019-06-17 17:05:08.327 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****3bd2","$type":"Token"},{"TokenType":"access_token","TokenValue":"****5640","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000003","TimeStamp":"2019-06-17T15:05:08.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 17:05:08.327 +02:00 [DBG] Token request success.
2019-06-17 17:05:12.714 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 17:05:12.714 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 17:05:12.714 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 17:05:12.714 +02:00 [DBG] Start userinfo request
2019-06-17 17:05:12.714 +02:00 [DBG] Bearer token found in header
2019-06-17 17:05:12.715 +02:00 [DBG] uTTc9nF2K3zrPy8OQ8H0pRx0ItD6EqMVDcrCaMClo9Y= found in database: true
2019-06-17 17:05:12.719 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:12.719 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:12.723 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:12.723 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:12.726 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:05:12.727 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"71e9e7cf6be9239842796b5e71ec11917b6450f705638c8d0df85a5c78a35640","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783908,"exp":1560787508,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783908,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 17:05:12.727 +02:00 [DBG] Creating userinfo response
2019-06-17 17:05:12.728 +02:00 [DBG] Scopes in access token: openid profile roles api1 offline_access
2019-06-17 17:05:12.728 +02:00 [DBG] Scopes in access token: openid profile roles api1 offline_access
2019-06-17 17:05:12.735 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:12.735 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role
2019-06-17 17:05:12.735 +02:00 [DBG] Scopes in access token: openid profile roles api1 offline_access
2019-06-17 17:05:12.738 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:12.741 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2019-06-17 17:05:12.741 +02:00 [DBG] End userinfo request
2019-06-17 17:05:19.546 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 17:05:19.546 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 17:05:19.546 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 17:05:19.546 +02:00 [DBG] Start token request.
2019-06-17 17:05:19.546 +02:00 [DBG] Start client validation
2019-06-17 17:05:19.546 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:05:19.546 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:05:19.547 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:05:19.547 +02:00 [DBG] Secret id found: ro.client
2019-06-17 17:05:19.550 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:19.550 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:19.550 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:05:19.550 +02:00 [DBG] Client validation success
2019-06-17 17:05:19.550 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000005","TimeStamp":"2019-06-17T15:05:19.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 17:05:19.550 +02:00 [DBG] Start token request validation
2019-06-17 17:05:19.551 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 17:05:19.552 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:05:19.556 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:05:19.558 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:05:19.561 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:05:19.570 +02:00 [INF] Credentials validated for username: alice
2019-06-17 17:05:19.570 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000005","TimeStamp":"2019-06-17T15:05:19.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:05:19.570 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000005","TimeStamp":"2019-06-17T15:05:19.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:05:19.571 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 17:05:19.571 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 17:05:19.571 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 17:05:19.571 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 17:05:19.576 +02:00 [DBG] WXCrDUFDcYbdcMpwRSJuulg6upy2K17dCGmiDc8wUpE= not found in database
2019-06-17 17:05:19.579 +02:00 [DBG] Creating refresh token
2019-06-17 17:05:19.579 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 17:05:19.580 +02:00 [DBG] MJ01tYGjJmpgBzRVH89+lXvD3w1XEoRDjGYFNN8Tmjk= not found in database
2019-06-17 17:05:19.583 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****5513","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dfb8","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000005","TimeStamp":"2019-06-17T15:05:19.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 17:05:19.583 +02:00 [DBG] Token request success.
2019-06-17 17:05:28.082 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 17:05:28.082 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 17:05:28.082 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 17:05:28.082 +02:00 [DBG] Start userinfo request
2019-06-17 17:05:28.082 +02:00 [DBG] Bearer token found in header
2019-06-17 17:05:28.084 +02:00 [DBG] WXCrDUFDcYbdcMpwRSJuulg6upy2K17dCGmiDc8wUpE= found in database: true
2019-06-17 17:05:28.102 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:28.102 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:28.106 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:28.106 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:28.109 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:05:28.109 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"ef0d50c7a55355912d11eafc0935c5a606c1f7700b7038e1074e0b0d5376dfb8","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783919,"exp":1560787519,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783919,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 17:05:28.109 +02:00 [DBG] Creating userinfo response
2019-06-17 17:05:28.109 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 17:05:28.109 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 17:05:28.115 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:05:28.116 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at
2019-06-17 17:05:28.116 +02:00 [DBG] Scopes in access token: openid profile api1 offline_access
2019-06-17 17:05:28.117 +02:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-06-17 17:05:28.122 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website preferred_username
2019-06-17 17:05:28.122 +02:00 [DBG] End userinfo request
2019-06-17 17:05:32.832 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 17:05:32.833 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 17:05:32.833 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 17:05:32.833 +02:00 [DBG] Start token request.
2019-06-17 17:05:32.833 +02:00 [DBG] Start client validation
2019-06-17 17:05:32.833 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:05:32.833 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:05:32.833 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:05:32.833 +02:00 [DBG] Secret id found: ro.client
2019-06-17 17:05:32.853 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:32.853 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:32.853 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:05:32.853 +02:00 [DBG] Client validation success
2019-06-17 17:05:32.853 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000007","TimeStamp":"2019-06-17T15:05:32.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 17:05:32.853 +02:00 [DBG] Start token request validation
2019-06-17 17:05:32.854 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 17:05:32.861 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:32.944 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:05:32.946 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:32.950 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:05:32.960 +02:00 [INF] Credentials validated for username: alice
2019-06-17 17:05:32.961 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":"alice","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000007","TimeStamp":"2019-06-17T15:05:32.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:05:32.961 +02:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000007","TimeStamp":"2019-06-17T15:05:32.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:05:32.961 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 17:05:32.961 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"alice","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"alice","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 17:05:32.961 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 17:05:32.961 +02:00 [DBG] Getting claims for access token for subject: cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64
2019-06-17 17:05:32.967 +02:00 [DBG] E8EEWG1LU7hwfMdSe7nNTRAQv5b8ZNcGCCNy3WjtHy0= not found in database
2019-06-17 17:05:32.969 +02:00 [DBG] Creating refresh token
2019-06-17 17:05:32.970 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 17:05:32.970 +02:00 [DBG] X5QfiaSRWe3n2pvIRkzdOEfKfAljnqjFUvapM5D2ap4= not found in database
2019-06-17 17:05:32.973 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****c897","$type":"Token"},{"TokenType":"access_token","TokenValue":"****a163","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6H9TT029:00000007","TimeStamp":"2019-06-17T15:05:32.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 17:05:32.973 +02:00 [DBG] Token request success.
2019-06-17 17:05:38.989 +02:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-06-17 17:05:38.989 +02:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-06-17 17:05:38.989 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-06-17 17:05:38.989 +02:00 [DBG] Start userinfo request
2019-06-17 17:05:38.989 +02:00 [DBG] Bearer token found in header
2019-06-17 17:05:38.991 +02:00 [DBG] E8EEWG1LU7hwfMdSe7nNTRAQv5b8ZNcGCCNy3WjtHy0= found in database: true
2019-06-17 17:05:38.995 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:38.996 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:38.999 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:05:38.999 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:05:39.003 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:05:39.003 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":"openid","TokenHandle":"c32a8a23c7b2f0acb70d7876eac016a334acf72207ec9219ee6913277bf1a163","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560783932,"exp":1560787532,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"cfc90cdd-fb95-4ce1-a08b-9c69dae0ef64","auth_time":1560783932,"idp":"local","amr":"pwd","role":"admin"},"$type":"TokenValidationLog"}
2019-06-17 17:05:39.003 +02:00 [DBG] Creating userinfo response
2019-06-17 17:05:39.003 +02:00 [DBG] Scopes in access token: openid profile roles api1 offline_access
2019-06-17 17:05:39.003 +02:00 [DBG] Scopes in access token: openid profile roles api1 offline_access
2019-06-17 17:05:39.012 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:39.012 +02:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role
2019-06-17 17:05:39.012 +02:00 [DBG] Scopes in access token: openid profile roles api1 offline_access
2019-06-17 17:05:39.013 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:05:39.016 +02:00 [INF] Profile service returned the following claim types: sub name given_name family_name website role preferred_username
2019-06-17 17:05:39.016 +02:00 [DBG] End userinfo request
2019-06-17 17:07:42.369 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 17:07:42.373 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 17:07:42.373 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 17:07:42.373 +02:00 [DBG] Start token request.
2019-06-17 17:07:42.373 +02:00 [DBG] Start client validation
2019-06-17 17:07:42.373 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:07:42.373 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:07:42.374 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:07:42.374 +02:00 [DBG] Secret id found: ro.client
2019-06-17 17:07:42.395 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:07:42.395 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:07:42.395 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:07:42.395 +02:00 [DBG] Client validation success
2019-06-17 17:07:42.395 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000001","TimeStamp":"2019-06-17T15:07:42.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 17:07:42.395 +02:00 [DBG] Start token request validation
2019-06-17 17:07:42.395 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 17:07:42.402 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:07:42.465 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:07:42.470 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:07:42.511 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:07:42.523 +02:00 [INF] Credentials validated for username: bob
2019-06-17 17:07:42.523 +02:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","DisplayName":"bob","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000001","TimeStamp":"2019-06-17T15:07:42.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:07:42.523 +02:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000001","TimeStamp":"2019-06-17T15:07:42.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:07:42.523 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 17:07:42.523 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"bob","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"bob","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 17:07:42.523 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 17:07:42.523 +02:00 [DBG] Getting claims for access token for subject: 8185a8a0-d3a5-42e8-91aa-2752c2523ed2
2019-06-17 17:07:42.530 +02:00 [DBG] UbPvRuBfI5l0kC380MiBLSCNdX6BOxRq2hOD3JEoXiY= not found in database
2019-06-17 17:07:42.533 +02:00 [DBG] Creating refresh token
2019-06-17 17:07:42.533 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 17:07:42.534 +02:00 [DBG] Q8xsCElWHwEFvyg2q5FUToGcHJPpqt/Xz4yQE+yNYD4= not found in database
2019-06-17 17:07:42.536 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****1247","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7120","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000001","TimeStamp":"2019-06-17T15:07:42.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 17:07:42.536 +02:00 [DBG] Token request success.
2019-06-17 17:07:47.446 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 17:07:47.446 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 17:07:47.446 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 17:07:47.446 +02:00 [DBG] Starting introspection request.
2019-06-17 17:07:47.447 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:07:47.447 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:07:47.447 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:07:47.447 +02:00 [DBG] Secret id found: api1
2019-06-17 17:07:47.456 +02:00 [DBG] Found api1 API resource in database
2019-06-17 17:07:47.456 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:07:47.456 +02:00 [DBG] API resource validation success
2019-06-17 17:07:47.456 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000002","TimeStamp":"2019-06-17T15:07:47.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 17:07:47.456 +02:00 [DBG] Introspection request validation started.
2019-06-17 17:07:47.458 +02:00 [DBG] UbPvRuBfI5l0kC380MiBLSCNdX6BOxRq2hOD3JEoXiY= found in database: true
2019-06-17 17:07:47.472 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:07:47.472 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:07:47.475 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:07:47.475 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:07:47.478 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:07:47.479 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"9810b3477928ddcee3bda107f10b33edc9155af610eea553330a1b3b1a847120","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560784062,"exp":1560787662,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","auth_time":1560784062,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 17:07:47.479 +02:00 [DBG] Introspection request validation successful.
2019-06-17 17:07:47.479 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 17:07:47.479 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****7120","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000002","TimeStamp":"2019-06-17T15:07:47.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 17:07:47.479 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 17:07:52.689 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 17:07:52.689 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 17:07:52.690 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 17:07:52.690 +02:00 [DBG] Starting introspection request.
2019-06-17 17:07:52.690 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:07:52.690 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:07:52.690 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:07:52.690 +02:00 [DBG] Secret id found: api1
2019-06-17 17:07:52.692 +02:00 [DBG] Found api1 API resource in database
2019-06-17 17:07:52.692 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:07:52.692 +02:00 [DBG] API resource validation success
2019-06-17 17:07:52.692 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000003","TimeStamp":"2019-06-17T15:07:52.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 17:07:52.692 +02:00 [DBG] Introspection request validation started.
2019-06-17 17:07:52.693 +02:00 [DBG] UbPvRuBfI5l0kC380MiBLSCNdX6BOxRq2hOD3JEoXiY= found in database: true
2019-06-17 17:07:52.697 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:07:52.697 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:07:52.701 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:07:52.701 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:07:52.705 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:07:52.705 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"9810b3477928ddcee3bda107f10b33edc9155af610eea553330a1b3b1a847120","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560784062,"exp":1560787662,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","auth_time":1560784062,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 17:07:52.705 +02:00 [DBG] Introspection request validation successful.
2019-06-17 17:07:52.705 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 17:07:52.706 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****7120","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6H9TT02A:00000003","TimeStamp":"2019-06-17T15:07:52.0000000Z","ProcessId":8876,"LocalIpAddress":"127.0.0.1:15151","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 17:07:52.706 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 17:12:36.804 +02:00 [INF] Starting IdentityServer4 version 2.5.0.0
2019-06-17 17:12:36.934 +02:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-06-17 17:12:36.934 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-06-17 17:12:36.934 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-06-17 17:12:36.934 +02:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-06-17 17:12:36.934 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-06-17 17:12:36.934 +02:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-06-17 17:12:37.067 +02:00 [DBG] Starting grant removal
2019-06-17 17:12:37.373 +02:00 [DBG] Login Url: /Account/Login
2019-06-17 17:12:37.375 +02:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-06-17 17:12:37.375 +02:00 [DBG] Logout Url: /Account/Logout
2019-06-17 17:12:37.375 +02:00 [DBG] ConsentUrl Url: /consent
2019-06-17 17:12:37.375 +02:00 [DBG] Consent Return Url Parameter: returnUrl
2019-06-17 17:12:37.375 +02:00 [DBG] Error Url: /home/error
2019-06-17 17:12:37.375 +02:00 [DBG] Error Id Parameter: errorId
2019-06-17 17:12:45.285 +02:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-06-17 17:12:45.296 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-06-17 17:12:45.297 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-06-17 17:12:45.299 +02:00 [DBG] Start discovery request
2019-06-17 17:12:46.142 +02:00 [DBG] Found ["openid","profile","roles","api1","api1.write","api1.read"] as all scopes in database
2019-06-17 17:12:46.219 +02:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-06-17 17:12:46.221 +02:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-06-17 17:12:46.221 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-06-17 17:12:46.224 +02:00 [DBG] Start key discovery request
2019-06-17 17:12:46.309 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 17:12:46.311 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 17:12:46.311 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 17:12:46.318 +02:00 [DBG] Starting introspection request.
2019-06-17 17:12:46.327 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:12:46.330 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:12:46.347 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:12:46.347 +02:00 [DBG] Secret id found: api1
2019-06-17 17:12:46.409 +02:00 [DBG] Found api1 API resource in database
2019-06-17 17:12:46.416 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:12:46.416 +02:00 [DBG] API resource validation success
2019-06-17 17:12:46.432 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6OTOL6EQ:00000003","TimeStamp":"2019-06-17T15:12:46.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 17:12:46.438 +02:00 [DBG] Introspection request validation started.
2019-06-17 17:12:46.480 +02:00 [DBG] UbPvRuBfI5l0kC380MiBLSCNdX6BOxRq2hOD3JEoXiY= found in database: true
2019-06-17 17:12:46.732 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:12:46.738 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:12:46.744 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:12:46.745 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:12:46.837 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:12:46.842 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"9810b3477928ddcee3bda107f10b33edc9155af610eea553330a1b3b1a847120","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560784062,"exp":1560787662,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","auth_time":1560784062,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 17:12:46.845 +02:00 [DBG] Introspection request validation successful.
2019-06-17 17:12:46.851 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 17:12:46.855 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****7120","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6OTOL6EQ:00000003","TimeStamp":"2019-06-17T15:12:46.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 17:12:46.855 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 17:12:51.977 +02:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-06-17 17:12:51.981 +02:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-06-17 17:12:51.982 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-06-17 17:12:51.989 +02:00 [DBG] Start token request.
2019-06-17 17:12:51.995 +02:00 [DBG] Start client validation
2019-06-17 17:12:51.995 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:12:51.995 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:12:51.996 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:12:51.996 +02:00 [DBG] Secret id found: ro.client
2019-06-17 17:12:51.999 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:12:51.999 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:12:52.000 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:12:52.000 +02:00 [DBG] Client validation success
2019-06-17 17:12:52.000 +02:00 [INF] {"ClientId":"ro.client","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLNJ6OTOL6EP:00000003","TimeStamp":"2019-06-17T15:12:52.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-06-17 17:12:52.005 +02:00 [DBG] Start token request validation
2019-06-17 17:12:52.014 +02:00 [DBG] Start resource owner password token request validation
2019-06-17 17:12:52.051 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:12:52.163 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:12:52.176 +02:00 [DBG] Found ["openid","profile","roles"] identity scopes in database
2019-06-17 17:12:52.181 +02:00 [DBG] Found ["api1","api1.write","api1.read"] API scopes in database
2019-06-17 17:12:52.239 +02:00 [INF] Credentials validated for username: bob
2019-06-17 17:12:52.240 +02:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","DisplayName":"bob","Endpoint":"Token","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6OTOL6EP:00000003","TimeStamp":"2019-06-17T15:12:52.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:12:52.242 +02:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","DisplayName":null,"Endpoint":"Token","ClientId":"ro.client","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLNJ6OTOL6EP:00000003","TimeStamp":"2019-06-17T15:12:52.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-06-17 17:12:52.242 +02:00 [DBG] Resource owner password token request validation success.
2019-06-17 17:12:52.246 +02:00 [INF] Token request validation success, {"ClientId":"ro.client","ClientName":null,"GrantType":"password","Scopes":"api1 offline_access openid profile roles","AuthorizationCode":null,"RefreshToken":null,"UserName":"bob","AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"scope":"offline_access openid profile api1 roles","grant_type":"password","client_id":"ro.client","client_secret":"***REDACTED***","username":"bob","password":"***REDACTED***"},"$type":"TokenRequestValidationLog"}
2019-06-17 17:12:52.264 +02:00 [DBG] Getting claims for access token for client: ro.client
2019-06-17 17:12:52.265 +02:00 [DBG] Getting claims for access token for subject: 8185a8a0-d3a5-42e8-91aa-2752c2523ed2
2019-06-17 17:12:52.361 +02:00 [DBG] J10aYE1prNce/YQ8lGC8vn4GTlNHqpu4wRUXCuRILjU= not found in database
2019-06-17 17:12:52.424 +02:00 [DBG] Creating refresh token
2019-06-17 17:12:52.424 +02:00 [DBG] Setting a sliding lifetime: 1296000
2019-06-17 17:12:52.428 +02:00 [DBG] yFVKBE/H5jmyxW3ed5JFA4Jc2ssjD2wjtOrDxc3gaLs= not found in database
2019-06-17 17:12:52.435 +02:00 [INF] {"ClientId":"ro.client","ClientName":null,"RedirectUri":null,"Endpoint":"Token","SubjectId":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","Scopes":"openid profile roles api1 offline_access","GrantType":"password","Tokens":[{"TokenType":"refresh_token","TokenValue":"****d1f1","$type":"Token"},{"TokenType":"access_token","TokenValue":"****f29c","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLNJ6OTOL6EP:00000003","TimeStamp":"2019-06-17T15:12:52.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-06-17 17:12:52.436 +02:00 [DBG] Token request success.
2019-06-17 17:13:01.990 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 17:13:01.990 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 17:13:01.990 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 17:13:01.990 +02:00 [DBG] Starting introspection request.
2019-06-17 17:13:01.991 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:13:01.991 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:13:01.991 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:13:01.991 +02:00 [DBG] Secret id found: api1
2019-06-17 17:13:01.994 +02:00 [DBG] Found api1 API resource in database
2019-06-17 17:13:01.994 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:13:01.994 +02:00 [DBG] API resource validation success
2019-06-17 17:13:01.994 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6OTOL6EQ:00000004","TimeStamp":"2019-06-17T15:13:01.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 17:13:01.994 +02:00 [DBG] Introspection request validation started.
2019-06-17 17:13:01.995 +02:00 [DBG] J10aYE1prNce/YQ8lGC8vn4GTlNHqpu4wRUXCuRILjU= found in database: true
2019-06-17 17:13:01.999 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:13:01.999 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:13:02.005 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:13:02.005 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:13:02.008 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:13:02.010 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"1c1ec070af167c4da894479c50ede54b8a0eff7c9e5c020f4329e9c13e8ef29c","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560784372,"exp":1560787972,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","auth_time":1560784372,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 17:13:02.010 +02:00 [DBG] Introspection request validation successful.
2019-06-17 17:13:02.010 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 17:13:02.010 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****f29c","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6OTOL6EQ:00000004","TimeStamp":"2019-06-17T15:13:02.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 17:13:02.010 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 17:13:14.875 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 17:13:14.875 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 17:13:14.875 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 17:13:14.875 +02:00 [DBG] Starting introspection request.
2019-06-17 17:13:14.875 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:13:14.875 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:13:14.875 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:13:14.875 +02:00 [DBG] Secret id found: api1
2019-06-17 17:13:14.887 +02:00 [DBG] Found api1 API resource in database
2019-06-17 17:13:14.887 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:13:14.887 +02:00 [DBG] API resource validation success
2019-06-17 17:13:14.888 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6OTOL6EP:00000004","TimeStamp":"2019-06-17T15:13:14.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 17:13:14.888 +02:00 [DBG] Introspection request validation started.
2019-06-17 17:13:14.889 +02:00 [DBG] J10aYE1prNce/YQ8lGC8vn4GTlNHqpu4wRUXCuRILjU= found in database: true
2019-06-17 17:13:14.906 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:13:14.906 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:13:14.910 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:13:14.910 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:13:14.913 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:13:14.913 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"1c1ec070af167c4da894479c50ede54b8a0eff7c9e5c020f4329e9c13e8ef29c","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560784372,"exp":1560787972,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","auth_time":1560784372,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 17:13:14.913 +02:00 [DBG] Introspection request validation successful.
2019-06-17 17:13:14.913 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 17:13:14.913 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****f29c","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6OTOL6EP:00000004","TimeStamp":"2019-06-17T15:13:14.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 17:13:14.913 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
2019-06-17 17:13:22.483 +02:00 [DBG] Request path /connect/introspect matched to endpoint type Introspection
2019-06-17 17:13:22.483 +02:00 [DBG] Endpoint enabled: Introspection, successfully created handler: IdentityServer4.Endpoints.IntrospectionEndpoint
2019-06-17 17:13:22.483 +02:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.IntrospectionEndpoint for /connect/introspect
2019-06-17 17:13:22.484 +02:00 [DBG] Starting introspection request.
2019-06-17 17:13:22.484 +02:00 [DBG] Start parsing Basic Authentication secret
2019-06-17 17:13:22.484 +02:00 [DBG] Start parsing for secret in post body
2019-06-17 17:13:22.484 +02:00 [DBG] Parser found secret: PostBodySecretParser
2019-06-17 17:13:22.484 +02:00 [DBG] Secret id found: api1
2019-06-17 17:13:22.487 +02:00 [DBG] Found api1 API resource in database
2019-06-17 17:13:22.487 +02:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-06-17 17:13:22.487 +02:00 [DBG] API resource validation success
2019-06-17 17:13:22.487 +02:00 [INF] {"ApiName":"api1","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"API Authentication Success","EventType":"Success","Id":1020,"Message":null,"ActivityId":"0HLNJ6OTOL6EQ:00000005","TimeStamp":"2019-06-17T15:13:22.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"ApiAuthenticationSuccessEvent"}
2019-06-17 17:13:22.487 +02:00 [DBG] Introspection request validation started.
2019-06-17 17:13:22.488 +02:00 [DBG] J10aYE1prNce/YQ8lGC8vn4GTlNHqpu4wRUXCuRILjU= found in database: true
2019-06-17 17:13:22.492 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:13:22.492 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:13:22.495 +02:00 [DBG] ro.client found in database: true
2019-06-17 17:13:22.495 +02:00 [DBG] client configuration validation for client ro.client succeeded.
2019-06-17 17:13:22.498 +02:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-06-17 17:13:22.499 +02:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Reference","ExpectedScope":null,"TokenHandle":"1c1ec070af167c4da894479c50ede54b8a0eff7c9e5c020f4329e9c13e8ef29c","JwtId":null,"Claims":{"iss":"http://localhost:5000","nbf":1560784372,"exp":1560787972,"aud":["http://localhost:5000/resources","api1"],"client_id":"ro.client","scope":["openid","profile","roles","api1","offline_access"],"sub":"8185a8a0-d3a5-42e8-91aa-2752c2523ed2","auth_time":1560784372,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2019-06-17 17:13:22.499 +02:00 [DBG] Introspection request validation successful.
2019-06-17 17:13:22.499 +02:00 [DBG] Creating introspection response for active token.
2019-06-17 17:13:22.499 +02:00 [INF] {"ApiName":"api1","IsActive":true,"Token":"****f29c","ClaimTypes":["iss","nbf","exp","aud","client_id","scope","sub","auth_time","idp","amr"],"TokenScopes":["openid","profile","roles","api1","offline_access"],"Category":"Token","Name":"Token Introspection Success","EventType":"Success","Id":2020,"Message":null,"ActivityId":"0HLNJ6OTOL6EQ:00000005","TimeStamp":"2019-06-17T15:13:22.0000000Z","ProcessId":36708,"LocalIpAddress":"127.0.0.1:34846","RemoteIpAddress":"::1","$type":"TokenIntrospectionSuccessEvent"}
2019-06-17 17:13:22.499 +02:00 [INF] Success token introspection. Token active: true, for API name: api1
